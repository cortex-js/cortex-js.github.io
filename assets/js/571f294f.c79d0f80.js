"use strict";(globalThis.webpackChunkcortexjs_io=globalThis.webpackChunkcortexjs_io||[]).push([[1303],{7223(e,n,i){i.d(n,{A:()=>r});var s=i(4848);function r({children:e}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{children:"\n    .markdown h2 {\n      align-items: center;\n      border-bottom: 2px solid var(--blue-600);\n      color: var(--blue-600);\n      display: flex;\n    }      \n\n\n    .markdown h2 em {\n      margin-left: auto;\n      color: var(--blue-600);\n      display: block;\n      float: right;\n      font-size: .6em;\n      font-style: normal;\n      font-weight: 400\n    }\n  \n    "}),e]})}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>o});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}},9562(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>x,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"mathfield/changelog","title":"Changelog - Mathfield","description":"0.108.2 2025-11-13","source":"@site/docs/mathfield/changelog.md","sourceDirName":"mathfield","slug":"/mathfield/changelog/","permalink":"/mathfield/changelog/","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1769564382000,"frontMatter":{"title":"Changelog - Mathfield","sidebar_label":"Changelog","slug":"/mathfield/changelog/","toc_max_heading_level":2},"sidebar":"docSidebar","previous":{"title":"Demo","permalink":"/mathfield/demo/"},"next":{"title":"Using the Virtual Keyboard","permalink":"/mathfield/virtual-keyboard/"}}');var r=i(4848),t=i(8453),l=i(7223);const o={title:"Changelog - Mathfield",sidebar_label:"Changelog",slug:"/mathfield/changelog/",toc_max_heading_level:2},d="Mathfield Changelog",c={},a=[{value:"0.108.2 <em>2025-11-13</em>",id:"01082-2025-11-13",level:2},{value:"Resolved Issues",id:"resolved-issues",level:3},{value:"0.108.1 <em>2025-11-11</em>",id:"01081-2025-11-11",level:2},{value:"New Features",id:"new-features",level:3},{value:"Resolved Issues",id:"resolved-issues-1",level:3},{value:"0.108.0 <em>2025-11-09</em>",id:"01080-2025-11-09",level:2},{value:"New Features",id:"new-features-1",level:3},{value:"Resolved Issues",id:"resolved-issues-2",level:3},{value:"0.107.1 <em>2025-09-30</em>",id:"01071-2025-09-30",level:2},{value:"Resolved Issues",id:"resolved-issues-3",level:3},{value:"0.107.0 <em>2025-08-17</em>",id:"01070-2025-08-17",level:2},{value:"New Features",id:"new-features-2",level:3},{value:"Resolved Issues",id:"resolved-issues-4",level:3},{value:"0.106.0 <em>2025-07-11</em>",id:"01060-2025-07-11",level:2},{value:"New Features",id:"new-features-3",level:3},{value:"Resolved Issues",id:"resolved-issues-5",level:3},{value:"0.105.3 <em>2025-05-14</em>",id:"01053-2025-05-14",level:2},{value:"Resolved Issues",id:"resolved-issues-6",level:3},{value:"0.105.1 <em>2025-04-18</em>",id:"01051-2025-04-18",level:2},{value:"Resolved Issues",id:"resolved-issues-7",level:3},{value:"Improvements",id:"improvements",level:3},{value:"0.105.0 <em>2025-03-27</em>",id:"01050-2025-03-27",level:2},{value:"Breaking Changes",id:"breaking-changes",level:3},{value:"Issues Resolved",id:"issues-resolved",level:3},{value:"0.104.2 <em>2025-03-23</em>",id:"01042-2025-03-23",level:2},{value:"Issues Resolved",id:"issues-resolved-1",level:3},{value:"0.104.1 <em>2025-03-18</em>",id:"01041-2025-03-18",level:2},{value:"Improvements",id:"improvements-1",level:3},{value:"Issues Resolved",id:"issues-resolved-2",level:3},{value:"0.104.0 <em>2025-02-08</em>",id:"01040-2025-02-08",level:2},{value:"Security Advisories",id:"security-advisories",level:3},{value:"Issues Resolved",id:"issues-resolved-3",level:3},{value:"0.103.0 <em>2024-12-10</em>",id:"01030-2024-12-10",level:2},{value:"Issues Resolved",id:"issues-resolved-4",level:3},{value:"0.102.0 <em>2024-11-29</em>",id:"01020-2024-11-29",level:2},{value:"Issues Resolved",id:"issues-resolved-5",level:3},{value:"Improvements",id:"improvements-2",level:3},{value:"0.101.2 <em>2024-11-15</em>",id:"01012-2024-11-15",level:2},{value:"Issues Resolved",id:"issues-resolved-6",level:3},{value:"0.101.1 <em>2024-10-15</em>",id:"01011-2024-10-15",level:2},{value:"Issues Resolved",id:"issues-resolved-7",level:3},{value:"0.101.0 <em>2024-07-17</em>",id:"01010-2024-07-17",level:2},{value:"Breaking Changes",id:"breaking-changes-1",level:3},{value:"Improvements and New Features",id:"improvements-and-new-features",level:3},{value:"Issues Resolved",id:"issues-resolved-8",level:3},{value:"0.100.0 <em>2024-06-12</em>",id:"01000-2024-06-12",level:2},{value:"Issues Resolved",id:"issues-resolved-9",level:3},{value:"0.99.0 <em>2024-06-10</em>",id:"0990-2024-06-10",level:2},{value:"Breaking Changes",id:"breaking-changes-2",level:3},{value:"Bold",id:"bold",level:3},{value:"Mode Switching",id:"mode-switching",level:3},{value:"New Features",id:"new-features-4",level:3},{value:"Issues Resolved",id:"issues-resolved-10",level:3},{value:"0.98.6 <em>2024-01-27</em>",id:"0986-2024-01-27",level:2},{value:"New Features",id:"new-features-5",level:3},{value:"Issues Resolved",id:"issues-resolved-11",level:3}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"mathfield-changelog",children:"Mathfield Changelog"})}),"\n","\n",(0,r.jsxs)(l.A,{children:[(0,r.jsxs)(n.h2,{id:"01082-2025-11-13",children:["0.108.2 ",(0,r.jsx)(n.em,{children:"2025-11-13"})]}),(0,r.jsx)(n.h3,{id:"resolved-issues",children:"Resolved Issues"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2899"})," Typing an inline shortcut immediately after inserting a structure\n(e.g. ",(0,r.jsx)(n.code,{children:"sin/cos"}),") now expands the shortcut correctly and keeps the caret in the\nnumerator placeholder. The inline shortcut buffer is flushed in place, so the\nfirst character typed in a fresh placeholder is tracked again, and genfrac\ninsertion prioritizes the numerator placeholder before falling back to the\ndenominator. This fixes both the missing ",(0,r.jsx)(n.code,{children:"\\cos"})," expansion and the regression\nwhere the denominator was erroneously selected after ",(0,r.jsx)(n.code,{children:"/"}),"."]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01081-2025-11-11",children:["0.108.1 ",(0,r.jsx)(n.em,{children:"2025-11-11"})]}),(0,r.jsx)(n.h3,{id:"new-features",children:"New Features"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Responsive toggle button layout"}),": The virtual keyboard toggle and menu\nbutton now automatically switch from horizontal (side-by-side) to vertical\n(stacked) layout when the mathfield height is 100px or greater. This happens\ndynamically as you add content to the mathfield."]}),"\n"]}),(0,r.jsx)(n.h3,{id:"resolved-issues-1",children:"Resolved Issues"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fixed virtual keyboard toggle requiring triple-click to activate."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2892"})," Fixed vertical alignment issues when using ",(0,r.jsx)(n.code,{children:"\\colorbox"})," with\nexpressions that have both subscripts and superscripts. Previously, applying a\nbackground color to an expression like ",(0,r.jsx)(n.code,{children:"N_{k}^{2019}"})," would cause the\nsubscripts and superscripts to be misaligned or shift upward. Colorboxes now\nrender correctly with proper baseline alignment regardless of whether the\ncontent has only a subscript, only a superscript, or both."]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01080-2025-11-09",children:["0.108.0 ",(0,r.jsx)(n.em,{children:"2025-11-09"})]}),(0,r.jsx)(n.h3,{id:"new-features-1",children:"New Features"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Virtual keyboard keycaps now expose stable automation hooks. Each keycap\nincludes an ",(0,r.jsx)(n.code,{children:"aria-label"})," and ",(0,r.jsx)(n.code,{children:"data-keycap-value"})," alongside its serialized\ncommand, allowing assistive tech and automated tests to target keys by their\nsemantic value instead of brittle glyph text. Playwright e2e tests were\nupdated to drive the keyboard using these attributes."]}),"\n",(0,r.jsxs)(n.li,{children:["Added ",(0,r.jsx)(n.code,{children:"<math-span>"})," and ",(0,r.jsx)(n.code,{children:"<math-div>"})," web components for lightweight static\nrendering of mathematical expressions. These components provide an alternative\nto ",(0,r.jsx)(n.code,{children:"renderMathInDocument()"})," with a simpler API and support for inline\n(",(0,r.jsx)(n.code,{children:"<math-span>"}),") and block-level (",(0,r.jsx)(n.code,{children:"<math-div>"}),") formulas. They support LaTeX,\nAsciiMath, and MathJSON input formats, and offer a ",(0,r.jsx)(n.code,{children:"render()"})," method for\nmanual re-rendering.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance optimizations"}),": Lazy font loading (fonts load once globally),\nIntersection Observer for deferred rendering (formulas render only when\nvisible)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Accessibility enhancements"}),": Auto-generated ARIA labels with speakable\ntext, MathML fallback for screen readers, keyboard navigation support when\nfocusable (Space/Enter to speak formula), automatic ",(0,r.jsx)(n.code,{children:'role="img"'})," attribute"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2732"})," Pressing the Space key in LaTeX mode now completes the LaTeX command\nand exits LaTeX mode, similar to pressing Enter. Previously, users typing\nLaTeX commands like ",(0,r.jsx)(n.code,{children:"\\alpha"})," would remain in LaTeX mode until pressing Enter,\nand incomplete commands would be lost when dismissing dialogs. Now pressing\nSpace after a valid LaTeX command completes it and returns to math mode,\nmaking LaTeX input more intuitive and preventing data loss. Additionally, when\ntyping LaTeX commands with mandatory arguments (like ",(0,r.jsx)(n.code,{children:"\\frac{1}{2}"}),"), the\ncommand now auto-completes and exits LaTeX mode when the closing brace of the\nlast mandatory argument is typed. The implementation uses the command registry\nto determine the exact number of mandatory arguments, ensuring correct\nbehavior for all commands including those with nested arguments."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2786"})," Fixed scientific notation handling when creating fractions. When\ntyping scientific notation like ",(0,r.jsx)(n.code,{children:"5e-2"})," or ",(0,r.jsx)(n.code,{children:"3.14\xd710^{-2}"})," and then pressing ",(0,r.jsx)(n.code,{children:"/"}),"\nto create a fraction, the entire expression now stays together in the\nnumerator instead of being split apart. Previously, only part of the number\nwould be included (e.g., just ",(0,r.jsx)(n.code,{children:"2"})," from ",(0,r.jsx)(n.code,{children:"5e-2"}),"), breaking the scientific\nnotation. The fix recognizes both e-notation (",(0,r.jsx)(n.code,{children:"5e-2"}),", ",(0,r.jsx)(n.code,{children:"3.14e+10"}),") and \xd710^\nnotation (",(0,r.jsx)(n.code,{children:"3.14\xd710^{-2}"}),", ",(0,r.jsx)(n.code,{children:"5\xd710^3"}),") as atomic units."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scientific notation template auto-formatting"}),". When typing scientific\nnotation in e-notation format (e.g., ",(0,r.jsx)(n.code,{children:"3.14e2"}),", ",(0,r.jsx)(n.code,{children:"5E-3"}),", ",(0,r.jsx)(n.code,{children:"1.23e+10"}),"), MathLive\nnow automatically formats it using a customizable template. The formatting is\ntriggered either when typing a non-digit character after the notation or after\na brief pause in typing (controlled by ",(0,r.jsx)(n.code,{children:"inlineShortcutTimeout"}),"). The template\nis configured via the ",(0,r.jsx)(n.code,{children:"scientificNotationTemplate"})," property (default:\n",(0,r.jsx)(n.code,{children:"#1\\times10^{#2}"}),") where ",(0,r.jsx)(n.code,{children:"#1"})," is replaced with the significand and ",(0,r.jsx)(n.code,{children:"#2"})," with\nthe exponent. For example, typing ",(0,r.jsx)(n.code,{children:"3.14e2"})," followed by a space will\nautomatically format to ",(0,r.jsx)(n.code,{children:"3.14\xd710\xb2"}),". The feature respects the\n",(0,r.jsx)(n.code,{children:"decimalSeparator"})," setting for internationalization."]}),"\n"]}),(0,r.jsx)(n.h3,{id:"resolved-issues-2",children:"Resolved Issues"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Fixed click positioning in multiline environments. When clicking in a\nmultiline environment (such as ",(0,r.jsx)(n.code,{children:"\\displaylines"}),", ",(0,r.jsx)(n.code,{children:"gather"}),", ",(0,r.jsx)(n.code,{children:"align"}),", etc.), the\ncaret is now correctly positioned on the line that is closest to the click\npoint vertically, rather than selecting atoms from other lines based on\noverall Euclidean distance. For example, when clicking horizontally below an\natom on line 1 but vertically at the level of line 2, the caret will now be\npositioned on line 2 instead of incorrectly jumping to line 1. This fix\nensures that clicking in multiline content respects the visual line structure,\nmaking editing more intuitive and predictable."]}),"\n",(0,r.jsxs)(n.li,{children:["Fixed MathML serialization for multiline mathfields. Previously, serializing\nmultiline mathfields (such as ",(0,r.jsx)(n.code,{children:"\\displaylines{\\\\ }"}),") to MathML would result in\ninvalid MathML with syntax errors and console warnings. The fix corrects a\nsyntax error in array delimiter serialization and properly handles line break\n(",(0,r.jsx)(n.code,{children:"\\\\"}),") atoms in multiline environments by skipping them (since line breaks are\nrepresented by the ",(0,r.jsx)(n.code,{children:"<mtr>"})," table structure in MathML, not by explicit line\nbreak atoms)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2146"})," Fixed nested subscript and superscript creation when using physical\nkeyboard shortcuts (",(0,r.jsx)(n.code,{children:"Shift+-"}),", ",(0,r.jsx)(n.code,{children:"Ctrl+-"}),"). Previously, typing ",(0,r.jsx)(n.code,{children:"a_b_"})," would\nhighlight ",(0,r.jsx)(n.code,{children:"b"})," and reuse the outer subscript instead of creating a subscript of\n",(0,r.jsx)(n.code,{children:"b"}),", and typing ",(0,r.jsx)(n.code,{children:"a^b_"})," inside the exponent would unexpectedly attach the new\nsubscript to ",(0,r.jsx)(n.code,{children:"a"}),". Script commands now attach to the atom that currently has\nfocus, so nested scripts work regardless of whether they are triggered by\nsynthetic text insertion or by real key combos."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2343"})," Fixed clipboard API errors when MathLive is used in sandboxed\niframes. Previously, when pasting content in a mathfield embedded in a\nsandboxed iframe without ",(0,r.jsx)(n.code,{children:'allow="clipboard-read; clipboard-write"'}),'\npermissions, unhandled promise rejections would appear in the console\n("Permissions policy violation: The Clipboard API has been blocked"). The\npaste operation now gracefully handles clipboard API errors with appropriate\nuser feedback.']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2364"})," Fixed ",(0,r.jsx)(n.code,{children:"--keycap-height"})," CSS custom property not working in sandboxed\niframes. Previously, setting ",(0,r.jsx)(n.code,{children:"--keycap-height"})," to custom values (e.g., 15px)\nhad no effect because responsive breakpoint queries were using ",(0,r.jsx)(n.code,{children:"max()"}),"\nfunctions that enforced minimum height values. The custom property now\nproperly accepts any user-defined value while maintaining sensible defaults\n(60px, 52px, 42px) when no custom value is provided."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2391"})," Fixed spacing for ",(0,r.jsx)(n.code,{children:"\\class"}),", ",(0,r.jsx)(n.code,{children:"\\cssId"}),", ",(0,r.jsx)(n.code,{children:"\\htmlId"}),", ",(0,r.jsx)(n.code,{children:"\\htmlData"}),",\n",(0,r.jsx)(n.code,{children:"\\htmlStyle"}),", and ",(0,r.jsx)(n.code,{children:"\\href"})," commands. These commands now properly respect\nmathematical spacing rules, matching the behavior of similar commands like\n",(0,r.jsx)(n.code,{children:"\\textcolor"}),". Previously, expressions like ",(0,r.jsx)(n.code,{children:"1=\\class{test}{1}"})," would not have\nproper spacing before the wrapped element, while ",(0,r.jsx)(n.code,{children:"1=\\textcolor{red}{1}"})," would.\nThe commands now create atoms with the correct type (",(0,r.jsx)(n.code,{children:"mord"}),") and use deferred\nargument parsing to ensure proper inter-atom spacing."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2419"})," Fixed parsing of dollar-delimited math expressions when using\n",(0,r.jsx)(n.code,{children:"insert()"})," in text mode. Previously, when inserting strings like\n",(0,r.jsx)(n.code,{children:'"La fonction $f$ est croissante"'})," into a mathfield with ",(0,r.jsx)(n.code,{children:'defaultMode="text"'}),",\nthe dollar signs and their content were being escaped, preventing proper math\nmode switching. The text mode editor now correctly preserves math regions\ndelimited by ",(0,r.jsx)(n.code,{children:"$...$"})," or ",(0,r.jsx)(n.code,{children:"$$...$$"})," while only escaping special characters in\ntext regions, allowing mixed text and inline math expressions to be inserted\ncorrectly."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2444"})," Font style menu items (roman, italic) are now always visible and\nproperly toggleable. Previously, these items only appeared when text was\nselected, and toggling them when positioned after styled text would not work\non the first click. The toggle logic now correctly checks against the computed\ninsert style (including inherited styles from adjacent atoms) rather than just\nthe explicit default style, allowing users to easily toggle off font styles\nlike ",(0,r.jsx)(n.code,{children:"\\mathrm{}"})," (roman/upright)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2447"})," When deleting content in a subscript or superscript of operators\nlike ",(0,r.jsx)(n.code,{children:"\\lim"}),", the cursor would become trapped in the empty branch. Now, when\nall content in a subscript/superscript is deleted and the delete key is\npressed again, the empty branch is removed and the cursor properly navigates\nout, while keeping the operator itself intact."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2476"}),' Readonly expressions can no longer be modified using the virtual\nkeyboard. Previously, when a mathfield was readonly or when the selection was\nwithin a readonly portion (such as outside a prompt/placeholder in a\nfill-in-the-blank scenario), typing on the virtual keyboard would incorrectly\nreplace or modify the readonly content. The virtual keyboard now respects\nreadonly protection, matching the behavior of the physical keyboard by playing\na "plonk" sound and rejecting the input.']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2480"})," Fixed selection behavior within ",(0,r.jsx)(n.code,{children:"\\mathtip"})," and ",(0,r.jsx)(n.code,{children:"\\texttip"})," commands.\nPreviously, it was only possible to select the entire content of a mathtip at\nonce (e.g., all of ",(0,r.jsx)(n.code,{children:"x+1"})," in ",(0,r.jsx)(n.code,{children:"\\mathtip{x+1}{test}"}),"), even though navigation\nwith arrow keys worked correctly. Now partial selection within tooltip content\nis properly supported, allowing users to select individual characters or\nsubexpressions. Additionally, the tooltip styling has been corrected to\nproperly display the background color, border, and shadow on hover."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2512"})," Fixed excessive blank space appearing above inline ",(0,r.jsx)(n.code,{children:"array"}),"\nenvironments. The vertical alignment of arrays has been adjusted to align the\nfirst row's baseline with surrounding text rather than centering the entire\narray around the math axis, which was causing unwanted spacing above inline\narrays with column separators like\n",(0,r.jsx)(n.code,{children:"\\begin{array}{l|l} a & b\\\\ c & d\\end{array}"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2515"})," Fixed placeholders inside accent commands (",(0,r.jsx)(n.code,{children:"\\vec{}"}),", ",(0,r.jsx)(n.code,{children:"\\bar{}"}),",\n",(0,r.jsx)(n.code,{children:"\\hat{}"}),", etc.) not being clickable. When clicking on a placeholder wrapped in\nan accent command, the cursor now correctly positions inside the placeholder\ninstead of selecting the entire accent atom."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2521"})," Fixed the ",(0,r.jsx)(n.code,{children:"/"})," shortcut misplacing subscripts when converting a\nselection into a fraction. Previously, selecting a symbol with an attached\nsubscript, e.g. ",(0,r.jsx)(n.code,{children:"d_0"}),", and pressing ",(0,r.jsx)(n.code,{children:"/"})," would move only the base ",(0,r.jsx)(n.code,{children:"d"})," into the\nnumerator and leave the orphaned ",(0,r.jsx)(n.code,{children:"_0"})," attached to the denominator placeholder.\nSelection normalization now automatically expands to include the associated\n",(0,r.jsx)(n.code,{children:"subsup"})," atom so the scripted symbol stays intact inside the resulting\nfraction."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2558"})," Fixed cursor jumping to the beginning when entering a left\nparenthesis before a previously entered right parenthesis. When typing a\nclosing bracket first (e.g., ",(0,r.jsx)(n.code,{children:"1+2+3)"}),"), then moving the cursor back and typing\nan opening bracket ",(0,r.jsx)(n.code,{children:"("}),", the smart fence feature would correctly create\n",(0,r.jsx)(n.code,{children:"\\left(2+3\\right)"})," but would incorrectly position the cursor at the start of\nthe expression instead of after the opening parenthesis. The cursor now\nproperly stays positioned inside the newly created fence, right after the left\ndelimiter."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2547"})," Fixed rendering of ",(0,r.jsx)(n.code,{children:"\\colorbox"})," in fractions where the colored\nbackground would obscure the fraction bar. The background is now rendered\nbehind the content using a CSS pseudo-element with ",(0,r.jsx)(n.code,{children:"z-index: -1"}),", preventing\nit from painting over adjacent elements like fraction bars. This issue\noccurred specifically with double-braced content like\n",(0,r.jsx)(n.code,{children:"\\frac{{\\colorbox{red}{344}}}{3}"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2570"})," Fixed ",(0,r.jsx)(n.code,{children:"\\bf"}),", ",(0,r.jsx)(n.code,{children:"\\it"}),", and related text formatting commands not\naccepting braced arguments. Previously, commands like ",(0,r.jsx)(n.code,{children:"\\bf{425}"})," would fail to\nparse because the parser didn't handle braced arguments for ",(0,r.jsx)(n.code,{children:"{:rest*}"}),"\ndeferred parameters. Additionally, the rendering system wasn't properly\ncombining ",(0,r.jsx)(n.code,{children:"fontFamily"})," with ",(0,r.jsx)(n.code,{children:"fontSeries"}),"/",(0,r.jsx)(n.code,{children:"fontShape"})," properties, causing\n",(0,r.jsx)(n.code,{children:"\\bf{425}"})," to render in regular weight instead of bold. The parser now\ncorrectly handles braced arguments, and the ",(0,r.jsx)(n.code,{children:"getFont()"})," method builds compound\nvariant keys (e.g., 'roman-bold') by combining these style properties."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2572"})," Fixed typing special characters in placeholders. When typing\ncharacters with keybindings (like backslash, parentheses, brackets) in a\nselected placeholder, the characters would disappear or trigger unwanted\nbehaviors. The placeholder is now deleted before keystroke processing,\nallowing all keybindings and character handling to work correctly."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2579"})," Fixed multiple mathfields showing blinking cursors simultaneously\nwhen ",(0,r.jsx)(n.code,{children:"focus()"})," is called rapidly on multiple mathfields. This occurred because\nChromium browsers don't fire blur events reliably during rapid focus changes,\ncausing multiple mathfields to remain in a focused state. The fix implements\nglobal focus tracking to ensure only one mathfield can be focused at a time,\nexplicitly blurring any previously focused mathfield when a new one gains\nfocus. This handles browser blur event quirks while maintaining backward\ncompatibility with all existing focus/blur behavior."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2619"})," Fixed placeholders in multi-row array environments (like\n",(0,r.jsx)(n.code,{children:"\\displaylines"}),") not being focusable with pointer clicks. The hit-testing\nlogic now properly determines which row was clicked before searching for\natoms, ensuring placeholders in different rows can be correctly selected.\nAdditionally, fixed prompt hit testing to include the full visual area\n(including padding) and corrected cursor positioning to place the cursor\ninside the prompt body rather than selecting around it."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2665"})," Clicking on a mathfield now only fires focus events once, instead of\ngenerating duplicate focus/blur/focusin/focusout events."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2668"})," Fixed right-click context menu causing MathField to lose focus when\nclicking on formatted text. Previously, right-clicking on equation text would\nblur the field, potentially causing incorrect rendering when selecting menu\noptions like color changes. The context menu event is now prevented before\nshowing the menu, ensuring focus is maintained regardless of where the\nright-click occurs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2685"})," Fixed physical keyboard not working after programmatic focus with\nmanual virtual keyboard policy. When calling ",(0,r.jsx)(n.code,{children:"mf.focus()"})," programmatically at\npage load with ",(0,r.jsx)(n.code,{children:'mathVirtualKeyboardPolicy: "manual"'}),", the physical keyboard\nwould stop working. This was caused by a double ",(0,r.jsx)(n.code,{children:"onFocus()"})," invocation that\nset up event capture listeners at the wrong time. The fix prevents the second\n",(0,r.jsx)(n.code,{children:"onFocus()"})," call when focus is initiated programmatically, ensuring keyboard\nevents are properly routed."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2686"})," When deleting a range that includes special mathematical atoms like\n",(0,r.jsx)(n.code,{children:"\\sqrt"}),", ",(0,r.jsx)(n.code,{children:"\\frac"}),", or ",(0,r.jsx)(n.code,{children:"\\enclose"}),", the special atom structure is now properly\nremoved or cleaned up. Previously, deleting content would leave behind empty\nspecial atom structures. Now, if a special atom becomes empty after deletion,\nit is removed entirely. Additionally, when a deletion crosses the boundary of\na special atom (e.g., selecting content both outside and inside a square\nroot), any remaining content inside the special atom is hoisted out, and the\nspecial atom structure is removed."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2698"})," Dispatched virtual keyboard events now include the standard ",(0,r.jsx)(n.code,{children:"origin"}),"\nproperty when ",(0,r.jsx)(n.code,{children:'mathVirtualKeyboardPolicy = "sandboxed"'}),". Previously, when\nMathLive operated within an iframe in sandboxed mode, the MessageEvent objects\ndispatched via ",(0,r.jsx)(n.code,{children:"window.dispatchEvent()"})," were missing this property, causing\nvalidation errors in environments that check for the origin domain."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2714"})," Disabled mathfields no longer receive focus or accept keyboard\ninput. Previously, clicking on or calling ",(0,r.jsx)(n.code,{children:".focus()"})," on a disabled mathfield\nwould trigger focus events and allow keyboard input like ",(0,r.jsx)(n.code,{children:"{"})," and ",(0,r.jsx)(n.code,{children:"/"})," to modify\nthe content, despite the documented behavior that disabled mathfields should\nnot be focusable. Disabled mathfields are now properly non-focusable,\npreventing all focus events and keyboard input."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2728"})," Fixed missing spacer elements when using the ",(0,r.jsx)(n.code,{children:"\\class"})," command.\nPreviously, expressions like ",(0,r.jsx)(n.code,{children:"x+\\class{highlight}{y}+1"})," would not have proper\nspacing before the styled content, causing the spacer element between the ",(0,r.jsx)(n.code,{children:"+"}),"\noperator and the wrapped content to be missing. The ",(0,r.jsx)(n.code,{children:"\\class"})," command now uses\n",(0,r.jsx)(n.code,{children:"boxType: 'lift'"})," to properly expose its contents to the inter-box spacing\nalgorithm, matching the behavior of similar styling commands like ",(0,r.jsx)(n.code,{children:"\\emph"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2733"}),' Fixed inline shortcut buffer persistence after deleting all content.\nWhen typing characters that triggered an inline shortcut (e.g., "xx" \u2192\n"\\times"), then deleting all content with Backspace, and typing again, the\nstale shortcut buffer would incorrectly trigger shortcuts on new input. The\ninline shortcut buffer is now properly flushed when the mathfield becomes\nempty after a deletion operation.']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2739"})," Fixed a crash when pressing Backspace on an empty ",(0,r.jsx)(n.code,{children:"\\displaylines"}),"\nenvironment. The error \"Cannot read properties of undefined (reading\n'length')\" would occur when creating a multiline display (Cmd+Enter), deleting\nall content, and pressing Backspace again. The row deletion logic now properly\nhandles empty cells and missing rows."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2754"})," Setting the ",(0,r.jsx)(n.code,{children:"placeholder"})," property programmatically now works\ncorrectly. Previously, ",(0,r.jsx)(n.code,{children:'mathfield.placeholder = "text"'})," would not update the\nplaceholder. The property now follows the same pattern as all other properties\nfor consistent behavior."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2767"})," When calling ",(0,r.jsx)(n.code,{children:"getValue()"})," on a mathfield in multiline mode with a\nrange that is only within a single line, the returned value is no longer\nunnecessarily wrapped in a ",(0,r.jsx)(n.code,{children:"\\displaylines{}"})," command. The wrapper is now only\nadded when the content actually spans multiple lines."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2770"})," Fixed cursor positioning on first click in complex formulas.\nPreviously, clicking to position the cursor in formulas with many nested\nelements (fractions, subscripts, superscripts) would fail until keyboard\nnavigation was used first. The atom bounds cache is now properly maintained\nacross interactions, ensuring accurate cursor positioning from the first\nclick."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2771"})," The ",(0,r.jsx)(n.code,{children:"<math-field>"})," element now properly shrinks back to its original\nsize after deleting large multi-line formulas (e.g., ",(0,r.jsx)(n.code,{children:"\\begin{align}"}),"\nenvironments). Previously, when clearing content from a multi-row structure,\nthe empty rows would be preserved, causing the field to remain at the expanded\nheight. Now, when all content is deleted, the structure is reset to a single\nempty row while preserving the environment type."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2784"})," The ",(0,r.jsx)(n.code,{children:"\\hat{}"})," accent is now properly centered over uppercase letters.\nPreviously, the accent would appear shifted rather than centered when applied\nto uppercase characters, while it worked correctly with lowercase letters. The\ncentering algorithm now accounts for the width difference between the base\ncharacter and the accent to ensure proper positioning for all characters."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2799"})," When selecting content inside mathematical structures (square roots,\nbrackets, etc.) using the mouse and then inserting a fraction, the selected\ncontent no longer disappears. The selection is now properly used as the\nnumerator of the fraction."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2816"})," Programmatic calls to ",(0,r.jsx)(n.code,{children:".focus()"})," now correctly trigger ",(0,r.jsx)(n.code,{children:"focusin"}),"\nevents."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2818"})," The ",(0,r.jsx)(n.code,{children:"\\mathrm"})," command and other upright variants (",(0,r.jsx)(n.code,{children:"\\mathsf"}),",\n",(0,r.jsx)(n.code,{children:"\\mathtt"}),") are now correctly preserved when exporting to the ",(0,r.jsx)(n.code,{children:"latex-expanded"}),"\nformat. Previously, these commands were being stripped from the output,\ncausing ",(0,r.jsx)(n.code,{children:"\\mathrm{d}"})," to be serialized as just ",(0,r.jsx)(n.code,{children:"d"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2832"}),", ",(0,r.jsx)(n.strong,{children:"#2727"})," Fixed rendering of ",(0,r.jsx)(n.code,{children:"\\cancel"}),", ",(0,r.jsx)(n.code,{children:"\\bcancel"}),", ",(0,r.jsx)(n.code,{children:"\\xcancel"}),", and\nother SVG-based enclosure notations (diagonal strikes, horizontal/vertical\nstrikes, etc.). In v0.106.0+, these notations became completely invisible due\nto SVG elements having 0 width in their viewBox. Additionally, when visible,\nthe positioning of strike lines was incorrect, particularly for complex\nexpressions and fractions. The fix restores proper width calculations and\nimplements symmetric padding for notation boxes, using em-based coordinates\nwith small margins for accurate line positioning. Strike lines now properly\ncover content from corner to corner without extending too far or appearing\noffset."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2847"})," Fixed scroll behavior in fixed-height mathfield containers. When\nnavigating with arrow keys or Tab/Shift+Tab to move between placeholders, the\ncontainer now properly scrolls to keep the cursor or selection visible.\nPreviously, selecting placeholders would cause the scroll to jump to the top,\nand navigating upward wouldn't scroll when the cursor was on the first line.\nThe fix also adds padding (20px) so scrolling happens before the cursor\nreaches the very edge of the viewport, and ensures full selections are visible\nrather than just showing 1 pixel."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2849"})," For compatibility with KaTeX, do not wrap the argument of delimiter\ncommands."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2851"})," Fixed multiline row merging when deleting across multiple lines.\nPreviously, when a selection spanned multiple rows in a multiline environment\n(like ",(0,r.jsx)(n.code,{children:"\\displaylines"}),") and was deleted, the remaining content would stay on\nseparate lines instead of merging. Now, when deleting across rows, the\nremaining fragments are properly merged into a single line."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2859"})," When using ",(0,r.jsx)(n.code,{children:'mathVirtualKeyboardPolicy="manual"'}),", controlling the\nvirtual keyboard via ",(0,r.jsx)(n.code,{children:"focusin"}),"/",(0,r.jsx)(n.code,{children:"focusout"})," event listeners now works correctly.\nThe keyboard no longer closes immediately after opening."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2867"})," In some cases, applying a superscript or subscript to a command with\nan argument (for example ",(0,r.jsx)(n.code,{children:"\\mathbb{R}"}),") would incorrectly include the argument\nin the superscript or subscript."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2884"})," The command to add/remove columns and rows when in a ",(0,r.jsx)(n.code,{children:"cases"}),"\nenvironment are now enabled."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2889"})," Custom attributes would not be propagated to the generated markup."]}),"\n",(0,r.jsxs)(n.li,{children:["Fixed double-click selection of styled text. Previously, double-clicking on\nstyled content like ",(0,r.jsx)(n.code,{children:"\\mathrm{xyz}"})," would incorrectly select adjacent unstyled\ntext instead of the styled content itself. The selection boundary logic now\nproperly checks the next atom's style before advancing, preventing off-by-one\nerrors when determining style boundaries."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2892"})," Fixed superscripts and subscripts shifting upward when inside a\n",(0,r.jsx)(n.code,{children:"\\colorbox"})," command. Elements with background colors now receive proper\nvertical alignment (",(0,r.jsx)(n.code,{children:"vertical-align: -depth"}),") to prevent positioning issues\nwith content of different heights. The fix also ensures background colors use\nthe correct color palette (background colors instead of foreground colors) and\nmaintains editability via the background color menu. Selection highlighting no\nlonger causes subscripts to shift, as vertical alignment is only applied to\nintentional background colors, not selection highlights."]}),"\n",(0,r.jsx)(n.li,{children:"Fix empty-line selection highlighting in multiline mathfields"}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01071-2025-09-30",children:["0.107.1 ",(0,r.jsx)(n.em,{children:"2025-09-30"})]}),(0,r.jsx)(n.h3,{id:"resolved-issues-3",children:"Resolved Issues"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2817"})," Calling ",(0,r.jsx)(n.code,{children:"setPromptValue()"})," no longer changes the focus to the\nmathfield."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2805"})," On mobile, show the math virtual keyboard when using prompts"]}),"\n",(0,r.jsx)(n.li,{children:"Custom macros are now read when using speakable text to speech."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2824"})," Using TypeScript would trigger a compile error about\n",(0,r.jsx)(n.code,{children:"Cannot find module '../editor/keyboard-layout'"})]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01070-2025-08-17",children:["0.107.0 ",(0,r.jsx)(n.em,{children:"2025-08-17"})]}),(0,r.jsx)(n.h3,{id:"new-features-2",children:"New Features"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Added ",(0,r.jsx)(n.code,{children:"mountMathVirtualKeyboard()"})," to control in which browsing context the\nmath virtual keyboard is mounted."]}),"\n"]}),(0,r.jsx)(n.h3,{id:"resolved-issues-4",children:"Resolved Issues"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2800"}),": New line on matrix causes duplicated input"]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01060-2025-07-11",children:["0.106.0 ",(0,r.jsx)(n.em,{children:"2025-07-11"})]}),(0,r.jsx)(n.h3,{id:"new-features-3",children:"New Features"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Export to ",(0,r.jsx)(n.strong,{children:"typst"})," format. Use ",(0,r.jsx)(n.code,{children:'mf.getValue("typst")'})," to get the value of the\nmathfield in typst format."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2731"})," The keybinding ",(0,r.jsx)(n.code,{children:"alt+shift+V"})," now inserts a n",(0,r.jsx)("sup",{children:"th"})," root. The\nexisting ",(0,r.jsx)(n.code,{children:"alt+V"})," keybinding continues to insert a square root."]}),"\n"]}),(0,r.jsx)(n.h3,{id:"resolved-issues-5",children:"Resolved Issues"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The commands ",(0,r.jsx)(n.code,{children:"\\iff"}),", ",(0,r.jsx)(n.code,{children:"\\Coloneqq"})," and ",(0,r.jsx)(n.code,{children:"\\hArr"})," did not render correctly."]}),"\n",(0,r.jsx)(n.li,{children:"Improved rendering in dark mode."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2727"})," Improved rendering of annotations."]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01053-2025-05-14",children:["0.105.3 ",(0,r.jsx)(n.em,{children:"2025-05-14"})]}),(0,r.jsx)(n.h3,{id:"resolved-issues-6",children:"Resolved Issues"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Using the kebab version of commands (for example ",(0,r.jsx)(n.code,{children:'"select-all"'})," instead of\n",(0,r.jsx)(n.code,{children:'"SelectAll"'}),") would incorrectly result in a runtime error."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Using a padding with an ",(0,r.jsx)(n.code,{children:"\\enclose"})," command would not render the padding\ncorrectly. To specify some padding, use\n",(0,r.jsx)(n.code,{children:'\\enclose{updiagonalstrike downdiagonalstrike}[padding="10px", 6px solid rgba(205, 0, 11, .4)]{42}'}),"."]}),"\n"]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01051-2025-04-18",children:["0.105.1 ",(0,r.jsx)(n.em,{children:"2025-04-18"})]}),(0,r.jsx)(n.h3,{id:"resolved-issues-7",children:"Resolved Issues"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2526"})," In the virtual keyboard, the keycap text over CSS variables was not\ndisplayed correctly."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2567"})," Avoid potential race condition when changing the focus of the\nmathfield."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2638"}),", ",(0,r.jsx)(n.strong,{children:"#2479"})," Fragments that were styled with some color were not\nrendered correctly when the mathfield was not focused."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2669"})," If a page had multiple mathfields, when using the suggestion\npopover, the suggestion popover would be inserted in the wrong mathfield."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2584"})," In some cases, a menu item could get inadvertently selected when\nwhen brining up the menu."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2673"})," When using the CJS version of the library, the height of the virtual\nkeyboard was not correctly calculated."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2666"})," In some cases, the state of the Undo/Redo buttons could get out of\nsync with the state of the mathfield."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2667"})," The edit toolbar was not displayed in the alphabetic keyboard\nlayout."]}),"\n"]}),(0,r.jsx)(n.h3,{id:"improvements",children:"Improvements"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Accessibility: Improved support for the high-contrast mode."}),"\n",(0,r.jsxs)(n.li,{children:["There is a new CSS variable to control the z-index of the suggestion popover:\n",(0,r.jsx)(n.code,{children:"--suggestion-zindex"}),". This allows the suggestion popover to be displayed\nabove other elements on the page."]}),"\n",(0,r.jsxs)(n.li,{children:["Added support for the ",(0,r.jsx)(n.code,{children:"\\strut"})," and ",(0,r.jsx)(n.code,{children:"\\mathstrut"})," commands. These commands are\nused to insert a strut, which is an invisible element that takes up space in\nthe math expression. This is useful for aligning expressions or for creating\nspace between elements."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2662"})," When the command popover is displayed, pressing the ",(0,r.jsx)(n.strong,{children:"Return"})," key\nwill insert the command in the mathfield and close the popover."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2658"})," Improved localization for Italian."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2671"})," When inserting a command with an argument with the suggestion\npopover, position the cursor inside the argument."]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01050-2025-03-27",children:["0.105.0 ",(0,r.jsx)(n.em,{children:"2025-03-27"})]}),(0,r.jsx)(n.h3,{id:"breaking-changes",children:"Breaking Changes"}),(0,r.jsxs)(n.p,{children:["In order to support alternate CDNs, in particular ",(0,r.jsx)(n.code,{children:"jsdelivr"}),", the file layout of\nthe ",(0,r.jsx)(n.strong,{children:"npm"})," package has changed. The files that were previously in the ",(0,r.jsx)(n.code,{children:"./dist/"}),"\ndirectory are now in the root of the package. This should not affect most users,\nbut if you are importing the library or auxiliary files from the ",(0,r.jsx)(n.code,{children:"dist"}),"\ndirectory, you will need to update your paths."]}),(0,r.jsxs)(n.p,{children:["To use ",(0,r.jsx)(n.code,{children:"jsdelivr"}),", use:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'import { MathfieldElement } from "https://esm.run/mathlive";\n'})}),(0,r.jsx)(n.p,{children:"or:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<script defer src="https://cdn.jsdelivr.net/npm/mathlive"><\/script>\n'})}),(0,r.jsx)(n.h3,{id:"issues-resolved",children:"Issues Resolved"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"#2647"}),", ",(0,r.jsx)(n.strong,{children:"#2634"}),", ",(0,r.jsx)(n.strong,{children:"#2562"})," Some accents (",(0,r.jsx)(n.code,{children:"\\hat{}"}),", ",(0,r.jsx)(n.code,{children:"\\vec{}"}),") where not\nrendered correctly in some cases."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"#2635"})," In Chrome (and Firefox), clicking on the padding area of the\nmathfield would not result in the focus getting into a zombie state and\nkeyboard event no longer being dispatched."]}),"\n"]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01042-2025-03-23",children:["0.104.2 ",(0,r.jsx)(n.em,{children:"2025-03-23"})]}),(0,r.jsx)(n.h3,{id:"issues-resolved-1",children:"Issues Resolved"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2588"})," With Chrome 133+ input with the physical keyboard was disabled after\nshowing the virtual keyboard."]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01041-2025-03-18",children:["0.104.1 ",(0,r.jsx)(n.em,{children:"2025-03-18"})]}),(0,r.jsx)(n.h3,{id:"improvements-1",children:"Improvements"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Improved support for the ",(0,r.jsx)(n.code,{children:"jsdelivr"})," CDN. To use it, use:"]}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'import { MathfieldElement } from "https://esm.run/mathlive";\n'})}),(0,r.jsx)(n.h3,{id:"issues-resolved-2",children:"Issues Resolved"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2628"})," Attempting to delete an empty line in a multiline environment would\nnot delete the line."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2585"})," In some cases, the arguments of a macro were not serialized\ncorrectly. This could happen when using a macro in conjunction with a inline\nshortcut."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2586"})," The ",(0,r.jsx)(n.code,{children:"\\pdiff{}{}"})," command was not properly serialized to LaTeX."]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01040-2025-02-08",children:["0.104.0 ",(0,r.jsx)(n.em,{children:"2025-02-08"})]}),(0,r.jsx)(n.h3,{id:"security-advisories",children:"Security Advisories"}),(0,r.jsxs)(n.p,{children:["As a reminder, if you are handling untrusted input, you should consider using\nthe ",(0,r.jsx)(n.code,{children:"MathfieldElement.createHTML()"})," method to sanitize content. The\n",(0,r.jsx)(n.code,{children:"createHTML()"})," method follows the recommendations from the\n",(0,r.jsx)(n.a,{href:"https://www.w3.org/TR/trusted-types/",children:"Trusted Type"})," specification."]}),(0,r.jsx)(n.p,{children:"For example, using the DOMPurify library (there are other HTML sanitizers\navailable):"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.2.3/purify.min.js"><\/script>\n'})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"MathfieldElement.createHTML = (html) => DOMPurify.sanitize(html);\n"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://github.com/advisories/GHSA-qwj6-q94f-8425",children:(0,r.jsx)(n.strong,{children:"security advisory"})}),"\nUntrusted input could be used to inject arbitrary HTML or JavaScript code in a\npage using a mathfield or math content rendered by the library, if the content\nincluded an ",(0,r.jsx)(n.code,{children:"\\htmlData{}"})," command with maliciously crafted input and no DOM\nsanitizer was used."]}),"\n",(0,r.jsxs)(n.p,{children:["The content of the ",(0,r.jsx)(n.code,{children:"\\htmlData{}"})," command is now sanitized and the \ud83d\udeab emoji is\ndisplayed instead in the mathfield if the content is unsafe. When using\n",(0,r.jsx)(n.code,{children:"convertLatexToMarkup()"}),", an exception is thrown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"\\href{}{}"})," command now only allows URLs with the ",(0,r.jsx)(n.code,{children:"http"})," or ",(0,r.jsx)(n.code,{children:"https"}),"\nprotocol."]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{id:"issues-resolved-3",children:"Issues Resolved"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Generate only standard trigonometric functions, i.e. those available in the\n",(0,r.jsx)(n.code,{children:"amsmath"})," package. Use ",(0,r.jsx)(n.code,{children:"\\operatorname{}"})," for the others. The standard commands\nare:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\arccos"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\arcsin"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\arctan"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\arg"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\cos"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\cosh"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\cot"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\coth"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\csc"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\sec"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\sin"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\sinh"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\tan"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"\\tanh"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Added support for ",(0,r.jsx)(n.code,{children:"\\dddot"})," and ",(0,r.jsx)(n.code,{children:"\\ddddot"})," commands."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"#2573"})," The ",(0,r.jsx)(n.code,{children:"\\operatorname{}"})," command when round-tripped would incldue an\nextraneous ",(0,r.jsx)(n.code,{children:"\\mathrm{}"})," command."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"#2132"}),", ",(0,r.jsx)(n.strong,{children:"#2548"})," Improved handling of multi-line mathfields. To use a\nmulti-line mathfield, include a multi-line environment:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"\\displaylines{}"}),": single column of left-aligned equations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gather"}),": single column of centered equations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"multline"}),": centered equations with the first line aligned left and the last\nline aligned to the right"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"align"}),": two columns, the first column right-aligned, the second column\nleft-aligned; used for one equation per line"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"split"}),": two columns of equations, the first column right-aligned, the\nsecond column left-aligned; used for a single equation split over multiple\nlines"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.p,{children:"For example:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<math-field>\\displaylines{x=1 \\\\y = 2}</math-field>\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<math-field>\\begin{align}\n  f(0) &= 1 \\\\\n  f(x + 1) &= f(x-1) + f(x)\n\\end{align}\n</math-field>\n"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["When in a multi-line environment, the ",(0,r.jsx)(n.strong,{children:"Return"})," key will move to the next\nline. The ",(0,r.jsx)(n.strong,{children:"Backspace"})," key will delete the current line if the cursor is at\nthe beginning of the line. Note that no placeholder is inserted on a new line:\nthe line is simply blank."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"Add Row Before"}),", ",(0,r.jsx)(n.strong,{children:"Add Row After"}),", ",(0,r.jsx)(n.strong,{children:"Add Column Before"}),", ",(0,r.jsx)(n.strong,{children:"Add Column\nAfter"}),", ",(0,r.jsx)(n.strong,{children:"Delete Row"})," and ",(0,r.jsx)(n.strong,{children:"Delete Columns"})," commands are available in the\ncontext menu when the cursor is inside a matrix. They are not available in\nmulti-line environments."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"#2574"})," The commands ",(0,r.jsx)(n.code,{children:"\\coloneq"}),", ",(0,r.jsx)(n.code,{children:"\\Coloneq"}),", ",(0,r.jsx)(n.code,{children:"\\Coloneqq"}),", ",(0,r.jsx)(n.code,{children:"\\eqcolon"})," and\n",(0,r.jsx)(n.code,{children:"\\Eqcolon"})," were mapped to incorrect symbols (some of them used obsolete\ndefinitions of those commands from the mathtools package that changed in the\nSummer of 2022). They are now correctly mapped to the corresponding symbols."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"#2576"})," The command ",(0,r.jsx)(n.code,{children:"\\perp"})," was mapped to the wrong symbol (U+22A5). It is\nnow mapped to the correct symbol (U+27C2)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Improved ASCIIMath serialization."}),"\n"]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01030-2024-12-10",children:["0.103.0 ",(0,r.jsx)(n.em,{children:"2024-12-10"})]}),(0,r.jsx)(n.h3,{id:"issues-resolved-4",children:"Issues Resolved"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2530"})," The AsciiMath ",(0,r.jsx)(n.code,{children:"1/2"})," is now parsed as ",(0,r.jsx)(n.code,{children:"\\frac{1}{2}"})]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"\\displaylines"})," command is now correctly parsed as a command with an\nargument, not as a group command."]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01020-2024-11-29",children:["0.102.0 ",(0,r.jsx)(n.em,{children:"2024-11-29"})]}),(0,r.jsx)(n.h3,{id:"issues-resolved-5",children:"Issues Resolved"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2550"})," The subpath exports in the main package.json have been updated to\ncomply with Node.js's subpath patterns, which utilize \"direct static matching\nand replacement."]}),"\n"]}),(0,r.jsx)(n.h3,{id:"improvements-2",children:"Improvements"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"#2554"})," ",(0,r.jsx)(n.strong,{children:"Option for sticky virtual keyboard variant panel"})]}),"\n",(0,r.jsx)(n.p,{children:"When long pressing a key on the virtual keyboard, a variant panel is displayed\nthat offers alternatives (variants) for that key. The panel is only displayed\nwhile your finger is pressing the key (like a smartphone keyboard). This new\noptions allows the variant panel to remain displayed even if you lift your\nfinger from the screen."}),"\n",(0,r.jsxs)(n.p,{children:["Add the ",(0,r.jsx)(n.code,{children:"stickyVariantPanel"})," property to a virtual keyboard keycap definition\nto make the variant panel sticky."]}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.code,{children:"./examples/sticky-variant-panel/"})," for an example."]}),"\n"]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01012-2024-11-15",children:["0.101.2 ",(0,r.jsx)(n.em,{children:"2024-11-15"})]}),(0,r.jsx)(n.h3,{id:"issues-resolved-6",children:"Issues Resolved"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Correctly display the caret following a ",(0,r.jsx)(n.code,{children:"\\mathop{}"})," command."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2540"})," When using ",(0,r.jsx)(n.code,{children:"renderMathInElement()"})," some white space was occasionally\nincorrectly removed."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2545"})," (?) Use ",(0,r.jsx)(n.code,{children:"\\rightarrow"})," instead of ",(0,r.jsx)(n.code,{children:"\\rarr"})," in the virtual keyboard."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2543"})," The ",(0,r.jsx)(n.code,{children:"MathfieldElement.fractionNavigationOrder"})," was not respected\nwhen navigating in a fraction with the arrow keys."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2251"})," Fixed the serialization of ",(0,r.jsx)(n.code,{children:"\\displaylines{}"})]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01011-2024-10-15",children:["0.101.1 ",(0,r.jsx)(n.em,{children:"2024-10-15"})]}),(0,r.jsx)(n.h3,{id:"issues-resolved-7",children:"Issues Resolved"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2533"})," When using the virtual keyboard to insert a character with a\nblackboard style followed by a non-alphabetic symbol without a blackboard\nstyle, the second symbol would incorrectly be serialized with a blackboard\nstyle."]}),"\n",(0,r.jsxs)(n.li,{children:["In some cases, the ",(0,r.jsx)(n.code,{children:"placeholder"})," attribute would not be displayed when the\nmathfield was empty."]}),"\n",(0,r.jsx)(n.li,{children:"When using static math, the font-familly for text content was not correctly\ninherited from the parent element."}),"\n",(0,r.jsx)(n.li,{children:'In some cases, the inherent style of a macro could get overriden. For example\ntyping the "RR" inline shortcut resulted in an unstyled R instead of the\nexpected blackboard R.'}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01010-2024-07-17",children:["0.101.0 ",(0,r.jsx)(n.em,{children:"2024-07-17"})]}),(0,r.jsx)(n.h3,{id:"breaking-changes-1",children:"Breaking Changes"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The properties ",(0,r.jsx)(n.code,{children:"mathVirtualKeyboard.actionKeycap"}),",\n",(0,r.jsx)(n.code,{children:"mathVirtualKeyboard.shiftKeycap"}),", ",(0,r.jsx)(n.code,{children:"mathVirtualKeyboard.backspaceKeycap"}),", and\n",(0,r.jsx)(n.code,{children:"mathVirtualKeyboard.tabKeycap"})," have been removed. Use the more general\n",(0,r.jsx)(n.code,{children:"mathVirtualKeyboard.setKeycap()"})," method to customize these keycaps, that is\n",(0,r.jsx)(n.code,{children:"mathVirtualKeyboard.setKeycap('[action]', {...})"})," etc..."]}),"\n"]}),(0,r.jsx)(n.h3,{id:"improvements-and-new-features",children:"Improvements and New Features"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Macros can now be specified with ",(0,r.jsx)(n.code,{children:"renderMathInElement()"})," and\n",(0,r.jsx)(n.code,{children:"renderMathInDocument()"})," using the ",(0,r.jsx)(n.code,{children:"macros"})," option. For example:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"renderMathInElement(element, {macros: {RR: '\\\\mathbb{R}'}})\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Performance improvements for pages with many mathfields. The initial rendering\ncan be up to 2x as fast."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Some keycaps in the virtual keyboard can be customized without having to\ndefine an entire virtual keyboard layout."}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"mathVirtualKeyboard.getKeycap()"})," give access to the definition of special\nkeycaps and ",(0,r.jsx)(n.code,{children:"mathVirtualKeyboard.setKeycap()"})," can be used to change that\ndefinition."]}),"\n",(0,r.jsx)(n.p,{children:"The keycaps are one of these special shortcuts:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[left]"}),", ",(0,r.jsx)(n.code,{children:"[right]"}),", ",(0,r.jsx)(n.code,{children:"[up]"}),", ",(0,r.jsx)(n.code,{children:"[down]"}),", ",(0,r.jsx)(n.code,{children:"[return]"}),", ",(0,r.jsx)(n.code,{children:"[action]"}),","]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[space]"}),", ",(0,r.jsx)(n.code,{children:"[tab]"}),", ",(0,r.jsx)(n.code,{children:"[backspace]"}),", ",(0,r.jsx)(n.code,{children:"[shift]"}),","]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[undo]"}),", ",(0,r.jsx)(n.code,{children:"[redo]"}),", ",(0,r.jsx)(n.code,{children:"[foreground-color]"}),", ",(0,r.jsx)(n.code,{children:"[background-color]"}),","]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[hide-keyboard]"}),","]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[.]"}),", ",(0,r.jsx)(n.code,{children:"[,]"}),","]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[0]"}),", ",(0,r.jsx)(n.code,{children:"[1]"}),", ",(0,r.jsx)(n.code,{children:"[2]"}),", ",(0,r.jsx)(n.code,{children:"[3]"}),", ",(0,r.jsx)(n.code,{children:"[4]"}),","]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[5]"}),", ",(0,r.jsx)(n.code,{children:"[6]"}),", ",(0,r.jsx)(n.code,{children:"[7]"}),", ",(0,r.jsx)(n.code,{children:"[8]"}),", ",(0,r.jsx)(n.code,{children:"[9]"}),","]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[+]"}),", ",(0,r.jsx)(n.code,{children:"[-]"}),", ",(0,r.jsx)(n.code,{children:"[*]"}),", ",(0,r.jsx)(n.code,{children:"[/]"}),", ",(0,r.jsx)(n.code,{children:"[^]"}),", ",(0,r.jsx)(n.code,{children:"[_]"}),", ",(0,r.jsx)(n.code,{children:"[=]"}),", ",(0,r.jsx)(n.code,{children:"[.]"}),","]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[(]"}),", ",(0,r.jsx)(n.code,{children:"[)]"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For example, to change the LaTeX inserted when the multiplication key is\npressed use:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"mathVirtualKeyboard.setKeycap('[*]', {latex: '\\\\times'});\n"})}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{id:"issues-resolved-8",children:"Issues Resolved"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2455"})," Serialization to ASCII Math of brackets and braces is now correct."]}),"\n",(0,r.jsxs)(n.li,{children:["When using Chrome in some locale (such as ",(0,r.jsx)(n.code,{children:"es-419"}),"), the context menu would\nnot be displayed."]}),"\n",(0,r.jsxs)(n.li,{children:["When the ",(0,r.jsx)(n.code,{children:"MathfieldElement.isFunction"})," handler is updated, re-render all the\nmathfields on the page to take it into account."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2415"})," A content change event is now dispatched when the value of the\nmathfield is changed as a result of switch from LaTeX mode to math mode by\nchanging the selection."]}),"\n",(0,r.jsxs)(n.li,{children:["Dispatch a ",(0,r.jsx)(n.code,{children:"contextmenu"})," event any time the context menu is about to be\ndisplayed. This allows the event to be canceled."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2413"})," When setting the ",(0,r.jsx)(n.code,{children:"alphabeticLayout"}),", the current keyboard would not\nbe updated in some cases."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2412"})," The serialization of some expressions to LaTeX could result in some\nspaces being omitted. For example, ",(0,r.jsx)(n.code,{children:"\\lnot p"})," would serialize as ",(0,r.jsx)(n.code,{children:"\\lnotp"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2403"})," The virtual keyboard Keycap Variants panel was positioned\nincorrectly when the page used a RTL layout direction."]}),"\n",(0,r.jsx)(n.li,{children:"In the virtual keyboard, the background of the variant panel was sometimes\ndisplayed transparently."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2402"})," Characters inserted after a ",(0,r.jsx)(n.code,{children:"\\mathbb{}"})," command were not styled\ncorrectly."]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"math-virtual-keyboard-command"})," event was not dispatched when a mathfield\nwas focused and a keycap was pressed."]}),"\n",(0,r.jsxs)(n.li,{children:["There are now CSS selectors to customize the size of glyphs in the virtual\nkeyboard (shift, enter, etc...):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"--keycap-glyph-size"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"--keycap-glyph-size-lg"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"--keycap-glyph-size-xl"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2397"})," When a ",(0,r.jsx)(n.code,{children:"beforeinput"})," event was canceled, the text would still be\ninserted when using the physical keyboard."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2398"})," When a placeholder was the only element in a group, i.e.\n",(0,r.jsx)(n.code,{children:"{\\placeholder{}}"}),", the placeholder was not automatically selected."]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"01000-2024-06-12",children:["0.100.0 ",(0,r.jsx)(n.em,{children:"2024-06-12"})]}),(0,r.jsx)(n.h3,{id:"issues-resolved-9",children:"Issues Resolved"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"#2396"})," Pressing the arrow keys in the virtual keyboard would not move the\nselection in the mathfield and display a runtime error in the console."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"#2392"})," Pressing the backspace key after typing several digits would delete\nall the digits."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"#2395"})," Added a ",(0,r.jsx)(n.code,{children:"dispatchEvent"})," command which can be attached to a custom\nkeycap."]}),"\n",(0,r.jsxs)(n.p,{children:["Its first argument is the name of the dispatched event, and the second\nargument is an object with the ",(0,r.jsx)(n.code,{children:"detail"})," property, which is the data associated\nwith the event."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"  {\n    label: \"\u2728\",\n    command: \"dispatchEvent('customEvent', {detail: 'some data'})\"\n  }\n"})}),"\n",(0,r.jsx)(n.p,{children:"To handle the event, add an event listener to the mathfield element:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"mf.addEventListener('customEvent', (ev) => {\n  console.log(ev.detail);\n});\n"})}),"\n"]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"0990-2024-06-10",children:["0.99.0 ",(0,r.jsx)(n.em,{children:"2024-06-10"})]}),(0,r.jsx)(n.h3,{id:"breaking-changes-2",children:"Breaking Changes"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"mf.offsetFromPoint()"})," method has been renamed ",(0,r.jsx)(n.code,{children:"mf.getOffsetFromPoint()"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"mf.setCaretPoint()"})," method has been replaced with\n",(0,r.jsx)(n.code,{children:"mf.position = mf.getOffsetFromPoint()"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"mf.scriptDepth()"})," and ",(0,r.jsx)(n.code,{children:"mf.hitboxFromOffset()"})," methodds have been replaced\nwith ",(0,r.jsx)(n.code,{children:"mf.getElementInfo()"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"getElementInfo()"})," method provides more information including any id that\nmay have been applied with ",(0,r.jsx)(n.code,{children:"\\htmlId{}"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["It is useful from within a ",(0,r.jsx)(n.code,{children:"click"})," handler to get more information about the\nelement that was clicked, e.g."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"  mf.getElementInfo(mf.getOffsetFromPoint(ev.clientX, ev.clientY))\n"})}),"\n",(0,r.jsx)(n.p,{children:"The info returned is an object with the following properties:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export type ElementInfo = {\n  /** The depth in the expression tree. 0 for top-level elements */\n  depth?: number;\n\n  /** The bounding box of the element */\n  bounds?: DOMRect;\n\n  /** id associated with this element or its ancestor, set with `\\htmlId` or\n     `\\cssId`\n  */\n  id?: string;\n\n  /** HTML attributes associated with element or its ancestores, set with\n   * `\\htmlData`\n   */\n  data?: Record<string, string | undefined>;\n\n  /** The mode (math, text or LaTeX) */\n  mode?: ParseMode;\n\n  /** A LaTeX representation of the element */\n  latex?: string;\n\n  /** The style (color, weight, variant, etc...) of this element. */\n  style?: Style;\n};\n"})}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{id:"bold",children:"Bold"}),(0,r.jsx)(n.p,{children:"The way bold is handled in LaTeX is particularly confusing, reflecting\nlimitations of the text rendering technology of the time."}),(0,r.jsx)(n.p,{children:"Various attempts have been made over the years to improve the rendering of bold,\nbut this has resulted in inconsistent behavior. Furthermore, various\nimplementations of LaTeX and LaTeX-like systems have implemented bold in\ndifferent ways."}),(0,r.jsx)(n.p,{children:"This release introduces a more consistent and intuitive handling of bold,\nalthough it may result in different rendering of some formulas compared to some\nimplementations of LaTeX."}),(0,r.jsxs)(n.p,{children:["The original bold command in LaTeX is ",(0,r.jsx)(n.code,{children:"\\mathbf"}),". This command renders its\nargument using a bold variant of the current font. However, only letters and\nnumbers can be rendered by this command. It does not affect symbols, operators,\nor greek characters."]}),(0,r.jsxs)(n.p,{children:["For example, ",(0,r.jsx)(n.code,{children:"\\mathbf{a+b}"})," will render as ",(0,r.jsx)(n.code,{children:"\ud835\udc1a+\ud835\udc1b"}),", with the ",(0,r.jsx)(n.code,{children:"a"})," and ",(0,r.jsx)(n.code,{children:"b"})," in bold,\nbut the ",(0,r.jsx)(n.code,{children:"+"})," in normal weight. Characters rendered by ",(0,r.jsx)(n.code,{children:"\\mathbf"})," are rendered\nupright, even if they would have been rendered as italic otherwise."]}),(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"\\boldsymbol"})," command is an alternative to ",(0,r.jsx)(n.code,{children:"\\mathbf"})," that affects more\ncharacters, including Greek letters and symbols. It does not affect the style of\nthe characters, so they remain italic if they were italic before. However, the\ninter-character spacing and italic correction may not be rendered correctly."]}),(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"\\bm"})," command from the ",(0,r.jsx)(n.code,{children:"bm"})," package is a more modern alternative that\naffects even more characters. It also preserves the style of the characters, so\nthey remain italic if they were italic before. The inter-character spacing and\nitalic correction are handled correctly."]}),(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"\\bm"})," command is recommended over ",(0,r.jsx)(n.code,{children:"\\boldsymbol"})," and ",(0,r.jsx)(n.code,{children:"\\mathbf"}),". However, it\nis not part of the standard LaTeX distribution, so it may not always be\navailable."]}),(0,r.jsxs)(n.p,{children:["When serializing to LaTeX, MathLive will now use ",(0,r.jsx)(n.code,{children:"\\mathbf"})," when possible, and\nfall back to ",(0,r.jsx)(n.code,{children:"\\bm"})," when not. This should result in more consistent rendering of\nbold text."]}),(0,r.jsxs)(n.p,{children:["When parsing, MathLive will interpret both ",(0,r.jsx)(n.code,{children:"\\mathbf"}),", ",(0,r.jsx)(n.code,{children:"\\boldsymbol"})," and ",(0,r.jsx)(n.code,{children:"\\bm"})," as\nbold."]}),(0,r.jsx)(n.p,{children:"The bold style is now consistently inherited by sub-expressions."}),(0,r.jsxs)(n.p,{children:["Similarly, when applying a bold style using ",(0,r.jsx)(n.code,{children:'mf.applyStyle({weight: "bold"})'}),",\nthe bold attribute is applied to the entire selection, not just the letters and\nnumbers."]}),(0,r.jsx)(n.h3,{id:"mode-switching",children:"Mode Switching"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2375"})," The ",(0,r.jsx)(n.code,{children:"switch-mode"})," command has two optionals arguments, a prefix and\nsuffix. The prefix is inserted before the mode switch, and the suffix after.\nThe command was behaving incorrectly. It now behaves as expected."]}),"\n",(0,r.jsxs)(n.li,{children:["It is now possible to roundtrip between math and text mode. For example,\nselecting a fraction ",(0,r.jsx)(n.code,{children:"\\frac{a}{b}"})," and pressing ",(0,r.jsx)(n.code,{children:"alt+shift+T"})," will convert the\nselection to ",(0,r.jsx)(n.code,{children:"(a)/(b)"}),". Pressing ",(0,r.jsx)(n.code,{children:"alt+shift+T"})," again will convert it back to\n",(0,r.jsx)(n.code,{children:"\\frac{a}{b}"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"When in LaTeX mode, changing the selection would sometimes unexpectedly exit\nLaTeX mode, for example after the Select All command. This has been fixed."}),"\n"]}),(0,r.jsx)(n.h3,{id:"new-features-4",children:"New Features"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"\\href"})})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"\\href{url}{content}"})," command, a MathJax extension that allows a link to\nbe associated with some content, is now supported."]}),"\n",(0,r.jsxs)(n.p,{children:["Clicking on the content will open the link. By default, the link is opened in\na new window, and only links with a HTTP, HTTPS or FILE protocol are allowed.\nThis can be controlled by the new ",(0,r.jsx)(n.code,{children:"MathfieldElement.openUrl"})," property. This\nproperty is a function with a single argument, the URL to be opened, that is\ncalled when the content of the ",(0,r.jsx)(n.code,{children:"\\href"})," command is clicked on."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Tooltip appearance"})}),"\n",(0,r.jsxs)(n.p,{children:["Added CSS variables to control the appearance of the toolip displayed with\n",(0,r.jsx)(n.code,{children:"\\mathtip"})," and ",(0,r.jsx)(n.code,{children:"\\texttip"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"--tooltip-border"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"--tooltip-color"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"--tooltip-background-color"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"--tooltip-box-shadow"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--tooltip-border-radius"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"maxMatrixCols"})," property has been added that specifies the maximum number\nof columns that a matrix may have. The default value is 10, which follows the\ndefault value from the amsmath package. The property applies to all of the\nmatrix environments (",(0,r.jsx)(n.code,{children:"matrix"}),", ",(0,r.jsx)(n.code,{children:"pmatrix"}),", ",(0,r.jsx)(n.code,{children:"bmatrix"}),", etc.). This property is\nalso accessible via the ",(0,r.jsx)(n.code,{children:"max-matrix-cols"})," attribute."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The virtual keyboard now supports variants for shifted-keys. This includes\nsupport for Swedish specific characters such as ",(0,r.jsx)(n.code,{children:"\xe5"}),", ",(0,r.jsx)(n.code,{children:"\xe4"}),", and ",(0,r.jsx)(n.code,{children:"\xf6"})," and their\nuppercase variants."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Accept ",(0,r.jsx)(n.code,{children:'"true"'})," and ",(0,r.jsx)(n.code,{children:'"false"'})," as values for on/off attributes in the\n",(0,r.jsx)(n.code,{children:"<math-field>"})," element, for example ",(0,r.jsx)(n.code,{children:'<math-field smart-fence="true">'}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Added a ",(0,r.jsx)(n.code,{children:"target"})," property (a ",(0,r.jsx)(n.code,{children:"MathfieldElement"}),") to the ",(0,r.jsx)(n.code,{children:"onMenuSelect"}),"\narguments."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"#2337"})," Added an option ",(0,r.jsx)(n.code,{children:"MathfieldElement.restoreFocusWhenDocumentFocused"}),"\nto control whether a mathfield that was previously focused regains focus when\nthe tab or window regains focus. This is true by default and matches the\nprevious behavior, and the behavior of the ",(0,r.jsx)(n.code,{children:"<textarea>"})," element."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["An alternate syntax for selectors with arguments. Selectors are used for\nexample to associate actions with a keycap, such as ",(0,r.jsx)(n.code,{children:"switchKeyboardLayer"}),". The\nprevious syntax was ",(0,r.jsx)(n.code,{children:'command: ["switchKeyboardLayer", "alt-layer"]'}),", the new\nsyntax is ",(0,r.jsx)(n.code,{children:"command: 'switchKeyboardLayer(\"alt-layer\")'"}),". This is more concise\nand easier to read."]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{id:"issues-resolved-10",children:"Issues Resolved"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2387"})," When using a macro, the spacing around the macro was incorrect in\nsome cases."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2370"})," The order of the ",(0,r.jsx)(n.code,{children:"keydown"})," and ",(0,r.jsx)(n.code,{children:"input"})," event is now consistent with\nthe ",(0,r.jsx)(n.code,{children:"<textarea>"})," element."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2369"})," After typing a shortcut, using the backspace key could result in\nunexpected behavior. Now, pressing the backspace key after a shortcut has been\ntyped will undo the conversion of the shortcut."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2380"})," In some cases, when using the menu, some spurious focus/blur events\nwould be dispatched."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2384"})," When using repeating decimals after a comma (i.e. ",(0,r.jsx)(n.code,{children:"123{,}4(1)"}),"), do\nnot use a ",(0,r.jsx)(n.code,{children:"\\left...\\right"})," command in order to get the proper spacing."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2349"})," The positioning of subscripts for extensible symbols, such as ",(0,r.jsx)(n.code,{children:"\\int"}),"\nwas incorrect."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2326"})," The Cut and Copy commands in the context menu are now working\ncorrectly in Safari."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2309"})," When using styled text (e.g. ",(0,r.jsx)(n.code,{children:"\\textit{}"}),"), the content could\nsometimes be serialized with an unnecessary ",(0,r.jsx)(n.code,{children:"\\text{}"})," command, i.e.\n",(0,r.jsx)(n.code,{children:"\\text{\\textit{...}}"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2376"})," When ",(0,r.jsx)(n.code,{children:"smart-fence"})," was off, the ",(0,r.jsx)(n.code,{children:"{"})," and ",(0,r.jsx)(n.code,{children:"}"})," keys would not insert\nbraces."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2273"})," Using one of the Chinese locales would result in a runtime error."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2355"})," When pressing the down arrow key in ",(0,r.jsx)(n.code,{children:"\\sqrt[#?]{1}"})," from the ",(0,r.jsx)(n.code,{children:"#?"}),"\nposition, a runtime exception would occur."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2298"})," When using screen readers, pressing the spacebar would not always\ncorrectly focus the mathfield."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2297"})," In some cases, when using touch input, the previously selected item\nin a context menu would appear to be selected."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2289"})," When changing the value of the mathfield, the selection is now\npreserved. In addition, when using a controlled component with React an\nunnecessary update is avoided."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2282"})," Don't display selection when the mathfield is not focused"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2280"})," Handle better very deeply nested expressions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2261"})," When a style was applied to an empty range, the style was ignored."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2208"})," When setting a variant style (i.e. blackboard, fraktur, etc...) the\nstyle is no longer adopted by subsequent characters."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2104"}),", ",(0,r.jsx)(n.strong,{children:"#2260"})," When replacing the selection by typing, the new content\nwould not always be correctly styled. The content now inherits the style of\nthe selection, or the style of the insertion point if the selection is\ncollapsed."]}),"\n",(0,r.jsx)(n.li,{children:"Better handle the case where the mathlive library gets loaded before the DOM\nis constructed."}),"\n",(0,r.jsx)(n.li,{children:"On Safari, the Insert Matrix submenu was displayed incorrectly."}),"\n",(0,r.jsxs)(n.li,{children:["When the mathfield is an iframe, the ",(0,r.jsx)(n.code,{children:"before-virtual-keyboard-toggle"})," and\n",(0,r.jsx)(n.code,{children:"virtual-keyboard-toggle"})," events are now dispatched on the\n",(0,r.jsx)(n.code,{children:"window.mathVirtualKeyboard"})," object of the iframe. This can be used to detect\na request (and prevent) for the virtual keyboard to be displayed."]}),"\n",(0,r.jsxs)(n.li,{children:["If the unknown in an expression was a complex identifier, such as\n",(0,r.jsx)(n.code,{children:"\\mathcal{C}"}),' it would not be displayed correctly in the "Solve for" menu.']}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"\\mathrlap"})," command was incorrectly rendering like ",(0,r.jsx)(n.code,{children:"\\mathllap"}),"."]}),"\n"]}),(0,r.jsxs)(n.h2,{id:"0986-2024-01-27",children:["0.98.6 ",(0,r.jsx)(n.em,{children:"2024-01-27"})]}),(0,r.jsx)(n.h3,{id:"new-features-5",children:"New Features"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Added ",(0,r.jsx)(n.code,{children:"StaticRenderOptions.TeX.className"})," to specify that an element with the\nspecified class name should be rendered as a LaTeX formula."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2273"})," Added a ",(0,r.jsx)(n.code,{children:"--keycap-width"})," CSS variable to specify the width of a\nkeycap in a virtual-keyboard. By default, if the CSS variable is not\nspecified, the width of the keycap is calculated based on the width of the\nparent container. However, this requires browser that support the ",(0,r.jsx)(n.code,{children:"cq"})," CSS\nunit. If the browser does not support the ",(0,r.jsx)(n.code,{children:"cq"})," CSS unit, this CSS variable can\nbe used to specify the width of the keycap. (See ",(0,r.jsx)(n.strong,{children:"#2028"}),", ",(0,r.jsx)(n.strong,{children:"#2133"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2255"})," Support for ",(0,r.jsx)(n.code,{children:"gather*"})," environment"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2242"})," A virtual keyboard keycap can now include a tooltip for its shifted\nvariant."]}),"\n"]}),(0,r.jsx)(n.h3,{id:"issues-resolved-11",children:"Issues Resolved"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["When using some APIs such as ",(0,r.jsx)(n.code,{children:"renderToMarkup()"})," or ",(0,r.jsx)(n.code,{children:"renderToMathML()"})," in a\nserver-side environment, a runtime error would occur."]}),"\n",(0,r.jsx)(n.li,{children:"When tabbing in a mathfield with multiple prompts, tab out of the mathfield\nwhen the last or first prompt is reached."}),"\n",(0,r.jsxs)(n.li,{children:["**#2243##, **#2245** Unicode characters such as ",(0,r.jsx)(n.code,{children:"\xb2"})," or ",(0,r.jsx)(n.code,{children:"\u2102"})," are now\ninterpreted as their LaTeX equivalent only when in math mode."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2237"})," The command ",(0,r.jsx)(n.code,{children:"\\iff"})," now renders correctly"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2246"})," Changing the ",(0,r.jsx)(n.code,{children:"mf.value"})," property would not always update the value\nof the mathfield."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2244"})," Worked around an issue in Safari on iOS where doing a double-tap on\nthe virtual keyboard would result in the mathfield losing focus and the\nvirtualy keyboard closing."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2252"})," At some viewport sizes, the integral sign in the symbols virtual\nkeyboard would be clipped."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2235"})," Improved serialization to ASCIIMath."]}),"\n",(0,r.jsx)(n.li,{children:"Avoid conflicts with some class names when rendering static math."}),"\n",(0,r.jsxs)(n.li,{children:["When using ",(0,r.jsx)(n.code,{children:"renderMathToElement()"})," or ",(0,r.jsx)(n.code,{children:"renderMathInDocument()"}),", coalesce\nadjacent text nodes."]}),"\n",(0,r.jsxs)(n.li,{children:["Correctly parse the ",(0,r.jsx)(n.code,{children:"\\cfrac"})," optional alignment argument"]}),"\n",(0,r.jsxs)(n.li,{children:["The commands ",(0,r.jsx)(n.code,{children:"\\bf"}),", ",(0,r.jsx)(n.code,{children:"\\bfseries"}),", ",(0,r.jsx)(n.code,{children:"\\mdseries"}),", ",(0,r.jsx)(n.code,{children:"\\upshape"}),", ",(0,r.jsx)(n.code,{children:"\\itshape"}),",\n",(0,r.jsx)(n.code,{children:"\\slshape"}),", ",(0,r.jsx)(n.code,{children:"\\scshape"}),", ",(0,r.jsx)(n.code,{children:"\\rmfamily"}),", ",(0,r.jsx)(n.code,{children:"\\sffamily"}),", ",(0,r.jsx)(n.code,{children:"\\ttfamily"})," are now\ninterpreted correctly."]}),"\n",(0,r.jsxs)(n.li,{children:["The command ",(0,r.jsx)(n.code,{children:"\\operatorname"})," is now spoken correctly"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"#2152"})," On Safari, fill-in-the-blank prompts containing a fraction were\nrendered incorrectly."]}),"\n"]})]})]})}function x(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);