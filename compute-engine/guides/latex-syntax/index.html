<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">




<title>
    CortexJS
</title>
<meta name="description" content="" />
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ECEC8YT7XS"></script>
<script async>
  if(/cortexjs\.io/.test(window.location.hostname)) {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ECEC8YT7XS');
  }
</script>


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="CortexJS Feed">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="strict-origin" />


<link rel="icon" href="data:," />

<script>
  document.documentElement.classList.remove("no-js");
  document.documentElement.classList.add("js");
</script>





  
    
      
    
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.11/codemirror.min.js" crossorigin="anonymous"></script>
  
    
      
    
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.11/mode/javascript/javascript.min.js" crossorigin="anonymous"></script>
  
    
      
    
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.11/mode/xml/xml.min.js" crossorigin="anonymous"></script>
  





<link rel="stylesheet" href="/assets/css/main.css" crossorigin>

  
    
      
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.11/codemirror.min.css" crossorigin>
  









    <link rel="preconnect" href="https://kit.fontawesome.com" crossorigin>
<script defer src="https://kit.fontawesome.com/523e3eb8bb.js" crossorigin="anonymous"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>


<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&family=Source+Sans+Pro:ital,wght@0,200;0,400;0,600;0,700;0,900;1,200;1,400;1,600;1,700&subset=latin" rel="stylesheet" crossorigin>
 



<!-- 
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;400;600;700;900&family=JetBrains+Mono:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap" rel="stylesheet" crossorigin> -->
  </head>

  <body class="layout--single">
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
      <defs>
          <symbol id=svg-chevron aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14"><path fill="currentColor" d="m4.81347656 13.1269531c.22558594 0 .41015625-.0820312.56738282-.2324219l5.31835942-5.19531245c.1845703-.19140625.2802734-.38964844.2802734-.63574219 0-.23925781-.0888672-.45117187-.2802734-.62890625l-5.31835942-5.20214843c-.15722657-.15039063-.34179688-.23242188-.56738282-.23242188-.45800781 0-.81347656.35546875-.81347656.80664062 0 .21875.09570312.43066407.24609375.58789063l4.79199219 4.67578125-4.79199219 4.6621094c-.15722656.1640625-.24609375.3623047-.24609375.5878906 0 .4511719.35546875.8066406.81347656.8066406z"></path></symbol>
      </defs>
    </svg>
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    
  




<div class="masthead ">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <input id="site-toc" name="site-toc" type="checkbox" />
        <label for="site-toc"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="bars" class="svg-inline--fa fa-bars fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></label>
        
        <a class="site-title" href="/">
          Cortex<em>JS</em>
          
        </a>
        <ul class="visible-links">
              
              <li class="masthead__menu-item ">
                <a href="/mathlive/" >MathLive</a>
              </li>
              
              <li class="masthead__menu-item active">
                <a href="/compute-engine/" >Compute Engine</a>
              </li>
              
              <li class="masthead__menu-item ">
                <a href="/cortex/" >Cortex</a>
              </li>
              
              <li class="masthead__menu-item ">
                <a href="/gitter/" ><svg class='icon1quarterem' role='img'><title>Gitter Forum</title><use xlink:href='/assets/icons.svg#gitter'></use></svg></a>
              </li>
              
              <li class="masthead__menu-item ">
                <a href="https://github.com/cortex-js" ><svg class='icon1quarterem' role='img'><title>GitHub</title><use xlink:href='/assets/icons.svg#github'></use></svg></a>
              </li></ul>
        
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">




<div id="main" role="main">
  
  <div class="sidebar sticky">
    
      
      
      

      <nav class="nav__list">
  
  <input
    id=ac-toc
    name=accordion-toc
    type=checkbox />
  <label for=ac-toc>Table of Content<svg
      aria-hidden=true
      focusable=false
      role="img"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 448 512"><path fill=currentColor d="M432.6 209.3l-191.1 183.1C235.1 397.8 229.1 400 224 400s-11.97-2.219-16.59-6.688L15.41 209.3C5.814 200.2 5.502 184.1 14.69 175.4c9.125-9.625 24.38-9.938 33.91-.7187L224 342.8l175.4-168c9.5-9.219 24.78-8.906 33.91 .7187C442.5 184.1 442.2 200.2 432.6 209.3z" /></svg>
  </label>

  <ul class="nav__items">
    
      <li class="nav__section">
        
          <button class="nav__sub-title nav__sub-title_toggle">MathLive
            
              <span class="nav__sub-title_expand"><svg class="icon1em"><use xlink:href="/assets/icons.svg#plus"></use></svg></span>
              <span class="nav__sub-title_collapse"><svg class="icon1em"><use xlink:href="/assets/icons.svg#minus"></use></svg></span>
            
          </button>
        


        
          <ul>
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#intro"></use>
                      </svg>
                    
                    Introduction
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/demo/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#flask"></use>
                      </svg>
                    
                    Demo
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/virtual-keyboard/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Using the Virtual Keyboard
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/reference/commands/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    LaTeX Commands
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/reference/keybindings/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Keyboard Shortcuts
                  </a>
                </li>
              
            
              
              
                <li class="separator"></li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/changelog/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#log"></use>
                      </svg>
                    
                    Changelog
                  </a>
                </li>
              
            
              
              
                <li class="separator"></li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/getting-started/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#checklist"></use>
                      </svg>
                    
                    Getting Started
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/integration/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Add MathLive to your Project
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/react/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Using MathLive with React
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/interacting/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Interact
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/fill-in-the-blank/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Fill-in-the-Blank
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/customizing/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Customize the Mathfield
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/commands/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Commands
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/macros/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Macros
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/shortcuts/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Shortcuts
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/speech/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Speech
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/static/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Display Static Math
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/virtual-keyboards/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Customize the Virtual Keyboard
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/guides/lifecycle/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Lifecycle
                  </a>
                </li>
              
            
              
              
                <li class="separator"></li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/docs/mathlive/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#sdk"></use>
                      </svg>
                    
                    SDK Reference
                  </a>
                </li>
              
            
              
              
                <li class="separator"></li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/mathlive/editor"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#flask"></use>
                      </svg>
                    
                    Editor
                  </a>
                </li>
              
            
          </ul>
        
      </li>
    
      <li class="nav__section">
        
          <button class="nav__sub-title nav__sub-title_toggle">Compute Engine
            
              <span class="nav__sub-title_expand"><svg class="icon1em"><use xlink:href="/assets/icons.svg#plus"></use></svg></span>
              <span class="nav__sub-title_collapse"><svg class="icon1em"><use xlink:href="/assets/icons.svg#minus"></use></svg></span>
            
          </button>
        


        
          <ul>
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#intro"></use>
                      </svg>
                    
                    Introduction
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/demo/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#flask"></use>
                      </svg>
                    
                    Demo
                  </a>
                </li>
              
            
              
              
                <li class="separator"></li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/changelog/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#log"></use>
                      </svg>
                    
                    Changelog
                  </a>
                </li>
              
            
              
              
                <li class="separator"></li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/expressions/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Expressions
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/symbols/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Symbols
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/canonical-form/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Canonical Form
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/augmenting/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Adding New Definitions
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/latex-syntax/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="active">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    LaTeX Syntax
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/domains/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Domains
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/symbolic-computing/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Symbolic Computing
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/evaluate/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Evaluation
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/simplify/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Simplify
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/numeric-evaluation/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Numeric Evaluation
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/assumptions/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Assumptions
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/patterns-and-rules/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Patterns and Rules
                  </a>
                </li>
              
            
              
              
                <li class="separator"></li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/docs/compute-engine/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#sdk"></use>
                      </svg>
                    
                    SDK Reference
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/math-json/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    The MathJSON Format
                  </a>
                </li>
              
            
              
              
                <li class="separator"></li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/guides/standard-library/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#intro"></use>
                      </svg>
                    
                    Standard Library
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/reference/arithmetic/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Arithmetic
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/reference/calculus/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Calculus
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/reference/collections/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Collections
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/reference/control-structures/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Control Structures
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/reference/core/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Core
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/reference/domains/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Domains
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/reference/functions/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Functions
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/reference/logic/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Logic
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/reference/sets/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Sets
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/reference/special-functions/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Special Functions
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/reference/styling/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Styling
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/reference/trigonometry/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Trigonometry
                  </a>
                </li>
              
            
              
              
                <li class="separator"></li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/compute-engine/contributing/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#seedling"></use>
                      </svg>
                    
                    Contributing
                  </a>
                </li>
              
            
          </ul>
        
      </li>
    
      <li class="nav__section">
        
          <button class="nav__sub-title nav__sub-title_toggle">Cortex
            
              <span class="nav__sub-title_expand"><svg class="icon1em"><use xlink:href="/assets/icons.svg#plus"></use></svg></span>
              <span class="nav__sub-title_collapse"><svg class="icon1em"><use xlink:href="/assets/icons.svg#minus"></use></svg></span>
            
          </button>
        


        
          <ul>
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/cortex/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#intro"></use>
                      </svg>
                    
                    Introduction
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/cortex/goals/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#intro"></use>
                      </svg>
                    
                    Goals
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/cortex/principles/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#intro"></use>
                      </svg>
                    
                    Principles
                  </a>
                </li>
              
            
              
              
                <li class="separator"></li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/cortex/source-code/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Source Code
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/cortex/comments/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Comments
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/cortex/literals/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Literals
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/cortex/naming/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Naming
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/cortex/operators/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Operators
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/cortex/pragmas/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Pragmas
                  </a>
                </li>
              
            
              
              
                <li class="separator"></li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/cortex/syntax/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#reference"></use>
                      </svg>
                    
                    Syntax
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/cortex/implementation/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#guide"></use>
                      </svg>
                    
                    Implementation
                  </a>
                </li>
              
            
          </ul>
        
      </li>
    
      <li class="nav__section">
        
          <button class="nav__sub-title nav__sub-title_toggle">Additional Resources
            
              <span class="nav__sub-title_expand"><svg class="icon1em"><use xlink:href="/assets/icons.svg#plus"></use></svg></span>
              <span class="nav__sub-title_collapse"><svg class="icon1em"><use xlink:href="/assets/icons.svg#minus"></use></svg></span>
            
          </button>
        


        
          <ul>
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/about/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#person"></use>
                      </svg>
                    
                    About Us
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/gitter/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#gitter"></use>
                      </svg>
                    
                    Discuss in Gitter Forum
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/docs/reporting-issues/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#bug"></use>
                      </svg>
                    
                    Reporting Issues
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/docs/contributing-code/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#code-branch"></use>
                      </svg>
                    
                    Contributing Code
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/support/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#seedling"></use>
                      </svg>
                    
                    Support the Project
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/docs/code-of-conduct/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#handshake"></use>
                      </svg>
                    
                    Code of Conduct
                  </a>
                </li>
              
            
              
              
                
                  
                

                
                
                  
                

                <li>
                  <a
                    href="/docs/license/"
                    data-url=/compute-engine/guides/latex-syntax/
                    class="">
                    
                      <svg class="nav__icon">
                        <use xlink:href="/assets/icons.svg#handshake"></use>
                      </svg>
                    
                    License
                  </a>
                </li>
              
            
          </ul>
        
      </li>
    
  </ul>
</nav>

<script>
  (function() {
    function findSection(el) {
      while (el && ! el.classList.contains('nav__section')) 
        el = el.parentElement;
      

      return el;
    }

// window.addEventListener('DOMContentLoaded', (event) => {
    const sidebar = document.querySelector('.sidebar');

    const activeItem = sidebar.querySelector('.nav__items a.active');
    if (activeItem) {
      const section = findSection(activeItem);
      if (section) 
        section.classList.add('active');
      


      sidebar.scrollTo(0, activeItem.offsetTop - sidebar.clientHeight + 100)
    }

    for (const el of[... sidebar.getElementsByClassName('nav__sub-title_toggle') ?? []]) 
      el.addEventListener('click', (ev) => {
        const section = findSection(ev.target);
        if (section) {
          if (section.classList.contains('active')) 
            section.classList.remove('active')
           else 
            section.classList.add('active');
          

        }
      })


    


// });
  })();
</script>
    
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">

    <div class="page__inner-wrap">
    
    
      <section class="page__content" itemprop="text">

  
    <h1>Parsing and Serializing LaTeX</h1><p class="xl">The CortexJS Compute Engine manipulates MathJSON expressions. It can also convert LaTeX strings to MathJSON expressions (<b>parsing</b>) and output MathJSON expressions as LaTeX string (<b>serializing</b>)</p>
  

  

    <nav class="toc">
      <header><h2 class="nav__title"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" style="height:16px; width:12px"><path fill="currentColor" d="M256 0v128h128L256 0zM224 128L224 0H48C21.49 0 0 21.49 0 48v416C0 490.5 21.49 512 48 512h288c26.51 0 48-21.49 48-48V160h-127.1C238.3 160 224 145.7 224 128zM272 416h-160C103.2 416 96 408.8 96 400C96 391.2 103.2 384 112 384h160c8.836 0 16 7.162 16 16C288 408.8 280.8 416 272 416zM272 352h-160C103.2 352 96 344.8 96 336C96 327.2 103.2 320 112 320h160c8.836 0 16 7.162 16 16C288 344.8 280.8 352 272 352zM288 272C288 280.8 280.8 288 272 288h-160C103.2 288 96 280.8 96 272C96 263.2 103.2 256 112 256h160C280.8 256 288 263.2 288 272z"/></svg>On This Page</h2></header>

      
        <div class="toc__menu" >
        <ol><li><a href="#the-compute-engine-natural-parser">The Compute Engine Natural Parser</a></li><li><a href="#serializing-to-latex">Serializing to LaTeX</a></li><li><a href="#customizing-parsing-and-serialization">Customizing Parsing and Serialization</a><ol><li><a href="#customizing-the-decimal-marker">Customizing the Decimal Marker</a></li><li><a href="#customizing-the-number-formatting">Customizing the Number Formatting</a></li></ol></li><li><a href="#customizing-the-serialization-style">Customizing the Serialization Style</a><ol><li><a href="#function-application">Function Application</a></li><li><a href="#group">Group</a></li><li><a href="#root">Root</a></li><li><a href="#fraction">Fraction</a></li><li><a href="#logic">Logic</a></li><li><a href="#power">Power</a></li><li><a href="#numeric-sets">Numeric Sets</a></li></ol></li><li><a href="#customizing-the-latex-dictionary">Customizing the LaTeX Dictionary</a><ol><li><a href="#latex-dictionary-entries">LaTeX Dictionary Entries</a></li><li><a href="#parsing">Parsing</a></li><li><a href="#serializing">Serializing</a></li></ol></li><li><a href="#using-a-new-function-with-a-mathfield">Using a New Function with a Mathfield</a></li></ol>
      </div>
      
                              
    </nav>
  



<p class="notice--info">In this documentation, functions such as <code>ce.box()</code> and <code>ce.parse()</code> require a
<code>ComputeEngine</code> instance which is denoted by a <code>ce.</code> prefix.<br>Functions that
apply to a boxed expression, such as <code>expr.simplify()</code> are denoted with a
<code>expr.</code> prefix.</p>
<p><strong>To parse a LaTeX string as a MathJSON expression</strong>, call the <code>ce.parse()</code>
function.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> ce = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputeEngine</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ce.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&#x27;5x + 1&#x27;</span>).<span class="hljs-property">json</span>);
<span class="hljs-comment">//   [&quot;Add&quot;, [&quot;Multiply&quot;, 5, &quot;x&quot;], 1]</span>
</code></pre>
<p>By default, <code>ce.parse()</code> return a
<a href="/compute-engine/guides/canonical-form/">canonical expression</a>. To get a
non-canonical expression instead, use the <code>{canonical: false}</code> option: The
non-canonical form is closer to the literal LaTeX input.</p>
<pre><code class="language-js">ce.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&#x27;\\frac{7}{-4}&#x27;</span>).<span class="hljs-property">json</span>;
<span class="hljs-comment">//   [&quot;Rational&quot;, -7, 4]</span>

ce.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&#x27;\\frac{7}{-4}&#x27;</span>, { <span class="hljs-attr">canonical</span>: <span class="hljs-literal">false</span> }).<span class="hljs-property">json</span>;
<span class="hljs-comment">//   [&quot;Divide&quot;, 7, -4]</span>
</code></pre>
<hr>
<p><strong>To input math using an interactive mathfield</strong>, use <a href="/mathlive/">MathLive</a>.</p>
<p>A MathLive <code>&lt;math-field&gt;</code> DOM element works like a <code>&lt;textarea&gt;</code> in HTML, but for
math. It provides its content as a LaTeX string or a MathJSON expression, ready
to be used with the Compute Engine.</p>
<div class='read-more'><a href="/mathlive/"> Read more about the MathLive <strong>mathfield
element</strong> <svg class="svg-chevron"><use xlink:href="#svg-chevron"></use></svg></a></div>
<h2 id="the-compute-engine-natural-parser" tabindex="-1">The Compute Engine Natural Parser</h2>
<p>Unlike a programming language, mathematical notation is surprisingly ambiguous
and full of idiosyncrasies. Mathematicians frequently invent new notations, or
have their own preferences to represent even common concepts.</p>
<p>The Compute Engine Natural Parser interprets expressions using the notation you
are already familiar with. Write as you would on a blackboard, and get back a
semantic representation as an expression ready to be processed.</p>
<table>
<thead>
<tr>
<th style="text-align:left">LaTeX</th>
<th style="text-align:left">MathJSON</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><big>$$ \sin 3t + \cos 2t $$ </big><code>\sin 3t + \cos 2t</code></td>
<td style="text-align:left"><code>[&quot;Add&quot;, [&quot;Sin&quot;, [&quot;Multiply&quot;, 3, &quot;t&quot;]], [&quot;Cos&quot;, [&quot;Multiply&quot;, 2, &quot;t&quot;]]]</code></td>
</tr>
<tr>
<td style="text-align:left"><big>$$ \int \frac{dx}{x} $$ </big><code>\int \frac{dx}{x}</code></td>
<td style="text-align:left"><code>[&quot;Integrate&quot;, [&quot;Divide&quot;, 1, &quot;x&quot;], &quot;x&quot;]</code></td>
</tr>
<tr>
<td style="text-align:left"><big>$$ 123.4(567) $$ </big><code>123.4(567)</code></td>
<td style="text-align:left"><code>123.4(567)</code></td>
</tr>
<tr>
<td style="text-align:left"><big>$$ 123.4\overline{567} $$ </big><code>123.4\overline{567}</code></td>
<td style="text-align:left"><code>123.4(567)</code></td>
</tr>
<tr>
<td style="text-align:left"><big>$$ |a+|b|+c| $$ </big><code>                          | a+                                                                      | b   | +c  |</code></td>
<td style="text-align:left"><code>[&quot;Abs&quot;, [&quot;Add&quot;, &quot;a&quot;, [&quot;Abs&quot;, &quot;b&quot;], &quot;c&quot;]]</code></td>
</tr>
<tr>
<td style="text-align:left"><big>$$ ||a||+|b| $$ </big><code>                        |                                                                         | a   |     | +   | b                                          |</code></td>
<td style="text-align:left"><code>[&quot;Add&quot;, [&quot;Norm&quot;, &quot;a&quot;], [&quot;Abs&quot;, &quot;b&quot;]]</code></td>
</tr>
</tbody>
</table>
<p>The Compute Engine Natural Parser will apply maximum effort to parse the input
string as LaTeX, even if it includes errors. If errors are encountered, the
resulting expression will have its <code>expr.isValid</code> property set to <code>false</code>. An
<code>[&quot;Error&quot;]</code> expression will be produced where a problem was encountered. To get
the list of all the errors in an expression, use <code>expr.errors</code> which will return
an array of <code>[&quot;Error&quot;]</code> expressions.</p>
<div class='read-more'><a href="/compute-engine/guides/expressions/#errors"> Read more about the
<strong>errors</strong> that can be returned. <svg class="svg-chevron"><use xlink:href="#svg-chevron"></use></svg></a></div>
<h2 id="serializing-to-latex" tabindex="-1">Serializing to LaTeX</h2>
<p><strong>To serialize an expression to a LaTeX string</strong>, read the <code>expr.latex</code>
property.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> ce = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputeEngine</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ce.<span class="hljs-title function_">serialize</span>([<span class="hljs-string">&#x27;Add&#x27;</span>, [<span class="hljs-string">&#x27;Power&#x27;</span>, <span class="hljs-string">&#x27;x&#x27;</span>, <span class="hljs-number">3</span>], <span class="hljs-number">2</span>]));
<span class="hljs-comment">//   &quot;x^3 + 2&quot;</span>
</code></pre>
<h2 id="customizing-parsing-and-serialization" tabindex="-1">Customizing Parsing and Serialization</h2>
<p><strong>To customize the behavior of <code>ce.parse()</code> and <code>expr.latex</code></strong> set the
<code>ce.latexOptions</code> property.</p>
<p>Example of customization:</p>
<ul>
<li>whether to use an invisible multiply operator between expressions</li>
<li>whether the input LaTeX should be preserved as metadata in the output
expression</li>
<li>how to handle encountering unknown identifiers while parsing</li>
<li>whether to use a dot or a comma as a decimal marker</li>
<li>how to display imaginary numbers and infinity</li>
<li>whether to format numbers using engineering or scientific format</li>
<li>what precision to use when formatting numbers</li>
<li>how to serialize an explicit or implicit multiplication (using <code>\times</code>,
<code>\cdot</code>, etc)</li>
<li>how to serialize functions, fractions, groups, logical operators, intervals,
roots and powers.</li>
</ul>
<p>The type of <code>ce.latexOptions</code> is
<kbd><a href="/docs/compute-engine/?q=NumberFormattingOptions">NumberFormattingOptions</a>
&amp; <a href="/docs/compute-engine/?q=ParseLatexOptions">ParseLatexOptions</a> &amp;
<a href="/docs/compute-engine/?q=SerializeLatexOptions">SerializeLatexOptions</a></kbd>.
Refer to these interfaces for more details.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> ce = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputeEngine</span>();
ce.<span class="hljs-property">latexOptions</span> = {
  <span class="hljs-attr">precision</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">decimalMarker</span>: <span class="hljs-string">&#x27;{,}&#x27;</span>,
};

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ce.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&#x27;\\frac{1}{7}&#x27;</span>).<span class="hljs-title function_">N</span>().<span class="hljs-property">latex</span>);
<span class="hljs-comment">//  &quot;0{,}14\\ldots&quot;</span>
</code></pre>
<h3 id="customizing-the-decimal-marker" tabindex="-1">Customizing the Decimal Marker</h3>
<p>The world is
<a href="https://en.wikipedia.org/wiki/Decimal_separator#/media/File:DecimalSeparator.svg">about evenly split</a>
between using a dot or a comma as a decimal marker.</p>
<p>By default, the ComputeEngine is configured to use a dot.</p>
<p><strong>To use a comma as a decimal marker</strong>, set the <code>decimalMarker</code> option:</p>
<pre><code class="language-ts">ce.<span class="hljs-property">latexOptions</span>.<span class="hljs-property">decimalMarker</span> = <span class="hljs-string">&#x27;{,}&#x27;</span>;
</code></pre>
<p>Note that in LaTeX, in order to get the correct spacing around the comma, it
must be surrounded by curly brackets.</p>
<h3 id="customizing-the-number-formatting" tabindex="-1">Customizing the Number Formatting</h3>
<p>There are several options that can be used to customize the formating of numbers
when using <code>expr.latex</code>. Note that the format of numbers in JSON serialization
is standardized and cannot be customized.</p>
<p>The options are members of <code>ce.latexOptions</code>.</p>
<ul>
<li><code>notation</code>
<ul>
<li><code>&quot;auto&quot;</code>: (<strong>default</strong>) the whole part may take any value</li>
<li><code>&quot;scientific&quot;</code>: the whole part is a number between 1 and 9, there is an
exponent, unless it is 0.</li>
<li><code>&quot;engineering&quot;</code>: the whole part is a number between 1 and 999, the exponent
is a multiple of 3.</li>
</ul>
</li>
<li><code>avoidExponentsInRange</code>
<ul>
<li>if <code>null</code>, exponents are always used</li>
<li>otherwise, it is a tuple of two values representing a range of exponents. If
the exponent for the number is within this range, a decimal notation is
used. Otherwise, the number is displayed with an exponent. The default is
<code>[-6, 20]</code></li>
</ul>
</li>
<li><code>exponentProduct</code>: a LaTeX string inserted before an exponent, if necessary.
Default is <code>&quot;\cdot&quot;</code>. Another popular value is <code>&quot;\times&quot;</code>.</li>
<li><code>beginExponentMarker</code> and <code>endExponentMarker</code>: LaTeX strings used as template
to format an exponent. Default values are <code>&quot;10^{&quot;</code> and <code>&quot;}&quot;</code> respectively.
Other values could include <code>&quot;\mathrm{E}{&quot;</code> and <code>&quot;}&quot;</code>.</li>
<li><code>truncationMarker</code>: a LaTeX string used to indicate that a number has more
precision than what is displayed. Default is <code>&quot;\ldots&quot;</code></li>
<li><code>beginRepeatingDigits</code> and <code>endRepeatingDigits</code>: LaTeX strings used a template
to format repeating digits, as in <code>1.333333333...</code>. Default is <code>&quot;\overline{&quot;</code>
and <code>&quot;}&quot;</code>. Other popular values are <code>&quot;(&quot;</code> and <code>&quot;)&quot;</code>.</li>
<li><code>imaginaryUnit</code>: the LaTeX string used to represent the imaginary unit symbol.
Default is <code>&quot;\imaginaryI&quot;</code>. Other popular values are <code>&quot;\mathrm{i}&quot;</code>.</li>
<li><code>positiveInfinity</code> and <code>negativeInfinity</code> the LaTeX strings used to represent
positive and negative infinity, respectively. Defaults are <code>&quot;\infty&quot;</code> and
<code>&quot;-\infty&quot;</code>.</li>
<li><code>notANumber</code>: the LaTeX string to represent the number NaN. Default value is
<code>&quot;\operatorname{NaN}&quot;</code>.</li>
<li><code>groupSeparator</code>: the LaTeX string used to separate group of digits, for
example thousands. Default is <code>&quot;\,&quot;</code>. To turn off group separators, set to
<code>&quot;&quot;</code></li>
</ul>
<pre><code class="language-ts"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ce.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&#x27;700&#x27;</span>).<span class="hljs-property">latex</span>);
<span class="hljs-comment">//  &quot;700&quot;</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ce.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&#x27;123456.789&#x27;</span>).<span class="hljs-property">latex</span>);
<span class="hljs-comment">//  &quot;123\,456.789&quot;</span>

<span class="hljs-comment">// Always use the scientific notation</span>
ce.<span class="hljs-property">latexOptions</span>.<span class="hljs-property">notation</span> = <span class="hljs-string">&#x27;scientific&#x27;</span>;
ce.<span class="hljs-property">latexOptions</span>.<span class="hljs-property">avoidExponentsInRange</span> = <span class="hljs-literal">null</span>;
ce.<span class="hljs-property">latexOptions</span>.<span class="hljs-property">exponentProduct</span> = <span class="hljs-string">&#x27;\\times&#x27;</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ce.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&#x27;700&#x27;</span>).<span class="hljs-property">latex</span>);
<span class="hljs-comment">//  &quot;7\times10^{2}&quot;</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ce.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&#x27;123456.789&#x27;</span>).<span class="hljs-property">latex</span>);
<span class="hljs-comment">//  &quot;1.234\,567\,89\times10^{5}&quot;</span>
</code></pre>
<h2 id="customizing-the-serialization-style" tabindex="-1">Customizing the Serialization Style</h2>
<p>Some category of expressions can be serialized in different ways based on
conventions or personal preference. For example, a group can be indicate by
simple parentheses, or by a <code>\left...\right</code> command. A fraction can be
indicated by a <code>\frac{}{}</code> command or by a <code>{}{}^{-1}</code>.</p>
<p>The compute engine includes some built-in defaults, but they can be customized
as desired. For example to always represent fractions with a <code>\frac{}{}</code>
command:</p>
<pre><code class="language-ts">ce.<span class="hljs-property">latexSyntax</span>.<span class="hljs-property">options</span>.<span class="hljs-property">fractionStyle</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-string">&#x27;quotient&#x27;</span>;
</code></pre>
<p class="notice--info">If using a mathfield, the compute engine associated with the mathfield is
available as <code>mf.computeEngine</code>.</p>
<p>The style option handler has two arguments:</p>
<ul>
<li>the expression fragment being styled</li>
<li>the depth/level of the expression in the overall expression</li>
</ul>
<p>For example, to serialize rational numbers and division deeper than level 2 as
an inline solidus:</p>
<pre><code class="language-ts">ce.<span class="hljs-property">latexSyntax</span>.<span class="hljs-property">options</span>.<span class="hljs-property">fractionStyle</span> = <span class="hljs-function">(<span class="hljs-params">expr, level</span>) =&gt;</span>
  <span class="hljs-title function_">head</span>(expr) === <span class="hljs-string">&#x27;Rational&#x27;</span> || level &gt; <span class="hljs-number">2</span> ? <span class="hljs-string">&#x27;inline-solidus&#x27;</span> : <span class="hljs-string">&#x27;quotient&#x27;</span>;
</code></pre>
<h3 id="function-application" tabindex="-1">Function Application</h3>
<p><code>[&quot;Sin&quot;, &quot;x&quot;]</code></p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>&quot;paren&quot;</code></td>
<td style="text-align:left"><code>\sin(x)</code></td>
<td style="text-align:left">$$\sin(x)$$</td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;leftright&quot;</code></td>
<td style="text-align:left"><code>\sin\left(x\right)</code></td>
<td style="text-align:left">$$\sin\left(x\right)$$</td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;big&quot;</code></td>
<td style="text-align:left"><code>\sin\bigl(x\bigr)</code></td>
<td style="text-align:left">$$\sin\bigl(x\bigr)$$</td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;none&quot;</code></td>
<td style="text-align:left"><code>\sin x</code></td>
<td style="text-align:left">$$\sin x$$</td>
</tr>
</tbody>
</table>
<h3 id="group" tabindex="-1">Group</h3>
<p><code>[&quot;Multiply&quot;, &quot;x&quot;, [&quot;Add&quot;, &quot;a&quot;, &quot;b&quot;]]</code></p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>&quot;paren&quot;</code></td>
<td style="text-align:left"><code>x(a+b)</code></td>
<td style="text-align:left">$$x(a+b)$$</td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;leftright&quot;</code></td>
<td style="text-align:left"><code>x\left(a+b\right)</code></td>
<td style="text-align:left">$$x\left(a+b\right)$$</td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;big&quot;</code></td>
<td style="text-align:left"><code>x\bigl(a+b\bigr)</code></td>
<td style="text-align:left">$$x\bigl(a+b\bigr)$$</td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;none&quot;</code></td>
<td style="text-align:left"><code>x a+b</code></td>
<td style="text-align:left">$$ x a+b$$</td>
</tr>
</tbody>
</table>
<h3 id="root" tabindex="-1">Root</h3>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>&quot;radical&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;quotient&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;solidus&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h3 id="fraction" tabindex="-1">Fraction</h3>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>&quot;quotient&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;inline-solidus&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;nice-solidus&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;reciprocal&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;factor&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h3 id="logic" tabindex="-1">Logic</h3>
<p><code>[&quot;And&quot;, &quot;p&quot;, &quot;q&quot;]</code></p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>&quot;word&quot;</code></td>
<td style="text-align:left"><code>a \text{ and } b</code></td>
<td style="text-align:left">$$a \text{ and } b$$</td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;boolean&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;uppercase-word&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;punctuation&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h3 id="power" tabindex="-1">Power</h3>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>&quot;root&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;solidus&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;quotient&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h3 id="numeric-sets" tabindex="-1">Numeric Sets</h3>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>&quot;compact&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;regular&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;interval&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>&quot;set-builder&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h2 id="customizing-the-latex-dictionary" tabindex="-1">Customizing the LaTeX Dictionary</h2>
<p>The <a href ="/math-json/">MathJSON format</a> is independent of any source or
target language (LaTeX, MathASCII, Python, etc) or of any specific
interpretation of the identifiers used in a MathJSON expression
(<code>&quot;Pi&quot;</code>, <code>&quot;Sin&quot;</code>, etc).</p>
<p>A <strong>LaTeX dictionary</strong> defines how a MathJSON expression can be expressed as a
LaTeX string (<strong>serialization</strong>) or constructed from a LaTeX string
(<strong>parsing</strong>).</p>
<p>It includes definitions such as:</p>
<ul>
<li><em>The <code>Power</code> function is represented as <code>x^{n}</code></em></li>
<li><em>The <code>Divide</code> function is represented as <code>\frac{x}{y}</code></em>.</li>
</ul>
<p>Note that the dictionary will include LaTeX commands as triggers. LaTeX
commands are usually prefixed with a backslash, such as <code>\frac</code> or <code>\pm</code>.
It will also reference MathJSON identifiers. MathJSON identifiers are usually
capitalized, such as <code>Divide</code> or <code>PlusMinus</code> and are not prefixed with a backslash.</p>
<p>The Compute Engine includes a default LaTeX dictionary to parse and serialize
common math expressions.</p>
<p><strong>To extend the LaTeX syntax</strong> update the <code>latexDictionary</code> property
of the Compute Engine</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> ce = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputeEngine</span>();
ce.<span class="hljs-property">latexDictionary</span> = [
  <span class="hljs-comment">// Expand the default dictionary...</span>
  ...ce.<span class="hljs-property">latexDictionary</span>,
  <span class="hljs-comment">// ...and add the `\smoll` command</span>
  {
    <span class="hljs-attr">trigger</span>: [<span class="hljs-string">&#x27;\\smoll&#x27;</span>],
    <span class="hljs-attr">parse</span>: <span class="hljs-function">(<span class="hljs-params">parser</span>) =&gt;</span> {
      <span class="hljs-comment">// We&#x27;re expecting two arguments, so we&#x27;re calling </span>
      <span class="hljs-comment">// `parseGroup()` twice. If `parseGroup()` returns null,</span>
      <span class="hljs-comment">// we assume that the argument is missing.</span>
      <span class="hljs-keyword">return</span> [
        <span class="hljs-string">&#x27;Divide&#x27;</span>,
        parser.<span class="hljs-title function_">parseGroup</span>() ?? [<span class="hljs-string">&#x27;Error&#x27;</span>, <span class="hljs-string">&quot;&#x27;missing&#x27;&quot;</span>],
        parser.<span class="hljs-title function_">parseGroup</span>() ?? [<span class="hljs-string">&#x27;Error&#x27;</span>, <span class="hljs-string">&quot;&#x27;missing&#x27;&quot;</span>],
      ];
    },
  },
];

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ce.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&#x27;\\smoll{1}{5}&#x27;</span>).<span class="hljs-property">json</span>);
<span class="hljs-comment">// The &quot;Divide&quot; get represented a &quot;Rational&quot; by default when </span>
<span class="hljs-comment">// both arguments are integers.</span>
<span class="hljs-comment">//  [&quot;Rational&quot;, 1, 5]</span>
</code></pre>
<p class="notice--info">If you are using a mathfield, all the mathfields on the page
share a Compute Engine instance, which is available as <code>MathfieldElement.computeEngine</code>.
You can modify the LaTeX dictionary used by the mathfields with <code>MathfieldElement.computeEngine.latexDictionary</code>.</p>
<h3 id="latex-dictionary-entries" tabindex="-1">LaTeX Dictionary Entries</h3>
<p>Each entry in the LaTeX dictionary is an object with the following properties:</p>
<ul>
<li><code>kind</code>: the kind of expression associated with this entry. Valid values are <code>prefix</code>,
<code>postfix</code>, <code>infix</code>, <code>expression</code>, <code>function</code>, <code>symbol</code>, <code>environment</code> and <code>matchfix</code>.
If not provided, the default is <code>expression</code>.</li>
<li><code>trigger</code>: a LaTeX command or a sequence of LaTeX tokens that will trigger
the entry. For example, <code>^{+}</code>.</li>
<li><code>parse</code>: a function that will be invoked when the trigger is encountered in
the LaTeX input. It will be passed a <code>parser</code> object that can be used to
parse the input. The <code>parse</code> function should return a MathJSON expression.
See below for more info about parsing.</li>
<li><code>serialize</code>: a function that will be invoked when the <code>expr.latex</code> property
is read. It will be passed a <code>serializer</code> object that can be used to
serialize the expression. The <code>serialize</code> function should return a LaTeX
string. See below for more info about serialization.</li>
<li><code>name</code>: the name of the MathJSON identifier associated with this entry.
If provided, a default <code>parse</code> handler will be used that is equivalent to:
<code>parse: name</code>. The <code>name</code> property must be unique. However, multiple entries
can have different triggers that produce the same expression. This is
useful for synonyms, such as <code>\mathrm{floor{</code> and <code>\lfloor</code><code>\rfloor</code>.</li>
</ul>
<p>The most general type of entry is one using <code>expression</code> as the <code>kind</code>, which
is also the default if no <code>kind</code> is provided. In this case, the <code>parse</code> handler
will be invoked when the trigger is encountered in the LaTeX input. The <code>parse</code>
handler will be passed a <code>parser</code> object that can be used to parse the input.
The <code>parse</code> handler should return a MathJSON expression.</p>
<p>The <code>function</code> kind is a special case of <code>expression</code> where the expression
is a function, possibly using mutly-character identifiers, as in <code>\mathrm{concat}</code>.
The <code>trigger</code> property defines the name of the function, not a sequence of tokens.
The parse handler should return the idenfitier corresponding
to the function, such as <code>Concatenate</code>. As a shortcut, the <code>parse</code> handler
can be provided as an Expression. For example:</p>
<pre><code class="language-javascript">{
  <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;function&#x27;</span>,
  <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;concat&#x27;</span>,
  <span class="hljs-attr">parse</span>: <span class="hljs-string">&#x27;Concatenate&#x27;</span>
}
</code></pre>
<p>The <code>infix</code> kind is used for binary operators. The <code>parse</code> handler will be
passed a <code>parser</code> object and the left-hand side of the operator. The <code>parser</code>
object can be used to parse the right-hand side of the expression. The <code>parse</code>
handler should return a MathJSON expression.</p>
<pre><code class="language-javascript">{
  <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;infix&#x27;</span>,
  <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;\\oplus&#x27;</span>,
  <span class="hljs-attr">parse</span>: <span class="hljs-function">(<span class="hljs-params">parser, lhs</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">&#x27;Concatenate&#x27;</span>, lhs, parser.<span class="hljs-title function_">parseExpression</span>()];
  },
}
</code></pre>
<p>The <code>prefix</code> kind is used for unary operators. The <code>parse</code> handler will be
passed a <code>parser</code> object. The <code>parse</code> handler should return a MathJSON
expression.</p>
<pre><code class="language-javascript">{
  <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;prefix&#x27;</span>,
  <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;\\neg&#x27;</span>,
  <span class="hljs-attr">parse</span>: <span class="hljs-function">(<span class="hljs-params">parser, lhs</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">&#x27;Negate&#x27;</span>, lhs];
  },
}
</code></pre>
<p>The <code>postfix</code> kind is used for postfix operators. The <code>parse</code> handler will be
passed a <code>parser</code> object and the left-hand side of the operator. The <code>parse</code>
handler should return a MathJSON expression.</p>
<pre><code class="language-javascript">{
  <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;postfix&#x27;</span>,
  <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;\\!&#x27;</span>,
  <span class="hljs-attr">parse</span>: <span class="hljs-function">(<span class="hljs-params">parser, lhs</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">&#x27;Factorial&#x27;</span>, lhs];
  },
}
</code></pre>
<p>The <code>environment</code> kind is used for LaTeX environments. The <code>trigger</code> property
in that case is the name of the environment. The <code>parse</code> handler will
be passed a <code>parser</code> object. The <code>parseTabular()</code> method can be used to parse
the rows and columns of the environment. It returns a two dimensional array
of expressions. The <code>parse</code> handler should return a MathJSON expression.</p>
<pre><code class="language-javascript">{
  <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;environment&#x27;</span>,
  <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;matrix&#x27;</span>,
  <span class="hljs-attr">parse</span>: <span class="hljs-function">(<span class="hljs-params">parser</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> content = parser.<span class="hljs-title function_">parseTabular</span>();
    <span class="hljs-keyword">return</span> [<span class="hljs-string">&#x27;Matrix&#x27;</span>, [<span class="hljs-string">&#x27;List&#x27;</span>, content.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> [<span class="hljs-string">&#x27;List&#x27;</span>, row.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">cell</span> =&gt;</span> cell)])]];
  },
}
</code></pre>
<p>The <code>matchfix</code> kind is used for LaTeX commands that are used to enclose an
expression. There is no <code>trigger</code> property in this case. Instead the
<code>openDelimiter</code> and <code>closeDelimiter</code> indicate the LaTeX commands that will
be used to enclose the expression. The <code>parse</code> handler will be passed a
<code>parser</code> object and the body (the expression between the open and close
delimiters). The <code>parse</code> handler should return a MathJSON expression.</p>
<pre><code class="language-javascript">{
  <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;matchfix&#x27;</span>,
  <span class="hljs-attr">openDelimiter</span>: <span class="hljs-string">&#x27;\\lvert&#x27;</span>,
  <span class="hljs-attr">closeDelimiter</span>: <span class="hljs-string">&#x27;\\rvert&#x27;</span>,
  <span class="hljs-attr">parse</span>: <span class="hljs-function">(<span class="hljs-params">parser, body</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">&#x27;Abs&#x27;</span>, body];
  },
}
</code></pre>
<h3 id="parsing" tabindex="-1">Parsing</h3>
<p>When parsing a LaTeX string, the first step is to tokenize the string
according to the LaTeX syntax. For example, the input string <code>\\frac{ab}{10}</code>
will result in the tokens <code>[&quot;\\frac&quot;, &quot;{&quot;, &quot;a&quot;, &quot;b&quot;, &quot;}&quot;, &quot;{&quot;, &quot;1&quot;, &quot;0&quot;, &quot;}&quot;]</code>.
Note that each LaTeX command is a single token, but that digits and ordinary
letters are each separate tokens.</p>
<p>The <code>parse</code> handler is invoked when the trigger is encountered in the LaTeX
token strings. The trigger can be one or more tokens.</p>
<p>A common case is to return from the parse handler a MathJSON identifier
for a symbol or function.</p>
<p>For example, lets say you wanted to map the LaTeX command <code>\div</code> to the
MathJSON <code>Divide</code> function. You would write:</p>
<pre><code class="language-javascript">{
  <span class="hljs-attr">trigger</span>: [<span class="hljs-string">&#x27;\\div&#x27;</span>],
  <span class="hljs-attr">parse</span>: <span class="hljs-function">(<span class="hljs-params">parser</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Divide&#x27;</span>;
  },
}
</code></pre>
<p>As a shortcut, you can also write:</p>
<pre><code class="language-javascript">{
  <span class="hljs-attr">trigger</span>: [<span class="hljs-string">&#x27;\\div&#x27;</span>],
  <span class="hljs-attr">parse</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">&#x27;Divide&#x27;</span>
}
</code></pre>
<p>Or even more succintly:</p>
<pre><code class="language-javascript">{
  <span class="hljs-attr">trigger</span>: [<span class="hljs-string">&#x27;\\div&#x27;</span>],
  <span class="hljs-attr">parse</span>: <span class="hljs-string">&#x27;Divide&#x27;</span>
}
</code></pre>
<p>The LaTeX <code>\div(1, 2)</code> would then produce the MathJSON expression
<code>[&quot;Divide&quot;, 1, 2]</code>. Note that the arguments are provided as comma-separated,
parenthesized expressions.</p>
<p>If you need to parse some more complex LaTeX syntax, you can use the <code>parser</code>
argument of the <code>parse</code> handler. The <code>parser</code> object has numerous methods to
help you parse the LaTeX string:</p>
<ul>
<li><code>parser.peek</code> is the current token.</li>
<li><code>parser.index</code> is the index of the current token. If backtracking is
necessary, it is possible to set the index to a previous value.</li>
<li><code>parser.nextToken()</code> returns the next token and advances the index.</li>
<li><code>parser.skipSpace()</code> in LaTeX math mode, skip over space which
includes space tokens, and empty groups <code>{}</code>. Whether space tokens
are skipped or not depends on the <code>skipSpace</code> option.</li>
<li><code>parser.skipVisualSpace()</code> skip over visual space which
includes space tokens, empty groups <code>{}</code>, and commands such as <code>\,</code> and <code>\!</code>.</li>
<li><code>parser.match(token: LatexToken)</code> return true if the next token matches the argument, or <code>null</code> otherwise.</li>
<li><code>parser.matchAll(tokens)</code> return true if the next tokens match the argument, an array of tokens, or <code>null</code> otherwise.</li>
<li><code>parser.matchAny(tokens: LatexToken[])</code> return the next token if it matches any of the token in the argument or <code>null</code> otherwise.</li>
<li><code>parser.matchChar()</code> return the next token if it is a plain character (e.g. a, +), or the character corresponding to a hex literal (^^ and ^^^^) or the <code>\char</code> and <code>\unicode</code> commands</li>
<li><code>parser.parseGroup()</code> return an expression if the next token is a group begin token <code>{</code> followed by a sequence of LaTeX tokens until a group end token <code>}</code> is encountered, or <code>null</code> otherwise.</li>
<li><code>parser.parseToken()</code> return an expression if the next token can be parsed
as a MathJSON expression, or <code>null</code> otherwise. This is useful when the
argument of a LaTeX command can be a single token, for example for <code>\sqrt5</code>.
Some, but not all, LaTeX commands accept a single token as an argument.</li>
<li><code>parser.parseOptionalGroup()</code> return an expression if the next token is an
optional group begin token <code>[</code> followed by a sequence of LaTeX tokens until
an optional group end token <code>]</code> is encountered, or <code>null</code> otherwise.</li>
<li><code>parser.parseExpression()</code> return an expression if the next tokens can be
parsed as a MathJSON expression, or <code>null</code> otherwise. After this call,
there may be some tokens left to parse.</li>
<li><code>parser.parseArguments()</code> return an array of expressions if the next tokens
can be parsed as a sequence of MathJSON expressions separated by a comma,
or <code>null</code> otherwise.</li>
</ul>
<p>If the <code>parse</code> handler returns <code>null</code>, the parser will continue to look for
another handler that matches the current token.</p>
<p>Note there is a pattern in the names of the methods of the parser. The <code>match</code> prefix
means that the method will return the next token if it matches the argument, or
<code>null</code> otherwise. These methods are more primitive. The <code>parse</code> prefix
indicates that the method will return a MathJSON expression or <code>null</code>.</p>
<p>The most common usage is to call <code>parser.parseGroup()</code> to parse a group of tokens
as an argument to a LaTeX command.</p>
<p>For example:</p>
<pre><code class="language-javascript">{
  <span class="hljs-attr">trigger</span>: [<span class="hljs-string">&#x27;\\div&#x27;</span>],
  <span class="hljs-attr">parse</span>: <span class="hljs-function">(<span class="hljs-params">parser</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">&#x27;Divide&#x27;</span>, parser.<span class="hljs-title function_">parseGroup</span>(), parser.<span class="hljs-title function_">parseGroup</span>()];
  },
}
</code></pre>
<p>In this case, the LaTeX input <code>\div{1}{2}</code> would produce the MathJSON expression
<code>[&quot;Divide&quot;, 1, 2]</code> (note the use of the curly brackets, rather than the parentheses
in the LaTeX input).</p>
<p>If we wanted instead to treat the <code>\div</code> command as a binary operator, we could
write:</p>
<pre><code class="language-javascript">{
  <span class="hljs-attr">trigger</span>: [<span class="hljs-string">&#x27;\\div&#x27;</span>],
  <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;infix&#x27;</span>,
  <span class="hljs-attr">parse</span>: <span class="hljs-function">(<span class="hljs-params">parser, lhs</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">&#x27;Divide&#x27;</span>, lhs, parser.<span class="hljs-title function_">parseExpression</span>()];
  },
}
</code></pre>
<p>By using the <code>kind: 'infix'</code> option, the parser will automatically insert the
left-hand side of the operator as the first argument to the <code>parse</code> handler.</p>
<h3 id="serializing" tabindex="-1">Serializing</h3>
<p>When serializing a MathJSON expression to a LaTeX string, the <code>serialize</code> handler
is invoked. You must specify a <code>name</code> property to associate the serialization
handler with a MathJSON identifier.</p>
<pre><code class="language-javascript">{
  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Concatenate&quot;</span>,
  <span class="hljs-attr">trigger</span>: [<span class="hljs-string">&quot;\\oplus&quot;</span>],
  <span class="hljs-attr">serialize</span>: <span class="hljs-function">(<span class="hljs-params">serializer, expr</span>) =&gt;</span> 
    <span class="hljs-string">&quot;\\oplus&quot;</span> + serializer.<span class="hljs-title function_">wrapArguments</span>(expr),
  <span class="hljs-attr">evaluate</span>: <span class="hljs-function">(<span class="hljs-params">ce, args</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> result = <span class="hljs-string">&#x27;&#x27;</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> arg <span class="hljs-keyword">of</span> args) {
      val = arg.<span class="hljs-property">numericValue</span>;
      <span class="hljs-keyword">if</span> (val === <span class="hljs-literal">null</span> || ce.<span class="hljs-title function_">isComplex</span>(val) || <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(val)) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">if</span> (ce.<span class="hljs-title function_">isBignum</span>(val)) {
        <span class="hljs-keyword">if</span> (!val.<span class="hljs-title function_">isInteger</span>() || val.<span class="hljs-title function_">isNegative</span>()) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        result += val.<span class="hljs-title function_">toString</span>();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val === <span class="hljs-string">&#x27;number&#x27;</span>) { 
        <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Number</span>.<span class="hljs-title function_">isInteger</span>(val) || val &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        result += val.<span class="hljs-title function_">toString</span>();
      }
    }
    <span class="hljs-keyword">return</span> ce.<span class="hljs-title function_">parse</span>(result);
  },
}
</code></pre>
<p>In the example above, the LaTeX command <code>\oplus</code> is associated with the
<code>Concatenate</code> function. The <code>serialize</code> handler will be invoked when the
<code>expr.latex</code> property is read.</p>
<p>Note that we did not provide a <code>parse</code> handler: if a <code>name</code> property is provided,
a default <code>parse</code> handler will be used that is equivalent to:
<code>parse: name</code>.</p>
<p>It is possible to have multiple definitions with the same triggers, but the
<code>name</code> property must be unique.</p>
<h2 id="using-a-new-function-with-a-mathfield" tabindex="-1">Using a New Function with a Mathfield</h2>
<p>You may also want to use your new function with a mathfield.</p>
<p>First you need to define a LaTeX macro so that the mathfield knows
how to render this command. Lets define the <code>\smallfrac</code> macro.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> mfe = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;math-field&#x27;</span>);

mfe.<span class="hljs-property">macros</span> = {
  ...mfe.<span class="hljs-property">macros</span>,
  <span class="hljs-attr">smallfrac</span>: {
    <span class="hljs-attr">args</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">def</span>: <span class="hljs-string">&#x27;{}^{#1}\\!\\!/\\!{}_{#2}&#x27;</span>
  },
};
</code></pre>
<p>The content of the <code>def</code> property is a LaTeX fragment that will
be used to render the <code>\\smallfrac</code> command.</p>
<p>The <code>#1</code> token in <code>def</code> is a reference to the first argument and <code>#2</code> to the
second one.</p>
<p>You may also want to define an inline shortcut to make it easier
to input the command.</p>
<p>With the code below, we define a shortcut smallfrac.</p>
<p>When typed, the shortcut is replaced with the associated LaTeX.</p>
<p>The <code>#@</code> token represents the argument to the left of the shortcut, and
the <code>#?</code> token represents a placeholder to be filled by the user.</p>
<pre><code class="language-js">mfe.<span class="hljs-property">inlineShortcuts</span> = {
  ...mfe.<span class="hljs-property">inlineShortcuts</span>,
  <span class="hljs-attr">smallfrac</span>:<span class="hljs-string">&#x27;\\smallfrac{#@}{#?}&#x27;</span>
};
</code></pre>
<p>You can now parse the input from a mathfield using:</p>
<pre><code class="language-js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ce.<span class="hljs-title function_">parse</span>(mfe.<span class="hljs-property">value</span>).<span class="hljs-property">json</span>)
</code></pre>
<p>Alternatively, you can associate the customized compute engine with the
mathfields in the document:</p>
<pre><code class="language-js"><span class="hljs-title class_">MathfieldElement</span>.<span class="hljs-property">computeEngine</span> = ce;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(mfe.<span class="hljs-title function_">getValue</span>(<span class="hljs-string">&#x27;math-json&#x27;</span>))
</code></pre>




      </section>

      <footer class="page__meta">
        
        


        <meta itemprop="datePublished" content="September 09, 2023">
                

        


        
          <p class="page__date"><svg class="icon1quarterem"><use role="none" xlink:href="/assets/icons.svg#calendar-days"/></svg><strong> Updated</strong> <time datetime='2023-09-09'>September 09, 2023</time></p>
        

          <p class="page__meta-link"><svg class="icon1quarterem"><use role="none" xlink:href="/assets/icons.svg#bug"/></svg> <strong>Problem? Feedback?</strong> File a report at&nbsp;<a href="https://github.com/cortex-js/cortexjs.io">github.com/cortex-js/cortexjs.io</a></p>
      </footer>


      
    </div>

  </article>

  
  


<aside class="sidebar__right">
  <nav class="toc">
    <header><h2 class="nav__title"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" style="height:16px; width:12px"><path fill="currentColor" d="M256 0v128h128L256 0zM224 128L224 0H48C21.49 0 0 21.49 0 48v416C0 490.5 21.49 512 48 512h288c26.51 0 48-21.49 48-48V160h-127.1C238.3 160 224 145.7 224 128zM272 416h-160C103.2 416 96 408.8 96 400C96 391.2 103.2 384 112 384h160c8.836 0 16 7.162 16 16C288 408.8 280.8 416 272 416zM272 352h-160C103.2 352 96 344.8 96 336C96 327.2 103.2 320 112 320h160c8.836 0 16 7.162 16 16C288 344.8 280.8 352 272 352zM288 272C288 280.8 280.8 288 272 288h-160C103.2 288 96 280.8 96 272C96 263.2 103.2 256 112 256h160C280.8 256 288 263.2 288 272z"/></svg>On This Page</h2></header>
  
    
      <div class="toc__menu" >
        <ol><li><a href="#the-compute-engine-natural-parser">The Compute Engine Natural Parser</a></li><li><a href="#serializing-to-latex">Serializing to LaTeX</a></li><li><a href="#customizing-parsing-and-serialization">Customizing Parsing and Serialization</a><ol><li><a href="#customizing-the-decimal-marker">Customizing the Decimal Marker</a></li><li><a href="#customizing-the-number-formatting">Customizing the Number Formatting</a></li></ol></li><li><a href="#customizing-the-serialization-style">Customizing the Serialization Style</a><ol><li><a href="#function-application">Function Application</a></li><li><a href="#group">Group</a></li><li><a href="#root">Root</a></li><li><a href="#fraction">Fraction</a></li><li><a href="#logic">Logic</a></li><li><a href="#power">Power</a></li><li><a href="#numeric-sets">Numeric Sets</a></li></ol></li><li><a href="#customizing-the-latex-dictionary">Customizing the LaTeX Dictionary</a><ol><li><a href="#latex-dictionary-entries">LaTeX Dictionary Entries</a></li><li><a href="#parsing">Parsing</a></li><li><a href="#serializing">Serializing</a></li></ol></li><li><a href="#using-a-new-function-with-a-mathfield">Using a New Function with a Mathfield</a></li></ol>
      </div>
    
                            
  </nav>
</aside>

</div>



<script type="module">
function whenReady(fn) {
  if (document.readyState !== 'loading')  fn();
  else document.addEventListener('DOMContentLoaded', fn);
}

whenReady(() => import('//unpkg.com/mathlive?module').then((mathlive) =>
    mathlive.renderMathInDocument({
      renderAccessibleContent: false,
      TeX: { 
        delimiters: {
          inline: [['\\(', '\\)']],
          display: [ ['$$', '$$'], ['\\[', '\\]']],
        },
        processEnvironments : false,
        processClassPattern: /./
      },
      asciiMath: null,
    })
  )
)
</script>
</div>

    

    <footer id="footer" class="page__footer" role="contentinfo">
      <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
      <div class="page__footer-follow">
  <ul class="social-icons">
     
     
     
    
    <li>
      <a href="https://github.com/cortex-js" rel="nofollow noopener noreferrer"
          ><svg class='icon1quarterem'><use role='none' xlink:href='/assets/icons.svg#github'></use></svg>GitHub</a
      >
    </li>
     
     
    
    <li>
      <a href="/gitter/" rel="nofollow noopener noreferrer"
          ><svg class='icon1quarterem'><use role='none' xlink:href='/assets/icons.svg#gitter'></use></svg>Gitter Forum</a
      >
    </li>
     
     
    

  </ul>
</div>
<div class="page__footer-pages">
   
    <ul>
       
      
      <li>
        <a href="/about/" rel="nofollow noopener noreferrer">About Us</a>
      </li>
       
       
    </ul>
  

</div>
    </footer>

    
  <!-- <script defer src="/assets/js/main.min.js"></script> -->









  </body>
</html>