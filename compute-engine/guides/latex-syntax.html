<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-compute-engine/guide-latex-syntax" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Parsing and Serializing LaTeX · CortexJS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cortexjs.io/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cortexjs.io/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://cortexjs.io/compute-engine/guides/latex-syntax"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Parsing and Serializing LaTeX · CortexJS"><meta data-rh="true" name="description" content="The Compute Engine manipulates MathJSON expressions. It can also convert LaTeX strings to"><meta data-rh="true" property="og:description" content="The Compute Engine manipulates MathJSON expressions. It can also convert LaTeX strings to"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cortexjs.io/compute-engine/guides/latex-syntax"><link data-rh="true" rel="alternate" href="https://cortexjs.io/compute-engine/guides/latex-syntax" hreflang="en"><link data-rh="true" rel="alternate" href="https://cortexjs.io/compute-engine/guides/latex-syntax" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Q23Y5RN3UQ-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="CortexJS" href="/opensearch.xml">
<link rel="stylesheet" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.11/codemirror.min.css">
<script>!function(){var e,o;window.moduleMap||(window.moduleMap={}),window.moduleMap={...window.moduleMap,mathlive:"//unpkg.com/mathlive?module","compute-engine":"//unpkg.com/@cortex-js/compute-engine?module"},(e=["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js","https://unpkg.com/@cortex-js/compute-engine","https://unpkg.com/mathlive/dist/mathlive.min.js","https://unpkg.com/@ui-js/code-playground@module"]).forEach(((t,m)=>{const n=t.endsWith("@module"),c="script"+function(e,o=0){let t=3735928559^o,m=1103547991^o;for(let o=0;o<e.length;o++){const n=e.charCodeAt(o);t=Math.imul(t^n,2654435761),m=Math.imul(m^n,1597334677)}return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(m^m>>>13,3266489909),m=Math.imul(m^m>>>16,2246822507),m^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&m)+(t>>>0)}(t=t.replace("@module","")).toString(36);if(document.getElementById(c))return;const i=document.createElement("script");n&&(i.type="module"),i.id=c,i.src=t,i.async=!1,o&&m===e.length-1&&(i.onload=o),document.head.appendChild(i)}))}()</script>
<link rel="preconnect" href="https://rsms.me/">
<link rel="stylesheet" href="https://rsms.me/inter/inter.css" media="print" onload="this.media=&#39;all&#39;"><link rel="stylesheet" href="/assets/css/styles.7caa5442.css">
<script src="/assets/js/runtime~main.6c1ae291.js" defer="defer"></script>
<script src="/assets/js/main.dcdfb2b5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">CortexJS</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/mathfield">Mathfield</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/compute-engine">Compute Engine</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/cortex-js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" icon="github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mathfield">Mathfield</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/compute-engine">Compute Engine</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item compass-icon"><a class="menu__link" tabindex="0" href="/compute-engine">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item flask-icon"><a class="menu__link" tabindex="0" href="/compute-engine/demo">Demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item changelog-icon"><a class="menu__link" tabindex="0" href="/compute-engine/changelog">Changelog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/expressions">Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/evaluate">Evaluation of Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/symbolic-computing">Symbolic Computing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/numeric-evaluation">Numeric Evaluation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/canonical-form">Canonical Form</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/symbols">Symbols</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/augmenting">Custom Functions and Symbols</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/compute-engine/guides/latex-syntax">LaTeX Syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/types">Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/simplify">Simplify</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/compiling">Compiling Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/assumptions">Assumptions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/patterns-and-rules">Patterns and Rules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item sdk-icon"><a class="menu__link" tabindex="0" href="/math-json">MathJSON Format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item sdk-icon"><a class="menu__link" tabindex="0" href="/compute-engine/api">API Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item compass-icon"><a class="menu__link" tabindex="0" href="/compute-engine/standard-library">MathJSON Standard Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/arithmetic">Arithmetic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/calculus">Calculus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/collections">Collections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/complex">Complex</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/control-structures">Control Structures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/core">Core</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/functions">Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/linear-algebra">Linear Algebra</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/logic">Logic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/sets">Sets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/special-functions">Special Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/statistics">Statistics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/styling">Styling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/compute-engine/reference/trigonometry">Trigonometry</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item tutorial-icon"><a class="menu__link" tabindex="0" href="/tutorials/simple-quiz">Simple Quiz</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/about">Additional Resources</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Compute Engine</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">LaTeX Syntax</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Parsing and Serializing LaTeX</h1></header><div class="intro_b9yo"><p>The Compute Engine manipulates MathJSON expressions. It can also convert LaTeX strings to
MathJSON expressions (<strong>parsing</strong>) and output MathJSON expressions as LaTeX
string (<strong>serializing</strong>)</p></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>In this documentation, functions such as <code>ce.box()</code> and <code>ce.parse()</code> require a
<code>ComputeEngine</code> instance which is denoted by a <code>ce.</code> prefix.<br>Functions that
apply to a boxed expression, such as <code>expr.simplify()</code> are denoted with a
<code>expr.</code> prefix.</p></div></div>
<p><strong>To create a new instance of the Compute Engine</strong>, use the
<code>new ComputeEngine()</code> constructor.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token keyword" style="color:var(--base-0e)">const</span><span class="token plain"> ce </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">new</span><span class="token plain"> </span><span class="token class-name" style="color:var(--base-0a)">ComputeEngine</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p><strong>To input math using an interactive mathfield</strong>, use the <a href="/mathfield">Mathfield</a> library.</p>
<p>A <code>&lt;math-field&gt;</code> DOM element works like a <code>&lt;textarea&gt;</code> in HTML, but for
math. It provides its content as a LaTeX string, ready to be used with the
Compute Engine.</p>
<div class="readMore_KWn8"><a href="/mathfield/"><p>Read more about the <strong>mathfield element</strong><svg class="icon_qj0s chevronRightBold_bbMj"><use xlink:href="/icons.svg#chevron-right-bold"></use></svg></p></a></div>
<p>All the mathfields on the page share a Compute Engine instance, which is
available as <code>MathfieldElement.computeEngine</code>.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token keyword" style="color:var(--base-0e)">const</span><span class="token plain"> ce </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> MathfieldElement</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">computeEngine</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can associate a customized compute engine with the mathfields in the
document:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token keyword" style="color:var(--base-0e)">const</span><span class="token plain"> ce </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">new</span><span class="token plain"> </span><span class="token class-name" style="color:var(--base-0a)">ComputeEngine</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">MathfieldElement</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">computeEngine </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> ce</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">console</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">log</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">mfe</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">expression</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">json</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p><strong>To parse a LaTeX string as a MathJSON expression</strong>, call the <code>ce.parse()</code>
function.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">console</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">log</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">ce</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">parse</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&quot;5x + 1&quot;</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">json</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token comment" style="color:var(--base-05)">// ➔  [&quot;Add&quot;, [&quot;Multiply&quot;, 5, &quot;x&quot;], 1]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By default, <code>ce.parse()</code> return a
<a href="/compute-engine/guides/canonical-form">canonical expression</a>. To get a
non-canonical expression instead, use the <code>{canonical: false}</code> option: The
non-canonical form is closer to the literal LaTeX input.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">ce</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">parse</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&quot;\\frac{7}{-4}&quot;</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">json</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token comment" style="color:var(--base-05)">// ➔  [&quot;Rational&quot;, -7, 4]</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">ce</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">parse</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&quot;\\frac{7}{-4}&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:var(--base-0c)">canonical</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token boolean" style="color:var(--base-09)">false</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">json</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token comment" style="color:var(--base-05)">// ➔  [&quot;Divide&quot;, 7, -4]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-compute-engine-natural-parser">The Compute Engine Natural Parser<a href="#the-compute-engine-natural-parser" class="hash-link" aria-label="Direct link to The Compute Engine Natural Parser" title="Direct link to The Compute Engine Natural Parser">​</a></h2>
<p>Unlike a programming language, mathematical notation is surprisingly ambiguous
and full of idiosyncrasies. Mathematicians frequently invent new notations, or
have their own preferences to represent even common concepts.</p>
<p>The Compute Engine Natural Parser interprets expressions using the notation you
are already familiar with. Write as you would on a blackboard, and get back a
semantic representation as an expression ready to be processed.</p>
<table><thead><tr><th style="text-align:left">LaTeX</th><th style="text-align:left">MathJSON</th></tr></thead><tbody><tr><td style="text-align:left"><big><code class="language-math math-inline">\sin 3t + \cos 2t</code> </big><br><code>\sin 3t + \cos 2t</code></td><td style="text-align:left"><code>[&quot;Add&quot;, [&quot;Sin&quot;, [&quot;Multiply&quot;, 3, &quot;t&quot;]], [&quot;Cos&quot;, [&quot;Multiply&quot;, 2, &quot;t&quot;]]]</code></td></tr><tr><td style="text-align:left"><big><code class="language-math math-inline">\int \frac{dx}{x}</code></big><br><code>\int \frac{dx}{x}</code></td><td style="text-align:left"><code>[&quot;Integrate&quot;, [&quot;Divide&quot;, 1, &quot;x&quot;], &quot;x&quot;]</code></td></tr><tr><td style="text-align:left"><big><code class="language-math math-inline">123.4(567)</code> </big><br><code>123.4(567)</code></td><td style="text-align:left"><code>123.4(567)</code></td></tr><tr><td style="text-align:left"><big><code class="language-math math-inline">123.4\overline{567}</code> </big><br><code>123.4\overline{567}</code></td><td style="text-align:left"><code>123.4(567)</code></td></tr><tr><td style="text-align:left"><big><code class="language-math math-inline">\vert a+\vert b\vert+c\vert</code> </big><br><code>|a+|b|+c| </code></td><td style="text-align:left"><code>[&quot;Abs&quot;, [&quot;Add&quot;, &quot;a&quot;, [&quot;Abs&quot;, &quot;b&quot;], &quot;c&quot;]]</code></td></tr><tr><td style="text-align:left"><big><code class="language-math math-inline">\vert\vert a\vert\vert+\vert b\vert</code> </big><br><code>||a||+|b|</code></td><td style="text-align:left"><code>[&quot;Add&quot;, [&quot;Norm&quot;, &quot;a&quot;], [&quot;Abs&quot;, &quot;b&quot;]]</code></td></tr></tbody></table>
<p>The Compute Engine Natural Parser will apply maximum effort to parse the input
string as LaTeX, even if it includes errors. If errors are encountered, the
resulting expression will have its <code>expr.isValid</code> property set to <code>false</code>. An
<code>[&quot;Error&quot;]</code> expression will be produced where a problem was encountered. To get
the list of all the errors in an expression, use <code>expr.errors</code> which will return
an array of <code>[&quot;Error&quot;]</code> expressions.</p>
<div class="readMore_KWn8"><a href="/compute-engine/guides/expressions/#errors"><p>Read more about the <strong>errors</strong> that can be returned. <svg class="icon_qj0s chevronRightBold_bbMj"><use xlink:href="/icons.svg#chevron-right-bold"></use></svg></p></a></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="serializing-to-latex">Serializing to LaTeX<a href="#serializing-to-latex" class="hash-link" aria-label="Direct link to Serializing to LaTeX" title="Direct link to Serializing to LaTeX">​</a></h2>
<p><strong>To serialize an expression to a LaTeX string</strong>, read the <code>expr.latex</code>
property.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">console</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">log</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">ce</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">box</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">[</span><span class="token string" style="color:var(--base-0b)">&quot;Add&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">[</span><span class="token string" style="color:var(--base-0b)">&quot;Power&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;x&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--base-09)">3</span><span class="token punctuation" style="color:var(--base-06)">]</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--base-09)">2</span><span class="token punctuation" style="color:var(--base-06)">]</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">latex</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token comment" style="color:var(--base-05)">// ➔  &quot;x^3 + 2&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="customizing-parsing">Customizing Parsing<a href="#customizing-parsing" class="hash-link" aria-label="Direct link to Customizing Parsing" title="Direct link to Customizing Parsing">​</a></h2>
<p>The LaTeX parsing can be customized by providing a <code>ParseLatexOptions</code> object as
the second argument to the <code>ce.parse()</code> function.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="customizing-parsing-of-numbers">Customizing Parsing of Numbers<a href="#customizing-parsing-of-numbers" class="hash-link" aria-label="Direct link to Customizing Parsing of Numbers" title="Direct link to Customizing Parsing of Numbers">​</a></h3>
<p>See the <a href="#number-formatting">Number Formatting</a> section for details on how to
customize the parsing of numbers. Most of the same options are available for
parsing as for serialization.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-parsing-options">Other Parsing Options<a href="#other-parsing-options" class="hash-link" aria-label="Direct link to Other Parsing Options" title="Direct link to Other Parsing Options">​</a></h3>
<table><thead><tr><th style="text-align:left">Key</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>skipSpace</code></td><td style="text-align:left">If <code>true</code>, ignore space characters in a math zone. Default is <code>true</code>.</td></tr><tr><td style="text-align:left"><code>parseNumbers</code></td><td style="text-align:left">When parsing a decimal number, e.g. <code>3.1415</code>:<br>- <code>&quot;auto&quot;</code> or <code>&quot;decimal&quot;</code>: if a decimal number, parse it as an approximate   decimal number with a whole part and a fractional part<br> - <code>&quot;rational&quot;</code>: if a decimal number, parse it as an exact rational number with a numerator  and a denominator. If not a decimal number, parse it as a regular number.<br>- <code>&quot;never&quot;</code>: do not parse numbers, instead return each token making up the number (minus sign, digits, decimal marker, etc...).<br><br> <strong>Note</strong>: if the number includes repeating digits (e.g. <code>1.33(333)</code>), it will be parsed as a decimal number even if this setting is <code>&quot;rational&quot;</code>. <strong>Default</strong>: <code>&quot;auto&quot;</code></td></tr><tr><td style="text-align:left"><code>preserveLatex</code></td><td style="text-align:left">If <code>true</code>, the expression will be decorated with the LaTeX fragments corresponding to each element of the expression. The top-level expression, that is the one returned by <code>parse()</code>, will include the verbatim LaTeX input that was parsed. The sub-expressions may contain a slightly different LaTeX, for example with consecutive spaces replaced by one, with comments removed, and with some low-level LaTeX commands replaced, for example <code>\egroup</code> and <code>\bgroup</code>. <strong>Default:</strong> <code>false</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="getidentifiertype"><code>getIdentifierType</code><a href="#getidentifiertype" class="hash-link" aria-label="Direct link to getidentifiertype" title="Direct link to getidentifiertype">​</a></h4>
<p>This handler is invoked when the parser encounters an identifier
that has not yet been declared.</p>
<p>The <code>identifier</code> argument is a <a href="/math-json#identifiers">valid identifier</a>.</p>
<p>The handler can return:</p>
<ul>
<li><code>&quot;variable&quot;</code>: the identifier is a variable</li>
<li><code>&quot;function&quot;</code>: the identifier is a function name. If an apply
function operator (typically, parentheses) follow, they will be parsed
as arguments to the function.</li>
<li><code>&quot;unknown&quot;</code>: the identifier is not recognized.</li>
</ul>
<code-playground><div slot="javascript">console.info(ce.parse(&quot;f(x)&quot;, {
<!-- -->  <!-- -->getIdentifierType: (identifier) =&gt; {
<!-- -->    <!-- -->if (identifier === &quot;f&quot;) {
<!-- -->      <!-- -->return &quot;function&quot;;
<!-- -->    <!-- -->}
<!-- -->    <!-- -->return &quot;unknown&quot;;
<!-- -->  <!-- -->},
<!-- -->}).json);
</div></code-playground>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parseunexpectedtoken"><code>parseUnexpectedToken</code><a href="#parseunexpectedtoken" class="hash-link" aria-label="Direct link to parseunexpectedtoken" title="Direct link to parseunexpectedtoken">​</a></h4>
<p>This handler is invoked when the parser encounters a token that it does not
know how to handle.</p>
<p>The <code>lhs</code> argument is the previous token, if any.</p>
<p>The handler can access the unexpected token with <code>parser.peek</code>. If
it is a token that should be recognized, the handler can consume it
by calling <code>parser.nextToken()</code>.</p>
<p>The handler should return an expression or <code>null</code> if the token is not
recognized.</p>
<code-playground><div slot="javascript">console.info(ce.parse(&quot;3\\frac{1}{\\foo}&quot;, {
<!-- -->  <!-- -->parseUnexpectedToken: (lhs, parser) =&gt; {
<!-- -->    <!-- -->if (parser.peek === &#x27;\\foo&#x27;) {
<!-- -->      <!-- -->parser.nextToken();
<!-- -->      <!-- -->return &quot;foo&quot;;
<!-- -->    <!-- -->}
<!-- -->    <!-- -->return null;
<!-- -->  <!-- -->},
<!-- -->}).json);
</div></code-playground>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="customizing-serialization">Customizing Serialization<a href="#customizing-serialization" class="hash-link" aria-label="Direct link to Customizing Serialization" title="Direct link to Customizing Serialization">​</a></h2>
<p>While <code>expr.latex</code> provides a simple, default serialization to LaTeX, it may not
always be the most suitable for your needs.</p>
<p><strong>To customize the serialization to LaTeX</strong>, use the <code>expr.toLatex()</code> method.</p>
<p>The argument of the <code>expr.toLatex()</code> method is a <code>SerializeLatexOptions</code> object
that can be used to customize the serialization. The keys are explained in the
sections below.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="number-formatting">Number Formatting<a href="#number-formatting" class="hash-link" aria-label="Direct link to Number Formatting" title="Direct link to Number Formatting">​</a></h3>
<table><thead><tr><th style="text-align:left">Key</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>fractionalDigits</code></td><td style="text-align:left">The number of decimal places to use when formatting numbers. Use <code>&quot;max&quot;</code> to include all available digits and <code>&quot;auto&quot;</code> to use the same precision as for evaluation. Default is <code>&quot;auto&quot;</code>.</td></tr><tr><td style="text-align:left"><code>notation</code></td><td style="text-align:left">The notation to use for numbers. Use <code>&quot;auto&quot;</code>, <code>&quot;scientific&quot;</code>, or <code>&quot;engineering&quot;</code>. Default is <code>&quot;auto&quot;</code>.</td></tr><tr><td style="text-align:left"><code>avoidExponentsInRange</code></td><td style="text-align:left">A tuple of two values representing a range of exponents. If the exponent for the number is within this range, a decimal notation is used. Otherwise, the number is displayed with an exponent. Default is <code>[-6, 20]</code>.</td></tr><tr><td style="text-align:left"><code>digitGroupSeparator</code></td><td style="text-align:left">The LaTeX string used to separate group of digits, for example thousands. Default is <code>&quot;\,&quot;</code>. To turn off group separators, set to <code>&quot;&quot;</code>. If a string tuple is provide, the first string is used to group digits in the whole part and the second string to group digits in the fractional part.</td></tr><tr><td style="text-align:left"><code>digitGroupSize</code></td><td style="text-align:left">The number of digits in a group. If set to <code>&quot;lakh&quot;</code> the digits are in groups of 2, except for the last group which has 3 digits. If a tupe is provided, the first element is used for the whole part and the second element for the fractional part. Default is <code>3</code>.</td></tr><tr><td style="text-align:left"><code>exponentProduct</code></td><td style="text-align:left">A LaTeX string inserted before an exponent, if necessary. Default is <code>&quot;\cdot&quot;</code>.</td></tr><tr><td style="text-align:left"><code>beginExponentMarker</code></td><td style="text-align:left">A LaTeX string used as template to format an exponent. Default value is <code>&quot;10^{&quot;</code>.</td></tr><tr><td style="text-align:left"><code>endExponentMarker</code></td><td style="text-align:left">A LaTeX string used as template to format an exponent. Default value is <code>&quot;}&quot;</code>.</td></tr><tr><td style="text-align:left"><code>truncationMarker</code></td><td style="text-align:left">A LaTeX string used to indicate that a number has more precision than what is displayed. Default is <code>&quot;\ldots&quot;</code>.</td></tr><tr><td style="text-align:left"><code>repeatingDecimal</code></td><td style="text-align:left">The decoration around repeating digits. Valid values are <code>&quot;auto&quot;</code>, <code>&quot;vinculum&quot;</code>, <code>&quot;dots&quot;</code>, <code>&quot;parentheses&quot;</code>,  <code>&quot;arc&quot;</code> and <code>&quot;none&quot;</code>. Default is <code>&quot;auto&quot;</code>.</td></tr></tbody></table>
<code-playground><div slot="javascript">console.log(ce.parse(&quot;\\pi&quot;).N().toLatex({
<!-- -->    <!-- -->fractionalDigits: 6,
<!-- -->}));
</div></code-playground>
<code-playground><div slot="javascript">console.log(ce.box(700).toLatex({
<!-- -->  <!-- -->notation: &quot;scientific&quot;,
<!-- -->  <!-- -->avoidExponentsInRange: null,
<!-- -->  <!-- -->exponentProduct: &quot;\\times&quot;
<!-- -->}));
<!-- -->// ➔ &quot;7\times10^{2}&quot;
<!-- -->
<!-- -->console.log(ce.box(123456.789).toLatex({
<!-- -->  <!-- -->notation: &quot;scientific&quot;,
<!-- -->  <!-- -->avoidExponentsInRange: null,
<!-- -->  <!-- -->exponentProduct: &quot;\\times&quot;,
<!-- -->}));
<!-- -->// ➔ &quot;1.234\,567\,89\times10^{5}&quot;
</div></code-playground>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="customizing-the-decimal-separator">Customizing the Decimal Separator<a href="#customizing-the-decimal-separator" class="hash-link" aria-label="Direct link to Customizing the Decimal Separator" title="Direct link to Customizing the Decimal Separator">​</a></h3>
<p>The world is
<a href="https://en.wikipedia.org/wiki/Decimal_separator#/media/File:DecimalSeparator.svg" target="_blank" rel="noopener noreferrer">about evenly split</a>
between using a dot or a comma as a decimal marker.</p>
<p>By default, the ComputeEngine is configured to use a dot, i.e. <code class="language-math math-inline">3.1415</code>.</p>
<p><strong>To use a comma as a decimal marker</strong>, set the <code>decimalSeparator</code> option:</p>
<code-playground><div slot="javascript">console.log(ce.box(3.141).toLatex({
<!-- -->    <!-- -->decimalSeparator: &quot;{,}&quot;
<!-- -->}));
</div></code-playground>
<p>Note that in LaTeX, in order to get the correct spacing around the comma, it
must be surrounded by curly brackets.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="special-numbers-and-symbols">Special Numbers and Symbols<a href="#special-numbers-and-symbols" class="hash-link" aria-label="Direct link to Special Numbers and Symbols" title="Direct link to Special Numbers and Symbols">​</a></h3>
<table><thead><tr><th style="text-align:left">Key</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>positiveInfinity</code></td><td style="text-align:left">The LaTeX string used to represent positive infinity. Default is <code>&quot;\infty&quot;</code> <code class="language-math math-inline">\infty</code>.</td></tr><tr><td style="text-align:left"><code>negativeInfinity</code></td><td style="text-align:left">The LaTeX string used to represent negative infinity. Default is <code>&quot;-\infty&quot;</code> <code class="language-math math-inline">-\infty</code>.</td></tr><tr><td style="text-align:left"><code>imaginaryUnit</code></td><td style="text-align:left">The LaTeX string used to represent the imaginary unit symbol. Default is <code>&quot;\imaginaryI&quot;</code> <code class="language-math math-inline">\imaginaryI</code></td></tr><tr><td style="text-align:left"><code>notANumber</code></td><td style="text-align:left">The LaTeX string to represent the number NaN. Default value is <code>&quot;\operatorname{NaN}&quot;</code> <code class="language-math math-inline">\operatorname{NaN}</code>.</td></tr><tr><td style="text-align:left"><code>prettify</code></td><td style="text-align:left">If <code>true</code>, the output will be formatted to be more human-readable. Default is <code>false</code>.</td></tr><tr><td style="text-align:left"><code>invisibleMultiply</code></td><td style="text-align:left">A LaTeX string to use as an invisible multiply operator between expressions. Use <code>&quot;\cdot&quot;</code> to use a <code class="language-math math-inline">\cdot</code>. Default is <code>&quot;&quot;</code>.</td></tr><tr><td style="text-align:left"><code>invisiblePlus</code></td><td style="text-align:left">A LaTeX string to use as an invisible plus operator between expressions, for example with mixed numbers. Leave it empty to join the main number and the fraction. Use <code>&quot;+&quot;</code> to insert an explicit <code class="language-math math-inline">+</code> operator between them. Default is <code>&quot;&quot;</code>.</td></tr><tr><td style="text-align:left"><code>multiply</code></td><td style="text-align:left">A LaTeX string to use as a multiply operator between expressions. Use <code>&quot;\cdot&quot;</code> to use a <code class="language-math math-inline">\cdot</code>. Default is <code>&quot;\times&quot;</code> <code class="language-math math-inline">\times</code>.</td></tr><tr><td style="text-align:left"><code>missingSymbol</code></td><td style="text-align:left">A LaTeX string to use when a symbol is missing. Default is <code>&quot;\placeholder{}&quot;</code> <code class="language-math math-inline">\placeholder{}</code>.</td></tr></tbody></table>
<code-playground><div slot="javascript">console.log(ce.parse(&quot;3\\frac{1}{4}&quot;).toLatex({
<!-- -->    <!-- -->invisiblePlus: &quot;+&quot;
<!-- -->}));
</div></code-playground>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="customizing-the-serialization-style">Customizing the Serialization Style<a href="#customizing-the-serialization-style" class="hash-link" aria-label="Direct link to Customizing the Serialization Style" title="Direct link to Customizing the Serialization Style">​</a></h3>
<p>In addition, the keys <code>applyFunctionStyle</code>, <code>groupStyle</code>, <code>powerStyle</code>,
<code>rootStyle</code>, <code>fractionStyle</code>, <code>logicStyle</code> and <code>numericSetStyle</code>
can be used to customize the serialization of specific types of expressions.</p>
<p>For example, a group can be indicated by simple parentheses, or by a
<code>\left...\right</code> command. A fraction can be indicated by a
<code>\frac{}{}</code> command or by a <code>{}{}^{-1}</code>.</p>
<p>The Compute Engine includes some built-in defaults, but they can be customized
as desired. These style options are functions that take an expression fragment
and return a string indicating the desired style.</p>
<p>For example to always represent fractions with a solidus (forward slash) use:</p>
<code-playground><div slot="javascript">console.log(ce.parse(&quot;\\frac{3}{5}&quot;).toLatex({
<!-- -->  <!-- -->fractionStyle: () =&gt; &quot;quotient&quot;
<!-- -->}));
<!-- -->
<!-- -->console.log(ce.parse(&quot;\\frac{3}{5}&quot;).toLatex({
<!-- -->  <!-- -->fractionStyle: () =&gt; &quot;inline-solidus&quot;
<!-- -->}));
<!-- -->
</div></code-playground>
<p>The style option handler has two arguments:</p>
<ul>
<li>the expression fragment being styled</li>
<li>the depth/level of the expression in the overall expression</li>
</ul>
<p>For example, to serialize fractions deeper than level 0 as
an inline solidus:</p>
<code-playground><div slot="javascript">
<!-- -->console.log(ce.parse(&quot;\\frac{a}{b}+\\sqrt{\\frac{c}{d}}&quot;).toLatex({
<!-- -->  <!-- -->fractionStyle: (expr, level) =&gt;
<!-- -->     <!-- -->level &gt; 0 ? &quot;inline-solidus&quot; : &quot;quotient&quot;
<!-- -->}));
</div></code-playground>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-application">Function Application<a href="#function-application" class="hash-link" aria-label="Direct link to Function Application" title="Direct link to Function Application">​</a></h4>
<p><strong>To customize the serialization of function application</strong>, use the
<code>applyFunctionStyle</code> style option handler.</p>
<code-playground><div slot="javascript">console.log(ce.parse(&quot;\\sin x&quot;).toLatex({
<!-- -->  <!-- -->applyFunctionStyle: () =&gt; &quot;big&quot;
<!-- -->}));
</div></code-playground>
<table><thead><tr><th style="text-align:left"></th><th style="text-align:left"></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left"><code>&quot;paren&quot;</code></td><td style="text-align:left"><code>\sin(x)</code></td><td style="text-align:left"><code class="language-math math-inline">\sin(x)</code></td></tr><tr><td style="text-align:left"><code>&quot;leftright&quot;</code></td><td style="text-align:left"><code>\sin\left(x\right)</code></td><td style="text-align:left"><code class="language-math math-inline">\sin\left(x\right)</code></td></tr><tr><td style="text-align:left"><code>&quot;big&quot;</code></td><td style="text-align:left"><code>\sin\bigl(x\bigr)</code></td><td style="text-align:left"><code class="language-math math-inline">\sin\bigl(x\bigr)</code></td></tr><tr><td style="text-align:left"><code>&quot;none&quot;</code></td><td style="text-align:left"><code>\sin x</code></td><td style="text-align:left"><code class="language-math math-inline">\sin x</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="group">Group<a href="#group" class="hash-link" aria-label="Direct link to Group" title="Direct link to Group">​</a></h4>
<p><strong>To customize the serialization of groups</strong>, use the <code>groupStyle</code> style option
handler.</p>
<code-playground><div slot="javascript">console.log(ce.parse(&quot;(a+b)&quot;, {canonical: false}).toLatex({
<!-- -->  <!-- -->groupStyle: () =&gt; &quot;big&quot;
<!-- -->}));
</div></code-playground>
<table><thead><tr><th style="text-align:left"></th><th style="text-align:left"></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left"><code>&quot;paren&quot;</code></td><td style="text-align:left"><code>x(a+b)</code></td><td style="text-align:left"><code class="language-math math-inline">x(a+b)</code></td></tr><tr><td style="text-align:left"><code>&quot;leftright&quot;</code></td><td style="text-align:left"><code>x\left(a+b\right)</code></td><td style="text-align:left"><code class="language-math math-inline">x\left(a+b\right)</code></td></tr><tr><td style="text-align:left"><code>&quot;big&quot;</code></td><td style="text-align:left"><code>x\bigl(a+b\bigr)</code></td><td style="text-align:left"><code class="language-math math-inline">x\bigl(a+b\bigr)</code></td></tr><tr><td style="text-align:left"><code>&quot;none&quot;</code></td><td style="text-align:left"><code>x a+b</code></td><td style="text-align:left"><code class="language-math math-inline"> x a+b</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="root">Root<a href="#root" class="hash-link" aria-label="Direct link to Root" title="Direct link to Root">​</a></h4>
<p><strong>To customize how roots are serialized</strong>, use the <code>rootStyle</code> style option
handler.</p>
<code-playground><div slot="javascript">console.log(ce.parse(&quot;\\sqrt{2}&quot;).toLatex({
<!-- -->  <!-- -->rootStyle: () =&gt; &quot;solidus&quot;
<!-- -->}));
</div></code-playground>
<table><thead><tr><th style="text-align:left"></th><th style="text-align:left"></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left"><code>&quot;radical&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;quotient&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;solidus&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fraction">Fraction<a href="#fraction" class="hash-link" aria-label="Direct link to Fraction" title="Direct link to Fraction">​</a></h4>
<p><strong>To customize how fractions are serialized</strong>, use the <code>fractionStyle</code> style
option handler.</p>
<code-playground><div slot="javascript">console.log(ce.parse(&quot;\\frac{3}{5}&quot;).toLatex({
<!-- -->  <!-- -->fractionStyle: () =&gt; &quot;nice-solidus&quot;
<!-- -->}));
</div></code-playground>
<table><thead><tr><th style="text-align:left"></th><th style="text-align:left"></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left"><code>&quot;quotient&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;inline-solidus&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;nice-solidus&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;reciprocal&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;factor&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="logic">Logic<a href="#logic" class="hash-link" aria-label="Direct link to Logic" title="Direct link to Logic">​</a></h4>
<p><strong>To customize how logic expressions are serialized</strong>, use the <code>logicStyle</code> style
option handler.</p>
<code-playground><div slot="javascript">console.log(ce.parse(&quot;p\\land q&quot;).toLatex({
<!-- -->  <!-- -->logicStyle: () =&gt; &quot;word&quot;
<!-- -->}));
</div></code-playground>
<table><thead><tr><th style="text-align:left"></th><th style="text-align:left"></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left"><code>&quot;word&quot;</code></td><td style="text-align:left"><code>a \text{ and } b</code></td><td style="text-align:left"><code class="language-math math-inline">a \text{ and } b</code></td></tr><tr><td style="text-align:left"><code>&quot;boolean&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;uppercase-word&quot;</code></td><td style="text-align:left"><code>p \text{ AND } q</code></td><td style="text-align:left"><code class="language-math math-inline">p \text{ AND } q</code></td></tr><tr><td style="text-align:left"><code>&quot;punctuation&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="power">Power<a href="#power" class="hash-link" aria-label="Direct link to Power" title="Direct link to Power">​</a></h4>
<p><strong>To customize how powers are serialized</strong>, use the <code>powerStyle</code> style option
handler.</p>
<code-playground><div slot="javascript">console.log(ce.parse(&quot;x^2&quot;).toLatex({
<!-- -->  <!-- -->powerStyle: () =&gt; &quot;solidus&quot;
<!-- -->}));
</div></code-playground>
<table><thead><tr><th style="text-align:left"></th><th style="text-align:left"></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left"><code>&quot;root&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;solidus&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;quotient&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="numeric-sets">Numeric Sets<a href="#numeric-sets" class="hash-link" aria-label="Direct link to Numeric Sets" title="Direct link to Numeric Sets">​</a></h4>
<p><strong>To customize how numeric sets are serialized</strong>, use the <code>numericSetStyle</code> style
option handler.</p>
<code-playground><div slot="javascript">console.log(ce.parse(&quot;x \\in \\Z&quot;).toLatex({
<!-- -->  <!-- -->numericSetStyle: () =&gt; &quot;interval&quot;
<!-- -->}));
</div></code-playground>
<table><thead><tr><th style="text-align:left"></th><th style="text-align:left"></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left"><code>&quot;compact&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;regular&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;interval&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;set-builder&quot;</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="customizing-the-latex-dictionary">Customizing the LaTeX Dictionary<a href="#customizing-the-latex-dictionary" class="hash-link" aria-label="Direct link to Customizing the LaTeX Dictionary" title="Direct link to Customizing the LaTeX Dictionary">​</a></h2>
<p>The <a href="/math-json/">MathJSON format</a> is independent of any source or
target language (LaTeX, MathASCII, Python, etc...) or of any specific
interpretation of the identifiers used in a MathJSON expression (<code>&quot;Pi&quot;</code>,
<code>&quot;Sin&quot;</code>, etc...).</p>
<p>A <strong>LaTeX dictionary</strong> defines how a MathJSON expression can be expressed as a
LaTeX string (<strong>serialization</strong>) or constructed from a LaTeX string
(<strong>parsing</strong>).</p>
<p>The Compute Engine includes a default LaTeX dictionary to parse and serialize
common math expressions.</p>
<p>It includes definitions such as:</p>
<ul>
<li>&quot;<em>The <code>Power</code> function is represented as &quot;<code>x^{n}</code>&quot;</em>&quot;</li>
<li>&quot;<em>The <code>Divide</code> function is represented as &quot;<code>\frac{x}{y}</code>&quot;</em>&quot;.</li>
</ul>
<p>Note that the dictionary will include LaTeX commands as triggers. LaTeX commands
are usually prefixed with a backslash, such as <code>\frac</code> or <code>\pm</code>. It will also
reference MathJSON identifiers. MathJSON identifiers are usually capitalized,
such as <code>Divide</code> or <code>PlusMinus</code> and are not prefixed with a backslash.</p>
<p><strong>To extend the LaTeX syntax</strong> update the <code>latexDictionary</code> property of the
Compute Engine</p>
<code-playground><div slot="javascript">ce.latexDictionary = [
<!-- -->  <!-- -->// Include all the entries from the default dictionary...
<!-- -->  <!-- -->...ce.latexDictionary,
<!-- -->  <!-- -->// ...and add the `\smoll{}{}` command
<!-- -->  <!-- -->{
<!-- -->    <!-- -->// The parse handler below will be invoked when this LaTeX command
<!-- -->    <!-- -->// is encountered
<!-- -->    <!-- -->latexTrigger: &#x27;\\smoll&#x27;,
<!-- -->    <!-- -->parse: (parser) =&gt; {
<!-- -->      <!-- -->// We&#x27;re expecting two arguments, so we&#x27;re calling
<!-- -->      <!-- -->// `parseGroup()` twice. If `parseGroup()` returns `null`,
<!-- -->      <!-- -->// we assume that the argument is missing.
<!-- -->      <!-- -->return [
<!-- -->        <!-- -->&quot;Divide&quot;,
<!-- -->        <!-- -->parser.parseGroup() ?? [&quot;Error&quot;, &quot;&#x27;missing&#x27;&quot;],
<!-- -->        <!-- -->parser.parseGroup() ?? [&quot;Error&quot;, &quot;&#x27;missing&#x27;&quot;],
<!-- -->      <!-- -->];
<!-- -->    <!-- -->},
<!-- -->  <!-- -->},
<!-- -->];
<!-- -->
<!-- -->console.log(ce.parse(&#x27;\\smoll{1}{5}&#x27;).json);
<!-- -->// The &quot;Divide&quot; get represented as a &quot;Rational&quot; by default when
<!-- -->// both arguments are integers.
<!-- -->// ➔ [&quot;Rational&quot;, 1, 5]
</div></code-playground>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Do not modify the <code>ce.latexDictionary</code> array directly. Instead, create a new
array that includes the entries from the default dictionary, and add your own
entries. Later entries will override earlier ones, so you can replace or
modify existing entries by providing a new definition for them.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="latex-dictionary-entries">LaTeX Dictionary Entries<a href="#latex-dictionary-entries" class="hash-link" aria-label="Direct link to LaTeX Dictionary Entries" title="Direct link to LaTeX Dictionary Entries">​</a></h3>
<p>Each entry in the LaTeX dictionary is an object with the following properties:</p>
<ul>
<li>
<p><code>kind</code></p>
<p>The kind of expression associated with this entry.</p>
<p>Valid values are <code>prefix</code>, <code>postfix</code>, <code>infix</code>, <code>expression</code>, <code>function</code>, <code>symbol</code>,
<code>environment</code> and <code>matchfix</code>.</p>
<p>If not provided, the default is <code>expression</code>.</p>
<p>The meaning of the values and how to use them is explained below.</p>
<p>Note that it is possible to provide multiple entries with the same <code>latexTrigger</code>
or <code>identifierTrigger</code> but with different <code>kind</code> properties. For example, the
<code>+</code> operator is both an <code>infix</code> (binary) and a <code>prefix</code> (unary) operator.</p>
</li>
<li>
<p><code>latexTrigger</code></p>
<p>A LaTeX fragment that will trigger the entry. For example, <code>^{+}</code> or <code>\mathbb{D}</code>.</p>
</li>
<li>
<p><code>identifierTrigger</code></p>
<p>A string, usually wrapped in a LaTeX command, that will trigger the entry.</p>
<p>For example, if <code>identifierTrigger</code> is <code>floor</code>, the LaTeX
command <code>\mathrm{floor}</code> or <code>\operatorname{floor}</code> will trigger the entry.</p>
<p>Only one of <code>latexTrigger</code> or <code>identifierTrigger</code> should be provided.</p>
<p>If <code>kind</code>  is <code>&quot;environment&quot;</code>, only <code>identifierTrigger</code> is valid, and it
represents the name of the environment.</p>
<p>If kind is <code>matchfix</code>, both <code>openTrigger</code> and <code>closeTrigger</code> must be provided instead.</p>
</li>
<li>
<p><code>parse</code></p>
<p>A handler that will be invoked when the trigger is encountered in the
LaTeX input.</p>
<p>It will be passed a <code>parser</code> object that can be used to parse the
input.</p>
<p>The <code>parse</code> handler is invoked when the preconditions for the entry are met.
For example, an <code>infix</code> entry will only be invoked if the trigger is
encountered in the LaTeX input and there is a left-hand side to the operator.</p>
<p>The signature of the <code>parse</code> handler will vary depending on the <code>kind</code>.
For example, for an entry of kind <code>infix</code> the left-hand side argument
will be passed to the <code>parse</code> handler. See below for more info about parsing
for each <code>kind</code>.</p>
<p>The <code>parse</code> handler should return a MathJSON expression or <code>null</code> if the
expression is not recognized. When <code>null</code> is returned, the Compute Engine
Natural Parser will backtrack and attempt to find another handler that matches
the current token. If there can be no ambiguity and the expression is not
recognized, the <code>parse</code> handler should return an <code>[&quot;Error&quot;]</code> expression. In
general, it is better to return <code>null</code> and let the Compute Engine Natural
Parser attempt to find another handler that matches the current token.
If none is found, an <code>[&quot;Error&quot;]</code> expression will be returned.</p>
</li>
<li>
<p><code>serialize</code></p>
<p>A handler that will be invoked when the <code>expr.latex</code> property is
read. It will be passed a <code>Serializer</code> object that can be used to serialize
the expression. The <code>serialize</code> handler should return a LaTeX string. See
below for more info about serialization.</p>
<p>If a <code>serialize</code> handler is provided, the <code>name</code> property must be provided as
well.</p>
</li>
<li>
<p><code>name</code></p>
<p>The name of the MathJSON identifier associated with this entry.</p>
<p>If provided, a default <code>parse</code> handler will be used that is equivalent to:
<code>parse: name</code>.</p>
<p>It is possible to have multiple definitions with the same triggers, but the
<code>name</code> property must be unique. The record with the <code>name</code> property will be used
to serialize the expression. A <code>serialize</code> handler is invalid if the <code>name</code>
property is not provided.</p>
<p>The <code>name</code> property must be unique. However, multiple entries
can have different triggers that produce the same expression. This is useful
for synonyms, such as <code>\operatorname{floor}</code> and <code>\lfloor</code>...<code>\rfloor</code>.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="expressions">Expressions<a href="#expressions" class="hash-link" aria-label="Direct link to Expressions" title="Direct link to Expressions">​</a></h4>
<p>The most general type of entry is one of kind <code>expression</code>. If no <code>kind</code>
property is provided, the kind is assumed to be <code>expression</code>.</p>
<p>For entries of kind <code>expression</code> the <code>parse</code> handler is invoked when the trigger
is encountered in the LaTeX input. The <code>parse</code> handler is passed a <code>parser</code>
object that can be used to parse the input.</p>
<p>The kind <code>expression</code> is suitable for a simple symbol, for example a
mathematical constant. It can also be used for more complex constructs, such as
to parse a series of tokens representing an integral expression. In this case,
the <code>parse</code> handler would be responsible for parsing the entire expression and
would use the <code>parser</code> object to parse the tokens.</p>
<p>If the tokens are not recognized, the <code>parse</code> handler should return <code>null</code> and
the parser will continue to look for another handler that matches the current
token.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h4>
<p>The <code>function</code> kind is a special case of <code>expression</code> where the expression is a
function, possibly using multi-character identifiers, as in
<code>\operatorname{concat}</code>.</p>
<p>Unlike an <code>expression</code> entry, after the <code>parse</code> handler is invoked, the
parser will look for a pair of parentheses to parse the arguments of the
function and apply them to the function.</p>
<p>The parse handler should return the identifier corresponding to the function,
such as <code>Concatenate</code>. As a shortcut, the <code>parse</code> handler can be provided as an
Expression. For example:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">kind</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;function&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">identifierTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;concat&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">parse</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;Concatenate&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="operators-prefix-infix-postfix">Operators: prefix, infix, postfix<a href="#operators-prefix-infix-postfix" class="hash-link" aria-label="Direct link to Operators: prefix, infix, postfix" title="Direct link to Operators: prefix, infix, postfix">​</a></h4>
<p>The <code>prefix</code>, <code>infix</code> and <code>postfix</code> kinds are used for operators.</p>
<p>Entries for <code>prefix</code>, <code>infix</code> and <code>postfix</code> operators must include a
<code>precedence</code> property. The <code>precedence</code> property is a number that indicates the
precedence of the operator. The higher the number, the higher the precedence,
that is the more &quot;binding&quot; the operator is.</p>
<p>For example, the <code>precedence</code> of the <code>Add</code> operator is 275
(<code>ADDITION_PRECEDENCE</code>), while the <code>precedence</code> of the <code>Multiply</code> operator is
390 (<code>MULTIPLICATION_PRECEDENCE</code>).</p>
<p>In <code>1 + 2 * 3</code>, the <code>Multiply</code> operator has a <strong>higher</strong> precedence than the
<code>Add</code> operator, so it is applied first.</p>
<p>The precedence range is an integer from 0 to 1000.</p>
<p>Here are some rough ranges for the precedence:</p>
<ul>
<li>800: prefix and postfix operators: <code>\lnot</code> etc...<!-- -->
<ul>
<li><code>POSTFIX_PRECEDENCE</code> = 810: <code>!</code>, <code>&#x27;</code></li>
</ul>
</li>
<li>700: some arithmetic operators<!-- -->
<ul>
<li><code>EXPONENTIATION_PRECEDENCE</code> = 700: <code>^</code></li>
</ul>
</li>
<li>600: some binary operators<!-- -->
<ul>
<li><code>DIVISION_PRECEDENCE</code> = 600: <code>\div</code></li>
</ul>
</li>
<li>300: some logic and arithmetic operators: <code>\land</code>, <code>\lor</code> etc...<!-- -->
<ul>
<li><code>MULTIPLICATION_PRECEDENCE</code> = 390: <code>\times</code></li>
</ul>
</li>
<li>200: arithmetic operators, inequalities:<!-- -->
<ul>
<li><code>ADDITION_PRECEDENCE</code> = 275: <code>+</code> <code>-</code></li>
<li><code>ARROW_PRECEDENCE</code> = 270: <code>\to</code> <code>\rightarrow</code></li>
<li><code>ASSIGNMENT_PRECEDENCE</code> = 260: <code>:=</code></li>
<li><code>COMPARISON_PRECEDENCE</code> = 245: <code>\lt</code> <code>\gt</code></li>
<li>241: <code>\leq</code></li>
</ul>
</li>
<li>0: <code>,</code>, <code>;</code>, etc...</li>
</ul>
<p>The <code>infix</code> kind is used for binary operators (operators with a left-hand-side
and right-hand-side).</p>
<p>The <code>parse</code> handler will be passed a <code>parser</code> object and
the left-hand side of the operator, for <code>postfix</code> and <code>infix</code> operators.</p>
<p>The <code>parser</code> object can be used to parse the right-hand side of the expression.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">kind</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;infix&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">latexTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;\\oplus&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">precedence</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token constant" style="color:var(--base-09)">ADDITION_PRECEDENCE</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--base-0a)">parse</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">parser</span><span class="token parameter punctuation" style="color:var(--base-06)">,</span><span class="token parameter"> lhs</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--base-0e)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">[</span><span class="token string" style="color:var(--base-0b)">&quot;Concatenate&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> lhs</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> parser</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">parseExpression</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">]</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>prefix</code> kind is used for unary operators.</p>
<p>The <code>parse</code> handler will be passed a <code>parser</code> object.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">kind</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;prefix&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">latexTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;\\neg&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">precedence</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token constant" style="color:var(--base-09)">ADDITION_PRECEDENCE</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--base-0a)">parse</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">parser</span><span class="token parameter punctuation" style="color:var(--base-06)">,</span><span class="token parameter"> lhs</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--base-0e)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">[</span><span class="token string" style="color:var(--base-0b)">&quot;Negate&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> lhs</span><span class="token punctuation" style="color:var(--base-06)">]</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>postfix</code> kind is used for postfix operators. The <code>parse</code> handler will be
passed a <code>parser</code> object and the left-hand side of the operator.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">kind</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;postfix&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">latexTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;\\!&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--base-0a)">parse</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">parser</span><span class="token parameter punctuation" style="color:var(--base-06)">,</span><span class="token parameter"> lhs</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--base-0e)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">[</span><span class="token string" style="color:var(--base-0b)">&quot;Factorial&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> lhs</span><span class="token punctuation" style="color:var(--base-06)">]</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="environment">Environment<a href="#environment" class="hash-link" aria-label="Direct link to Environment" title="Direct link to Environment">​</a></h4>
<p>The <code>environment</code> kind is used for LaTeX environments.</p>
<p>The `identifierTrigger property in that case is the name of the environment.</p>
<p>The <code>parse</code> handler wil be passed a <code>parser</code> object. The <code>parseTabular()</code>
method can be used to parse the rows and columns of the environment. It
returns a two dimensional array of expressions.</p>
<p>The <code>parse</code> handler should return a MathJSON expression.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">kind</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;environment&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">identifierTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;matrix&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--base-0a)">parse</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">parser</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--base-0e)">const</span><span class="token plain"> content </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> parser</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">parseTabular</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--base-0e)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">[</span><span class="token string" style="color:var(--base-0b)">&quot;Matrix&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">[</span><span class="token string" style="color:var(--base-0b)">&quot;List&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">map</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">row</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">[</span><span class="token string" style="color:var(--base-0b)">&quot;List&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> row</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">map</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">cell</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> cell</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">]</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">]</span><span class="token punctuation" style="color:var(--base-06)">]</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="matchfix">Matchfix<a href="#matchfix" class="hash-link" aria-label="Direct link to Matchfix" title="Direct link to Matchfix">​</a></h4>
<p>The <code>matchfix</code> kind is used for LaTeX commands that are used to enclose an
expression.</p>
<p>The <code>openTrigger</code> and <code>closeTrigger</code> indicate the LaTeX commands
that enclose the expression. The <code>parse</code> handler is passed a <code>parser</code> object and
the &quot;body&quot; (the expression between the open and close delimiters). The <code>parse</code>
handler should return a MathJSON expression.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">kind</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;matchfix&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">openTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;\\lvert&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">closeTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;\\rvert&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--base-0a)">parse</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">parser</span><span class="token parameter punctuation" style="color:var(--base-06)">,</span><span class="token parameter"> body</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--base-0e)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">[</span><span class="token string" style="color:var(--base-0b)">&quot;Abs&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> body</span><span class="token punctuation" style="color:var(--base-06)">]</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="parsing">Parsing<a href="#parsing" class="hash-link" aria-label="Direct link to Parsing" title="Direct link to Parsing">​</a></h3>
<p>When parsing a LaTeX string, the first step is to tokenize the string according
to the LaTeX syntax. For example, the input string <code>\frac{ab}{10}</code> will result
in the tokens <code>[&quot;\\frac&quot;, &quot;{&quot;, &quot;a&quot;, &quot;b&quot;, &quot;}&quot;, &quot;{&quot;, &quot;1&quot;, &quot;0&quot;, &quot;}&quot;]</code>.</p>
<p>Note that each LaTeX command is a single token, but that digits and ordinary
letters are each separate tokens.</p>
<p>The <code>parse</code> handler is invoked when the trigger is encountered in the LaTeX
token strings.</p>
<p>A common case is to return from the parse handler a MathJSON identifier for a
symbol or function.</p>
<p>For example, let&#x27;s say you wanted to map the LaTeX command <code>\div</code> to the
MathJSON <code>Divide</code> function. You would write:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">latexTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;\\div&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--base-0a)">parse</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">parser</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--base-0e)">return</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;Divide&quot;</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As a shortcut, you can also write:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">latexTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;\\div&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--base-0a)">parse</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;Divide&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or even more succintly:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">latexTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;\\div&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">parse</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;Divide&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The LaTeX <code>\div(1, 2)</code> would then produce the MathJSON expression
<code>[&quot;Divide&quot;, 1, 2]</code>. Note that the arguments are provided as comma-separated,
parenthesized expressions, not as LaTeX arguments in curly brackets.</p>
<p>If you need to parse some more complex LaTeX syntax, you can use the <code>parser</code>
argument of the <code>parse</code> handler. The <code>parser</code> object has numerous methods to
help you parse the LaTeX string:</p>
<ul>
<li><code>parser.peek</code> is the current token.</li>
<li><code>parser.index</code> is the index of the current token. If backtracking is
necessary, it is possible to set the index to a previous value.</li>
<li><code>parser.nextToken()</code> returns the next token and advances the index.</li>
<li><code>parser.skipSpace()</code> in LaTeX math mode, skip over &quot;space&quot; which includes
space tokens, and empty groups <code>{}</code>. Whether space tokens are skipped or not
depends on the <code>skipSpace</code> option.</li>
<li><code>parser.skipVisualSpace()</code> skip over &quot;visual space&quot; which includes space
tokens, empty groups <code>{}</code>, and commands such as <code>\,</code> and <code>\!</code>.</li>
<li><code>parser.match(token: LatexToken)</code> return true if the next token matches the
argument, or <code>null</code> otherwise.</li>
<li><code>parser.matchAll(tokens)</code> return true if the next tokens match the argument,
an array of tokens, or <code>null</code> otherwise.</li>
<li><code>parser.matchAny(tokens: LatexToken[])</code> return the next token if it matches
any of the token in the argument or <code>null</code> otherwise.</li>
<li><code>parser.matchChar()</code> return the next token if it is a plain character (e.g.
&quot;a&quot;, &#x27;+&#x27;...), or the character corresponding to a hex literal (^^ and ^^^^) or
the <code>\char</code> and <code>\unicode</code> commands</li>
<li><code>parser.parseGroup()</code> return an expression if the next token is a group begin
token <code>{</code> followed by a sequence of LaTeX tokens until a group end token <code>}</code>
is encountered, or <code>null</code> otherwise.</li>
<li><code>parser.parseToken()</code> return an expression if the next token can be parsed as
a MathJSON expression, or <code>null</code> otherwise. This is useful when the argument
of a LaTeX command can be a single token, for example for <code>\sqrt5</code>. Some, but
not all, LaTeX commands accept a single token as an argument.</li>
<li><code>parser.parseOptionalGroup()</code> return an expression if the next token is an
optional group begin token <code>[</code> followed by a sequence of LaTeX tokens until an
optional group end token <code>]</code> is encountered, or <code>null</code> otherwise.</li>
<li><code>parser.parseExpression()</code> return an expression if the next tokens can be
parsed as a MathJSON expression, or <code>null</code> otherwise. After this call, there
may be some tokens left to parse.</li>
<li><code>parser.parseArguments()</code> return an array of expressions if the next tokens
can be parsed as a sequence of MathJSON expressions separated by a comma, or
<code>null</code> otherwise. This is useful to parse the argument of a function. For
example with <code>f(x, y, z)</code>, the arguments would be <code>[x, y, z]</code>.</li>
</ul>
<p>If the <code>parse()</code> handler returns <code>null</code>, the parser will continue to look for
another handler that matches the current token.</p>
<p>Note there is a pattern in the names of the methods of the parser. The <code>match</code>
prefix means that the method will return the next token if it matches the
argument, or <code>null</code> otherwise. These methods are more primitive. The <code>parse</code>
prefix indicates that the method will return a MathJSON expression or <code>null</code>.</p>
<p>The most common usage is to call <code>parser.parseGroup()</code> to parse a group of
tokens as an argument to a LaTeX command.</p>
<p>For example:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">latexTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;\\div&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--base-0a)">parse</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">parser</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--base-0e)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">[</span><span class="token string" style="color:var(--base-0b)">&quot;Divide&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> parser</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">parseGroup</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> parser</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">parseGroup</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">]</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this case, the LaTeX input <code>\div{1}{2}</code> would produce the MathJSON expression
<code>[&quot;Divide&quot;, 1, 2]</code> (note the use of the curly brackets, rather than the
parentheses in the LaTeX input).</p>
<p>If we wanted instead to treat the <code>\div</code> command as a binary operator, we could
write:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">latexTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;\\div&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">kind</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;infix&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--base-0a)">parse</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">parser</span><span class="token parameter punctuation" style="color:var(--base-06)">,</span><span class="token parameter"> lhs</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--base-0e)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">[</span><span class="token string" style="color:var(--base-0b)">&quot;Divide&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> lhs</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> parser</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">parseExpression</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">]</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By using the <code>kind: &quot;infix&quot;</code> option, the parser will automatically insert the
left-hand side of the operator as the first argument to the <code>parse</code> handler.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="serializing">Serializing<a href="#serializing" class="hash-link" aria-label="Direct link to Serializing" title="Direct link to Serializing">​</a></h3>
<p>When serializing a MathJSON expression to a LaTeX string, the <code>serialize()</code>
handler is invoked. You must specify a <code>name</code> property to associate the
serialization handler with a MathJSON identifier.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">name</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;Concatenate&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">latexTrigger</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;\\oplus&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--base-0a)">serialize</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">serializer</span><span class="token parameter punctuation" style="color:var(--base-06)">,</span><span class="token parameter"> expr</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token string" style="color:var(--base-0b)">&quot;\\oplus&quot;</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">+</span><span class="token plain"> serializer</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">wrapArguments</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">expr</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--base-0a)">evaluate</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">ce</span><span class="token parameter punctuation" style="color:var(--base-06)">,</span><span class="token parameter"> args</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--base-0e)">let</span><span class="token plain"> result </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;&#x27;</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--base-0e)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token keyword" style="color:var(--base-0e)">const</span><span class="token plain"> arg </span><span class="token keyword" style="color:var(--base-0e)">of</span><span class="token plain"> args</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">      val </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> arg</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">numericValue</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">      </span><span class="token keyword" style="color:var(--base-0e)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">val </span><span class="token operator" style="color:var(--base-06)">===</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">null</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">||</span><span class="token plain"> ce</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">isComplex</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">val</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">||</span><span class="token plain"> Array</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">isArray</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">val</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">return</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">null</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">      </span><span class="token keyword" style="color:var(--base-0e)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">ce</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">isBignum</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">val</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">        </span><span class="token keyword" style="color:var(--base-0e)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token operator" style="color:var(--base-06)">!</span><span class="token plain">val</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">isInteger</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">||</span><span class="token plain"> val</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">isNegative</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">return</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">null</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">        result </span><span class="token operator" style="color:var(--base-06)">+=</span><span class="token plain"> val</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">toString</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">else</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token keyword" style="color:var(--base-0e)">typeof</span><span class="token plain"> val </span><span class="token operator" style="color:var(--base-06)">===</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;number&quot;</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">        </span><span class="token keyword" style="color:var(--base-0e)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token operator" style="color:var(--base-06)">!</span><span class="token plain">Number</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">isInteger</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">val</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">||</span><span class="token plain"> val </span><span class="token operator" style="color:var(--base-06)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:var(--base-09)">0</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">return</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">null</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">        result </span><span class="token operator" style="color:var(--base-06)">+=</span><span class="token plain"> val</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">toString</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--base-0e)">return</span><span class="token plain"> ce</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">parse</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the example above, the LaTeX command <code>\oplus</code> is associated with the
<code>Concatenate</code> function. The <code>serialize()</code> handler will be invoked when the
<code>expr.latex</code> property is read.</p>
<p>Note that we did not provide a <code>parse()</code> handler: if a <code>name</code> property is
provided, a default <code>parse</code> handler will be used that is equivalent to:
<code>parse: name</code>.</p>
<p>It is possible to have multiple definitions with the same triggers, but the
<code>name</code> property must be unique. The record with the <code>name</code> property will be used
to serialize the expression. A <code>serialize</code> handler is invalid if the <code>name</code>
property is not provided.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-a-new-function-with-a-mathfield">Using a New Function with a Mathfield<a href="#using-a-new-function-with-a-mathfield" class="hash-link" aria-label="Direct link to Using a New Function with a Mathfield" title="Direct link to Using a New Function with a Mathfield">​</a></h2>
<p>You may also want to use your new function with a mathfield.</p>
<p>First you need to define a LaTeX macro so that the mathfield knows how to render
this command. Let&#x27;s define the <code>\smallfrac</code> macro.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token keyword" style="color:var(--base-0e)">const</span><span class="token plain"> mfe </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> document</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">querySelector</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&quot;math-field&quot;</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">mfe</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">macros </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token operator" style="color:var(--base-06)">...</span><span class="token plain">mfe</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">macros</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">smallfrac</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token literal-property property" style="color:var(--base-0c)">args</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--base-09)">2</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token literal-property property" style="color:var(--base-0c)">def</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;{}^{#1}\\!\\!/\\!{}_{#2}&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The content of the <code>def</code> property is a LaTeX fragment that will be used to
render the <code>\\smallfrac</code> command.</p>
<p>The <code>#1</code> token in <code>def</code> is a reference to the first argument and <code>#2</code> to the
second one.</p>
<p>You may also want to define an inline shortcut to make it easier to input the
command.</p>
<p>With the code below, we define a shortcut &quot;smallfrac&quot;.</p>
<p>When typed, the shortcut is replaced with the associated LaTeX.</p>
<p>The <code>#@</code> token represents the argument to the left of the shortcut, and the <code>#?</code>
token represents a placeholder to be filled by the user.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">mfe</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">inlineShortcuts </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token operator" style="color:var(--base-06)">...</span><span class="token plain">mfe</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">inlineShortcuts</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--base-0c)">smallfrac</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;\\smallfrac{#@}{#?}&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="readMore_KWn8"><a href="/mathfield/guides/shortcuts/"><p>Learn more about <strong>Key Bindings and Inline Shortcuts</strong><svg class="icon_qj0s chevronRightBold_bbMj"><use xlink:href="/icons.svg#chevron-right-bold"></use></svg></p></a></div>
<p>You can now parse the input from a mathfield using:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">console</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">log</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">ce</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">parse</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">mfe</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">value</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">json</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Alternatively, the customized compute engine can be associated with the
mathfields in the document:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">MathfieldElement</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">computeEngine </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> ce</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">console</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">log</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">mfe</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">getValue</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&quot;math-json&quot;</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_VsjB"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/compute-engine/guides/augmenting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Custom Functions and Symbols</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/compute-engine/guides/types"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Types</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-compute-engine-natural-parser" class="table-of-contents__link toc-highlight">The Compute Engine Natural Parser</a></li><li><a href="#serializing-to-latex" class="table-of-contents__link toc-highlight">Serializing to LaTeX</a></li><li><a href="#customizing-parsing" class="table-of-contents__link toc-highlight">Customizing Parsing</a><ul><li><a href="#customizing-parsing-of-numbers" class="table-of-contents__link toc-highlight">Customizing Parsing of Numbers</a></li><li><a href="#other-parsing-options" class="table-of-contents__link toc-highlight">Other Parsing Options</a></li></ul></li><li><a href="#customizing-serialization" class="table-of-contents__link toc-highlight">Customizing Serialization</a><ul><li><a href="#number-formatting" class="table-of-contents__link toc-highlight">Number Formatting</a></li><li><a href="#customizing-the-decimal-separator" class="table-of-contents__link toc-highlight">Customizing the Decimal Separator</a></li><li><a href="#special-numbers-and-symbols" class="table-of-contents__link toc-highlight">Special Numbers and Symbols</a></li><li><a href="#customizing-the-serialization-style" class="table-of-contents__link toc-highlight">Customizing the Serialization Style</a></li></ul></li><li><a href="#customizing-the-latex-dictionary" class="table-of-contents__link toc-highlight">Customizing the LaTeX Dictionary</a><ul><li><a href="#latex-dictionary-entries" class="table-of-contents__link toc-highlight">LaTeX Dictionary Entries</a></li><li><a href="#parsing" class="table-of-contents__link toc-highlight">Parsing</a></li><li><a href="#serializing" class="table-of-contents__link toc-highlight">Serializing</a></li></ul></li><li><a href="#using-a-new-function-with-a-mathfield" class="table-of-contents__link toc-highlight">Using a New Function with a Mathfield</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mathfield">Mathfield</a></li><li class="footer__item"><a class="footer__link-item" href="/compute-engine">Compute Engine</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/cortex-js" target="_blank" rel="noopener noreferrer" class="footer__link-item"><svg class="icon-one-rem"><use role="none" xlink:href="/icons.svg#github"></use></svg>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/yhmvVeJ4Hd" target="_blank" rel="noopener noreferrer" class="footer__link-item"><svg class="icon-one-rem"><use role="none" xlink:href="/icons.svg#discord"></use></svg>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://chat.openai.com/g/g-8YgEfR7ig-cortexjs-assistant" target="_blank" rel="noopener noreferrer" class="footer__link-item"><svg class="icon-one-rem"><use role="none" xlink:href="/icons.svg#openai"></use></svg>CortexJS Chatbot<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/about">About Us</a></li></ul></div></div></div></footer></div>
</body>
</html>