<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-mathfield/changelog" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Changelog - Mathfield · MathLive</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://mathlive.io/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://mathlive.io/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://mathlive.io/mathfield/changelog/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Changelog - Mathfield · MathLive"><meta data-rh="true" name="description" content="0.108.2 2025-11-13"><meta data-rh="true" property="og:description" content="0.108.2 2025-11-13"><link data-rh="true" rel="icon" href="/img/logo.webp"><link data-rh="true" rel="canonical" href="https://mathlive.io/mathfield/changelog/"><link data-rh="true" rel="alternate" href="https://mathlive.io/mathfield/changelog/" hreflang="en"><link data-rh="true" rel="alternate" href="https://mathlive.io/mathfield/changelog/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Q23Y5RN3UQ-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Changelog","item":"https://mathlive.io/mathfield/changelog/"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="MathLive" href="/opensearch.xml">

<link rel="stylesheet" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.11/codemirror.min.css">
<script>!function(){var e,t;window.moduleMap||(window.moduleMap={}),window.moduleMap={...window.moduleMap,mathlive:"https://esm.run/mathlive","compute-engine":"https://esm.run/@cortex-js/compute-engine"},(e=["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js","https://unpkg.com/@cortex-js/compute-engine","https://cdn.jsdelivr.net/npm/mathlive","https://cdn.jsdelivr.net/npm/@ui-js/code-playground/dist/code-playground.min.js@module"]).forEach((o,n)=>{const m=o.endsWith("@module"),d="script"+function(e,t=0){let o=3735928559^t,n=1103547991^t;for(let t=0;t<e.length;t++){const m=e.charCodeAt(t);o=Math.imul(o^m,2654435761),n=Math.imul(n^m,1597334677)}return o=Math.imul(o^o>>>16,2246822507),o^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(o^o>>>13,3266489909),4294967296*(2097151&n)+(o>>>0)}(o=o.replace("@module","")).toString(36);if(document.getElementById(d))return;const i=document.createElement("script");m&&(i.type="module"),i.id=d,i.src=o,i.async=!1,t&&n===e.length-1&&(i.onload=t),document.head.appendChild(i)})}()</script>
<link rel="preconnect" href="https://rsms.me/">
<link rel="stylesheet" href="https://rsms.me/inter/inter.css" media="print" onload="this.media=&#39;all&#39;">
<link rel="preload" as="font" type="font/woff2" href="/fonts/berkeley-mono/BerkeleyMono-Regular.woff2" crossorigin="anonymous">
<link rel="preload" as="font" type="font/woff2" href="/fonts/berkeley-mono/BerkeleyMono-Bold.woff2" crossorigin="anonymous">
<link rel="preload" as="font" type="font/woff2" href="https://cdn.jsdelivr.net/npm/mathlive/fonts/KaTeX_Main-Regular.woff2" crossorigin="anonymous">
<link rel="preload" as="font" type="font/woff2" href="https://cdn.jsdelivr.net/npm/mathlive/fonts/KaTeX_Math-Italic.woff2" crossorigin="anonymous">
<link rel="preload" as="font" type="font/woff2" href="https://cdn.jsdelivr.net/npm/mathlive/fonts/KaTeX_AMS-Regular.woff2" crossorigin="anonymous">
<link rel="preload" as="font" type="font/woff2" href="https://cdn.jsdelivr.net/npm/mathlive/fonts/KaTeX_Size1-Regular.woff2" crossorigin="anonymous">
<link rel="preload" as="image" href="/img/hand-slugs.jpg" fetchpriority="high">
<link rel="preload" as="image" href="/img/hand-gears.jpg" fetchpriority="high">
<link rel="preload" as="image" href="/img/hand-cube2.jpg" fetchpriority="high"><link rel="stylesheet" href="/assets/css/styles.44ad2588.css">
<script src="/assets/js/runtime~main.2197ffd7.js" defer="defer"></script>
<script src="/assets/js/main.3d7a1a77.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-theme-choice","system"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.webp"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="shared-header"><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="MathLive Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="42" width="42"><img src="/img/logo.webp" alt="MathLive Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="42" width="42"></div><b class="navbar__title text--truncate">MathLive</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/mathfield/">Mathfield</a><a class="navbar__item navbar__link" href="/compute-engine/">Compute Engine</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/cortex-js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" icon="github">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav></div><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/mathfield/"><span title="Mathfield" class="categoryLinkLabel_W154">Mathfield</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item compass-icon"><a class="menu__link" tabindex="0" href="/mathfield/"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item flask-icon"><a class="menu__link" tabindex="0" href="/mathfield/demo/"><span title="Demo" class="linkLabel_WmDU">Demo</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item changelog-icon"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mathfield/changelog/"><span title="Changelog" class="linkLabel_WmDU">Changelog</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/mathfield/virtual-keyboard/"><span title="Using the Virtual Keyboard" class="linkLabel_WmDU">Using the Virtual Keyboard</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/mathfield/matrix/"><span title="Using the Matrix Editor" class="linkLabel_WmDU">Using the Matrix Editor</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/mathfield/reference/commands/"><span title="LaTeX Commands" class="linkLabel_WmDU">LaTeX Commands</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/mathfield/reference/keybindings/"><span title="Keyboard Shortcuts" class="linkLabel_WmDU">Keyboard Shortcuts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item checklist-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/getting-started/"><span title="Getting Started" class="linkLabel_WmDU">Getting Started</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/integration/"><span title="Add A Mathfield to Your Project" class="linkLabel_WmDU">Add A Mathfield to Your Project</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/react/"><span title="Using React" class="linkLabel_WmDU">Using React</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/svelte/"><span title="Using Svelte" class="linkLabel_WmDU">Using Svelte</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/interacting/"><span title="Interact" class="linkLabel_WmDU">Interact</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/customizing/"><span title="Customize" class="linkLabel_WmDU">Customize</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/menu/"><span title="Menu" class="linkLabel_WmDU">Menu</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/virtual-keyboard/"><span title="Virtual Keyboard" class="linkLabel_WmDU">Virtual Keyboard</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/shortcuts/"><span title="Keybindings and Inline Shortcuts" class="linkLabel_WmDU">Keybindings and Inline Shortcuts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/fill-in-the-blank/"><span title="Fill-in-the-Blank" class="linkLabel_WmDU">Fill-in-the-Blank</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/commands/"><span title="Commands" class="linkLabel_WmDU">Commands</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/macros/"><span title="Macros" class="linkLabel_WmDU">Macros</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/speech/"><span title="Speech" class="linkLabel_WmDU">Speech</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/static/"><span title="Static Math Formulas" class="linkLabel_WmDU">Static Math Formulas</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/lifecycle/"><span title="Web Component Lifecycle" class="linkLabel_WmDU">Web Component Lifecycle</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/security/"><span title="Security" class="linkLabel_WmDU">Security</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item sdk-icon"><a class="menu__link" tabindex="0" href="/mathfield/api/"><span title="API Reference" class="linkLabel_WmDU">API Reference</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/compute-engine/"><span title="Compute Engine" class="categoryLinkLabel_W154">Compute Engine</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link"><span title="Tutorials" class="categoryLinkLabel_W154">Tutorials</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item tutorial-icon"><a class="menu__link" tabindex="0" href="/tutorials/simple-quiz/"><span title="Simple Quiz" class="linkLabel_WmDU">Simple Quiz</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/about/"><span title="Additional Resources" class="categoryLinkLabel_W154">Additional Resources</span></a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Mathfield</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Changelog</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Mathfield Changelog</h1></header>
<!-- -->
<style>
    .markdown h2 {
      align-items: center;
      border-bottom: 2px solid var(--blue-600);
      color: var(--blue-600);
      display: flex;
    }      


    .markdown h2 em {
      margin-left: auto;
      color: var(--blue-600);
      display: block;
      float: right;
      font-size: .6em;
      font-style: normal;
      font-weight: 400
    }
  
    </style><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01082-2025-11-13">0.108.2 <em>2025-11-13</em><a href="#01082-2025-11-13" class="hash-link" aria-label="Direct link to 01082-2025-11-13" title="Direct link to 01082-2025-11-13" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolved-issues">Resolved Issues<a href="#resolved-issues" class="hash-link" aria-label="Direct link to Resolved Issues" title="Direct link to Resolved Issues" translate="no">​</a></h3><ul>
<li class=""><strong>#2899</strong> Typing an inline shortcut immediately after inserting a structure
(e.g. <code>sin/cos</code>) now expands the shortcut correctly and keeps the caret in the
numerator placeholder. The inline shortcut buffer is flushed in place, so the
first character typed in a fresh placeholder is tracked again, and genfrac
insertion prioritizes the numerator placeholder before falling back to the
denominator. This fixes both the missing <code>\cos</code> expansion and the regression
where the denominator was erroneously selected after <code>/</code>.</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01081-2025-11-11">0.108.1 <em>2025-11-11</em><a href="#01081-2025-11-11" class="hash-link" aria-label="Direct link to 01081-2025-11-11" title="Direct link to 01081-2025-11-11" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="new-features">New Features<a href="#new-features" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features" translate="no">​</a></h3><ul>
<li class=""><strong>Responsive toggle button layout</strong>: The virtual keyboard toggle and menu
button now automatically switch from horizontal (side-by-side) to vertical
(stacked) layout when the mathfield height is 100px or greater. This happens
dynamically as you add content to the mathfield.</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolved-issues-1">Resolved Issues<a href="#resolved-issues-1" class="hash-link" aria-label="Direct link to Resolved Issues" title="Direct link to Resolved Issues" translate="no">​</a></h3><ul>
<li class="">Fixed virtual keyboard toggle requiring triple-click to activate.</li>
<li class=""><strong>#2892</strong> Fixed vertical alignment issues when using <code>\colorbox</code> with
expressions that have both subscripts and superscripts. Previously, applying a
background color to an expression like <code>N_{k}^{2019}</code> would cause the
subscripts and superscripts to be misaligned or shift upward. Colorboxes now
render correctly with proper baseline alignment regardless of whether the
content has only a subscript, only a superscript, or both.</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01080-2025-11-09">0.108.0 <em>2025-11-09</em><a href="#01080-2025-11-09" class="hash-link" aria-label="Direct link to 01080-2025-11-09" title="Direct link to 01080-2025-11-09" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="new-features-1">New Features<a href="#new-features-1" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features" translate="no">​</a></h3><ul>
<li class="">Virtual keyboard keycaps now expose stable automation hooks. Each keycap
includes an <code>aria-label</code> and <code>data-keycap-value</code> alongside its serialized
command, allowing assistive tech and automated tests to target keys by their
semantic value instead of brittle glyph text. Playwright e2e tests were
updated to drive the keyboard using these attributes.</li>
<li class="">Added <code>&lt;math-span&gt;</code> and <code>&lt;math-div&gt;</code> web components for lightweight static
rendering of mathematical expressions. These components provide an alternative
to <code>renderMathInDocument()</code> with a simpler API and support for inline
(<code>&lt;math-span&gt;</code>) and block-level (<code>&lt;math-div&gt;</code>) formulas. They support LaTeX,
AsciiMath, and MathJSON input formats, and offer a <code>render()</code> method for
manual re-rendering.<!-- -->
<ul>
<li class=""><strong>Performance optimizations</strong>: Lazy font loading (fonts load once globally),
Intersection Observer for deferred rendering (formulas render only when
visible)</li>
<li class=""><strong>Accessibility enhancements</strong>: Auto-generated ARIA labels with speakable
text, MathML fallback for screen readers, keyboard navigation support when
focusable (Space/Enter to speak formula), automatic <code>role=&quot;img&quot;</code> attribute</li>
</ul>
</li>
<li class=""><strong>#2732</strong> Pressing the Space key in LaTeX mode now completes the LaTeX command
and exits LaTeX mode, similar to pressing Enter. Previously, users typing
LaTeX commands like <code>\alpha</code> would remain in LaTeX mode until pressing Enter,
and incomplete commands would be lost when dismissing dialogs. Now pressing
Space after a valid LaTeX command completes it and returns to math mode,
making LaTeX input more intuitive and preventing data loss. Additionally, when
typing LaTeX commands with mandatory arguments (like <code>\frac{1}{2}</code>), the
command now auto-completes and exits LaTeX mode when the closing brace of the
last mandatory argument is typed. The implementation uses the command registry
to determine the exact number of mandatory arguments, ensuring correct
behavior for all commands including those with nested arguments.</li>
<li class=""><strong>#2786</strong> Fixed scientific notation handling when creating fractions. When
typing scientific notation like <code>5e-2</code> or <code>3.14×10^{-2}</code> and then pressing <code>/</code>
to create a fraction, the entire expression now stays together in the
numerator instead of being split apart. Previously, only part of the number
would be included (e.g., just <code>2</code> from <code>5e-2</code>), breaking the scientific
notation. The fix recognizes both e-notation (<code>5e-2</code>, <code>3.14e+10</code>) and ×10^
notation (<code>3.14×10^{-2}</code>, <code>5×10^3</code>) as atomic units.</li>
<li class=""><strong>Scientific notation template auto-formatting</strong>. When typing scientific
notation in e-notation format (e.g., <code>3.14e2</code>, <code>5E-3</code>, <code>1.23e+10</code>), MathLive
now automatically formats it using a customizable template. The formatting is
triggered either when typing a non-digit character after the notation or after
a brief pause in typing (controlled by <code>inlineShortcutTimeout</code>). The template
is configured via the <code>scientificNotationTemplate</code> property (default:
<code>#1\times10^{#2}</code>) where <code>#1</code> is replaced with the significand and <code>#2</code> with
the exponent. For example, typing <code>3.14e2</code> followed by a space will
automatically format to <code>3.14×10²</code>. The feature respects the
<code>decimalSeparator</code> setting for internationalization.</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolved-issues-2">Resolved Issues<a href="#resolved-issues-2" class="hash-link" aria-label="Direct link to Resolved Issues" title="Direct link to Resolved Issues" translate="no">​</a></h3><ul>
<li class="">Fixed click positioning in multiline environments. When clicking in a
multiline environment (such as <code>\displaylines</code>, <code>gather</code>, <code>align</code>, etc.), the
caret is now correctly positioned on the line that is closest to the click
point vertically, rather than selecting atoms from other lines based on
overall Euclidean distance. For example, when clicking horizontally below an
atom on line 1 but vertically at the level of line 2, the caret will now be
positioned on line 2 instead of incorrectly jumping to line 1. This fix
ensures that clicking in multiline content respects the visual line structure,
making editing more intuitive and predictable.</li>
<li class="">Fixed MathML serialization for multiline mathfields. Previously, serializing
multiline mathfields (such as <code>\displaylines{\\ }</code>) to MathML would result in
invalid MathML with syntax errors and console warnings. The fix corrects a
syntax error in array delimiter serialization and properly handles line break
(<code>\\</code>) atoms in multiline environments by skipping them (since line breaks are
represented by the <code>&lt;mtr&gt;</code> table structure in MathML, not by explicit line
break atoms).</li>
<li class=""><strong>#2146</strong> Fixed nested subscript and superscript creation when using physical
keyboard shortcuts (<code>Shift+-</code>, <code>Ctrl+-</code>). Previously, typing <code>a_b_</code> would
highlight <code>b</code> and reuse the outer subscript instead of creating a subscript of
<code>b</code>, and typing <code>a^b_</code> inside the exponent would unexpectedly attach the new
subscript to <code>a</code>. Script commands now attach to the atom that currently has
focus, so nested scripts work regardless of whether they are triggered by
synthetic text insertion or by real key combos.</li>
<li class=""><strong>#2343</strong> Fixed clipboard API errors when MathLive is used in sandboxed
iframes. Previously, when pasting content in a mathfield embedded in a
sandboxed iframe without <code>allow=&quot;clipboard-read; clipboard-write&quot;</code>
permissions, unhandled promise rejections would appear in the console
(&quot;Permissions policy violation: The Clipboard API has been blocked&quot;). The
paste operation now gracefully handles clipboard API errors with appropriate
user feedback.</li>
<li class=""><strong>#2364</strong> Fixed <code>--keycap-height</code> CSS custom property not working in sandboxed
iframes. Previously, setting <code>--keycap-height</code> to custom values (e.g., 15px)
had no effect because responsive breakpoint queries were using <code>max()</code>
functions that enforced minimum height values. The custom property now
properly accepts any user-defined value while maintaining sensible defaults
(60px, 52px, 42px) when no custom value is provided.</li>
<li class=""><strong>#2391</strong> Fixed spacing for <code>\class</code>, <code>\cssId</code>, <code>\htmlId</code>, <code>\htmlData</code>,
<code>\htmlStyle</code>, and <code>\href</code> commands. These commands now properly respect
mathematical spacing rules, matching the behavior of similar commands like
<code>\textcolor</code>. Previously, expressions like <code>1=\class{test}{1}</code> would not have
proper spacing before the wrapped element, while <code>1=\textcolor{red}{1}</code> would.
The commands now create atoms with the correct type (<code>mord</code>) and use deferred
argument parsing to ensure proper inter-atom spacing.</li>
<li class=""><strong>#2419</strong> Fixed parsing of dollar-delimited math expressions when using
<code>insert()</code> in text mode. Previously, when inserting strings like
<code>&quot;La fonction $f$ est croissante&quot;</code> into a mathfield with <code>defaultMode=&quot;text&quot;</code>,
the dollar signs and their content were being escaped, preventing proper math
mode switching. The text mode editor now correctly preserves math regions
delimited by <code>$...$</code> or <code>$$...$$</code> while only escaping special characters in
text regions, allowing mixed text and inline math expressions to be inserted
correctly.</li>
<li class=""><strong>#2444</strong> Font style menu items (roman, italic) are now always visible and
properly toggleable. Previously, these items only appeared when text was
selected, and toggling them when positioned after styled text would not work
on the first click. The toggle logic now correctly checks against the computed
insert style (including inherited styles from adjacent atoms) rather than just
the explicit default style, allowing users to easily toggle off font styles
like <code>\mathrm{}</code> (roman/upright).</li>
<li class=""><strong>#2447</strong> When deleting content in a subscript or superscript of operators
like <code>\lim</code>, the cursor would become trapped in the empty branch. Now, when
all content in a subscript/superscript is deleted and the delete key is
pressed again, the empty branch is removed and the cursor properly navigates
out, while keeping the operator itself intact.</li>
<li class=""><strong>#2476</strong> Readonly expressions can no longer be modified using the virtual
keyboard. Previously, when a mathfield was readonly or when the selection was
within a readonly portion (such as outside a prompt/placeholder in a
fill-in-the-blank scenario), typing on the virtual keyboard would incorrectly
replace or modify the readonly content. The virtual keyboard now respects
readonly protection, matching the behavior of the physical keyboard by playing
a &quot;plonk&quot; sound and rejecting the input.</li>
<li class=""><strong>#2480</strong> Fixed selection behavior within <code>\mathtip</code> and <code>\texttip</code> commands.
Previously, it was only possible to select the entire content of a mathtip at
once (e.g., all of <code>x+1</code> in <code>\mathtip{x+1}{test}</code>), even though navigation
with arrow keys worked correctly. Now partial selection within tooltip content
is properly supported, allowing users to select individual characters or
subexpressions. Additionally, the tooltip styling has been corrected to
properly display the background color, border, and shadow on hover.</li>
<li class=""><strong>#2512</strong> Fixed excessive blank space appearing above inline <code>array</code>
environments. The vertical alignment of arrays has been adjusted to align the
first row&#x27;s baseline with surrounding text rather than centering the entire
array around the math axis, which was causing unwanted spacing above inline
arrays with column separators like
<code>\begin{array}{l|l} a &amp; b\\ c &amp; d\end{array}</code>.</li>
<li class=""><strong>#2515</strong> Fixed placeholders inside accent commands (<code>\vec{}</code>, <code>\bar{}</code>,
<code>\hat{}</code>, etc.) not being clickable. When clicking on a placeholder wrapped in
an accent command, the cursor now correctly positions inside the placeholder
instead of selecting the entire accent atom.</li>
<li class=""><strong>#2521</strong> Fixed the <code>/</code> shortcut misplacing subscripts when converting a
selection into a fraction. Previously, selecting a symbol with an attached
subscript, e.g. <code>d_0</code>, and pressing <code>/</code> would move only the base <code>d</code> into the
numerator and leave the orphaned <code>_0</code> attached to the denominator placeholder.
Selection normalization now automatically expands to include the associated
<code>subsup</code> atom so the scripted symbol stays intact inside the resulting
fraction.</li>
<li class=""><strong>#2558</strong> Fixed cursor jumping to the beginning when entering a left
parenthesis before a previously entered right parenthesis. When typing a
closing bracket first (e.g., <code>1+2+3)</code>), then moving the cursor back and typing
an opening bracket <code>(</code>, the smart fence feature would correctly create
<code>\left(2+3\right)</code> but would incorrectly position the cursor at the start of
the expression instead of after the opening parenthesis. The cursor now
properly stays positioned inside the newly created fence, right after the left
delimiter.</li>
<li class=""><strong>#2547</strong> Fixed rendering of <code>\colorbox</code> in fractions where the colored
background would obscure the fraction bar. The background is now rendered
behind the content using a CSS pseudo-element with <code>z-index: -1</code>, preventing
it from painting over adjacent elements like fraction bars. This issue
occurred specifically with double-braced content like
<code>\frac{{\colorbox{red}{344}}}{3}</code>.</li>
<li class=""><strong>#2570</strong> Fixed <code>\bf</code>, <code>\it</code>, and related text formatting commands not
accepting braced arguments. Previously, commands like <code>\bf{425}</code> would fail to
parse because the parser didn&#x27;t handle braced arguments for <code>{:rest*}</code>
deferred parameters. Additionally, the rendering system wasn&#x27;t properly
combining <code>fontFamily</code> with <code>fontSeries</code>/<code>fontShape</code> properties, causing
<code>\bf{425}</code> to render in regular weight instead of bold. The parser now
correctly handles braced arguments, and the <code>getFont()</code> method builds compound
variant keys (e.g., &#x27;roman-bold&#x27;) by combining these style properties.</li>
<li class=""><strong>#2572</strong> Fixed typing special characters in placeholders. When typing
characters with keybindings (like backslash, parentheses, brackets) in a
selected placeholder, the characters would disappear or trigger unwanted
behaviors. The placeholder is now deleted before keystroke processing,
allowing all keybindings and character handling to work correctly.</li>
<li class=""><strong>#2579</strong> Fixed multiple mathfields showing blinking cursors simultaneously
when <code>focus()</code> is called rapidly on multiple mathfields. This occurred because
Chromium browsers don&#x27;t fire blur events reliably during rapid focus changes,
causing multiple mathfields to remain in a focused state. The fix implements
global focus tracking to ensure only one mathfield can be focused at a time,
explicitly blurring any previously focused mathfield when a new one gains
focus. This handles browser blur event quirks while maintaining backward
compatibility with all existing focus/blur behavior.</li>
<li class=""><strong>#2619</strong> Fixed placeholders in multi-row array environments (like
<code>\displaylines</code>) not being focusable with pointer clicks. The hit-testing
logic now properly determines which row was clicked before searching for
atoms, ensuring placeholders in different rows can be correctly selected.
Additionally, fixed prompt hit testing to include the full visual area
(including padding) and corrected cursor positioning to place the cursor
inside the prompt body rather than selecting around it.</li>
<li class=""><strong>#2665</strong> Clicking on a mathfield now only fires focus events once, instead of
generating duplicate focus/blur/focusin/focusout events.</li>
<li class=""><strong>#2668</strong> Fixed right-click context menu causing MathField to lose focus when
clicking on formatted text. Previously, right-clicking on equation text would
blur the field, potentially causing incorrect rendering when selecting menu
options like color changes. The context menu event is now prevented before
showing the menu, ensuring focus is maintained regardless of where the
right-click occurs.</li>
<li class=""><strong>#2685</strong> Fixed physical keyboard not working after programmatic focus with
manual virtual keyboard policy. When calling <code>mf.focus()</code> programmatically at
page load with <code>mathVirtualKeyboardPolicy: &quot;manual&quot;</code>, the physical keyboard
would stop working. This was caused by a double <code>onFocus()</code> invocation that
set up event capture listeners at the wrong time. The fix prevents the second
<code>onFocus()</code> call when focus is initiated programmatically, ensuring keyboard
events are properly routed.</li>
<li class=""><strong>#2686</strong> When deleting a range that includes special mathematical atoms like
<code>\sqrt</code>, <code>\frac</code>, or <code>\enclose</code>, the special atom structure is now properly
removed or cleaned up. Previously, deleting content would leave behind empty
special atom structures. Now, if a special atom becomes empty after deletion,
it is removed entirely. Additionally, when a deletion crosses the boundary of
a special atom (e.g., selecting content both outside and inside a square
root), any remaining content inside the special atom is hoisted out, and the
special atom structure is removed.</li>
<li class=""><strong>#2698</strong> Dispatched virtual keyboard events now include the standard <code>origin</code>
property when <code>mathVirtualKeyboardPolicy = &quot;sandboxed&quot;</code>. Previously, when
MathLive operated within an iframe in sandboxed mode, the MessageEvent objects
dispatched via <code>window.dispatchEvent()</code> were missing this property, causing
validation errors in environments that check for the origin domain.</li>
<li class=""><strong>#2714</strong> Disabled mathfields no longer receive focus or accept keyboard
input. Previously, clicking on or calling <code>.focus()</code> on a disabled mathfield
would trigger focus events and allow keyboard input like <code>{</code> and <code>/</code> to modify
the content, despite the documented behavior that disabled mathfields should
not be focusable. Disabled mathfields are now properly non-focusable,
preventing all focus events and keyboard input.</li>
<li class=""><strong>#2728</strong> Fixed missing spacer elements when using the <code>\class</code> command.
Previously, expressions like <code>x+\class{highlight}{y}+1</code> would not have proper
spacing before the styled content, causing the spacer element between the <code>+</code>
operator and the wrapped content to be missing. The <code>\class</code> command now uses
<code>boxType: &#x27;lift&#x27;</code> to properly expose its contents to the inter-box spacing
algorithm, matching the behavior of similar styling commands like <code>\emph</code>.</li>
<li class=""><strong>#2733</strong> Fixed inline shortcut buffer persistence after deleting all content.
When typing characters that triggered an inline shortcut (e.g., &quot;xx&quot; →
&quot;\times&quot;), then deleting all content with Backspace, and typing again, the
stale shortcut buffer would incorrectly trigger shortcuts on new input. The
inline shortcut buffer is now properly flushed when the mathfield becomes
empty after a deletion operation.</li>
<li class=""><strong>#2739</strong> Fixed a crash when pressing Backspace on an empty <code>\displaylines</code>
environment. The error &quot;Cannot read properties of undefined (reading
&#x27;length&#x27;)&quot; would occur when creating a multiline display (Cmd+Enter), deleting
all content, and pressing Backspace again. The row deletion logic now properly
handles empty cells and missing rows.</li>
<li class=""><strong>#2754</strong> Setting the <code>placeholder</code> property programmatically now works
correctly. Previously, <code>mathfield.placeholder = &quot;text&quot;</code> would not update the
placeholder. The property now follows the same pattern as all other properties
for consistent behavior.</li>
<li class=""><strong>#2767</strong> When calling <code>getValue()</code> on a mathfield in multiline mode with a
range that is only within a single line, the returned value is no longer
unnecessarily wrapped in a <code>\displaylines{}</code> command. The wrapper is now only
added when the content actually spans multiple lines.</li>
<li class=""><strong>#2770</strong> Fixed cursor positioning on first click in complex formulas.
Previously, clicking to position the cursor in formulas with many nested
elements (fractions, subscripts, superscripts) would fail until keyboard
navigation was used first. The atom bounds cache is now properly maintained
across interactions, ensuring accurate cursor positioning from the first
click.</li>
<li class=""><strong>#2771</strong> The <code>&lt;math-field&gt;</code> element now properly shrinks back to its original
size after deleting large multi-line formulas (e.g., <code>\begin{align}</code>
environments). Previously, when clearing content from a multi-row structure,
the empty rows would be preserved, causing the field to remain at the expanded
height. Now, when all content is deleted, the structure is reset to a single
empty row while preserving the environment type.</li>
<li class=""><strong>#2784</strong> The <code>\hat{}</code> accent is now properly centered over uppercase letters.
Previously, the accent would appear shifted rather than centered when applied
to uppercase characters, while it worked correctly with lowercase letters. The
centering algorithm now accounts for the width difference between the base
character and the accent to ensure proper positioning for all characters.</li>
<li class=""><strong>#2799</strong> When selecting content inside mathematical structures (square roots,
brackets, etc.) using the mouse and then inserting a fraction, the selected
content no longer disappears. The selection is now properly used as the
numerator of the fraction.</li>
<li class=""><strong>#2816</strong> Programmatic calls to <code>.focus()</code> now correctly trigger <code>focusin</code>
events.</li>
<li class=""><strong>#2818</strong> The <code>\mathrm</code> command and other upright variants (<code>\mathsf</code>,
<code>\mathtt</code>) are now correctly preserved when exporting to the <code>latex-expanded</code>
format. Previously, these commands were being stripped from the output,
causing <code>\mathrm{d}</code> to be serialized as just <code>d</code>.</li>
<li class=""><strong>#2832</strong>, <strong>#2727</strong> Fixed rendering of <code>\cancel</code>, <code>\bcancel</code>, <code>\xcancel</code>, and
other SVG-based enclosure notations (diagonal strikes, horizontal/vertical
strikes, etc.). In v0.106.0+, these notations became completely invisible due
to SVG elements having 0 width in their viewBox. Additionally, when visible,
the positioning of strike lines was incorrect, particularly for complex
expressions and fractions. The fix restores proper width calculations and
implements symmetric padding for notation boxes, using em-based coordinates
with small margins for accurate line positioning. Strike lines now properly
cover content from corner to corner without extending too far or appearing
offset.</li>
<li class=""><strong>#2847</strong> Fixed scroll behavior in fixed-height mathfield containers. When
navigating with arrow keys or Tab/Shift+Tab to move between placeholders, the
container now properly scrolls to keep the cursor or selection visible.
Previously, selecting placeholders would cause the scroll to jump to the top,
and navigating upward wouldn&#x27;t scroll when the cursor was on the first line.
The fix also adds padding (20px) so scrolling happens before the cursor
reaches the very edge of the viewport, and ensures full selections are visible
rather than just showing 1 pixel.</li>
<li class=""><strong>#2849</strong> For compatibility with KaTeX, do not wrap the argument of delimiter
commands.</li>
<li class=""><strong>#2851</strong> Fixed multiline row merging when deleting across multiple lines.
Previously, when a selection spanned multiple rows in a multiline environment
(like <code>\displaylines</code>) and was deleted, the remaining content would stay on
separate lines instead of merging. Now, when deleting across rows, the
remaining fragments are properly merged into a single line.</li>
<li class=""><strong>#2859</strong> When using <code>mathVirtualKeyboardPolicy=&quot;manual&quot;</code>, controlling the
virtual keyboard via <code>focusin</code>/<code>focusout</code> event listeners now works correctly.
The keyboard no longer closes immediately after opening.</li>
<li class=""><strong>#2867</strong> In some cases, applying a superscript or subscript to a command with
an argument (for example <code>\mathbb{R}</code>) would incorrectly include the argument
in the superscript or subscript.</li>
<li class=""><strong>#2884</strong> The command to add/remove columns and rows when in a <code>cases</code>
environment are now enabled.</li>
<li class=""><strong>#2889</strong> Custom attributes would not be propagated to the generated markup.</li>
<li class="">Fixed double-click selection of styled text. Previously, double-clicking on
styled content like <code>\mathrm{xyz}</code> would incorrectly select adjacent unstyled
text instead of the styled content itself. The selection boundary logic now
properly checks the next atom&#x27;s style before advancing, preventing off-by-one
errors when determining style boundaries.</li>
<li class=""><strong>#2892</strong> Fixed superscripts and subscripts shifting upward when inside a
<code>\colorbox</code> command. Elements with background colors now receive proper
vertical alignment (<code>vertical-align: -depth</code>) to prevent positioning issues
with content of different heights. The fix also ensures background colors use
the correct color palette (background colors instead of foreground colors) and
maintains editability via the background color menu. Selection highlighting no
longer causes subscripts to shift, as vertical alignment is only applied to
intentional background colors, not selection highlights.</li>
<li class="">Fix empty-line selection highlighting in multiline mathfields</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01071-2025-09-30">0.107.1 <em>2025-09-30</em><a href="#01071-2025-09-30" class="hash-link" aria-label="Direct link to 01071-2025-09-30" title="Direct link to 01071-2025-09-30" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolved-issues-3">Resolved Issues<a href="#resolved-issues-3" class="hash-link" aria-label="Direct link to Resolved Issues" title="Direct link to Resolved Issues" translate="no">​</a></h3><ul>
<li class=""><strong>#2817</strong> Calling <code>setPromptValue()</code> no longer changes the focus to the
mathfield.</li>
<li class=""><strong>#2805</strong> On mobile, show the math virtual keyboard when using prompts</li>
<li class="">Custom macros are now read when using speakable text to speech.</li>
<li class=""><strong>#2824</strong> Using TypeScript would trigger a compile error about
<code>Cannot find module &#x27;../editor/keyboard-layout&#x27;</code></li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01070-2025-08-17">0.107.0 <em>2025-08-17</em><a href="#01070-2025-08-17" class="hash-link" aria-label="Direct link to 01070-2025-08-17" title="Direct link to 01070-2025-08-17" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="new-features-2">New Features<a href="#new-features-2" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features" translate="no">​</a></h3><ul>
<li class="">Added <code>mountMathVirtualKeyboard()</code> to control in which browsing context the
math virtual keyboard is mounted.</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolved-issues-4">Resolved Issues<a href="#resolved-issues-4" class="hash-link" aria-label="Direct link to Resolved Issues" title="Direct link to Resolved Issues" translate="no">​</a></h3><ul>
<li class=""><strong>#2800</strong>: New line on matrix causes duplicated input</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01060-2025-07-11">0.106.0 <em>2025-07-11</em><a href="#01060-2025-07-11" class="hash-link" aria-label="Direct link to 01060-2025-07-11" title="Direct link to 01060-2025-07-11" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="new-features-3">New Features<a href="#new-features-3" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features" translate="no">​</a></h3><ul>
<li class="">Export to <strong>typst</strong> format. Use <code>mf.getValue(&quot;typst&quot;)</code> to get the value of the
mathfield in typst format.</li>
<li class=""><strong>#2731</strong> The keybinding <code>alt+shift+V</code> now inserts a n<sup>th</sup> root. The
existing <code>alt+V</code> keybinding continues to insert a square root.</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolved-issues-5">Resolved Issues<a href="#resolved-issues-5" class="hash-link" aria-label="Direct link to Resolved Issues" title="Direct link to Resolved Issues" translate="no">​</a></h3><ul>
<li class="">The commands <code>\iff</code>, <code>\Coloneqq</code> and <code>\hArr</code> did not render correctly.</li>
<li class="">Improved rendering in dark mode.</li>
<li class=""><strong>#2727</strong> Improved rendering of annotations.</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01053-2025-05-14">0.105.3 <em>2025-05-14</em><a href="#01053-2025-05-14" class="hash-link" aria-label="Direct link to 01053-2025-05-14" title="Direct link to 01053-2025-05-14" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolved-issues-6">Resolved Issues<a href="#resolved-issues-6" class="hash-link" aria-label="Direct link to Resolved Issues" title="Direct link to Resolved Issues" translate="no">​</a></h3><ul>
<li class="">
<p>Using the kebab version of commands (for example <code>&quot;select-all&quot;</code> instead of
<code>&quot;SelectAll&quot;</code>) would incorrectly result in a runtime error.</p>
</li>
<li class="">
<p>Using a padding with an <code>\enclose</code> command would not render the padding
correctly. To specify some padding, use
<code>\enclose{updiagonalstrike downdiagonalstrike}[padding=&quot;10px&quot;, 6px solid rgba(205, 0, 11, .4)]{42}</code>.</p>
</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01051-2025-04-18">0.105.1 <em>2025-04-18</em><a href="#01051-2025-04-18" class="hash-link" aria-label="Direct link to 01051-2025-04-18" title="Direct link to 01051-2025-04-18" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolved-issues-7">Resolved Issues<a href="#resolved-issues-7" class="hash-link" aria-label="Direct link to Resolved Issues" title="Direct link to Resolved Issues" translate="no">​</a></h3><ul>
<li class=""><strong>#2526</strong> In the virtual keyboard, the keycap text over CSS variables was not
displayed correctly.</li>
<li class=""><strong>#2567</strong> Avoid potential race condition when changing the focus of the
mathfield.</li>
<li class=""><strong>#2638</strong>, <strong>#2479</strong> Fragments that were styled with some color were not
rendered correctly when the mathfield was not focused.</li>
<li class=""><strong>#2669</strong> If a page had multiple mathfields, when using the suggestion
popover, the suggestion popover would be inserted in the wrong mathfield.</li>
<li class=""><strong>#2584</strong> In some cases, a menu item could get inadvertently selected when
when brining up the menu.</li>
<li class=""><strong>#2673</strong> When using the CJS version of the library, the height of the virtual
keyboard was not correctly calculated.</li>
<li class=""><strong>#2666</strong> In some cases, the state of the Undo/Redo buttons could get out of
sync with the state of the mathfield.</li>
<li class=""><strong>#2667</strong> The edit toolbar was not displayed in the alphabetic keyboard
layout.</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="improvements">Improvements<a href="#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements" translate="no">​</a></h3><ul>
<li class="">Accessibility: Improved support for the high-contrast mode.</li>
<li class="">There is a new CSS variable to control the z-index of the suggestion popover:
<code>--suggestion-zindex</code>. This allows the suggestion popover to be displayed
above other elements on the page.</li>
<li class="">Added support for the <code>\strut</code> and <code>\mathstrut</code> commands. These commands are
used to insert a strut, which is an invisible element that takes up space in
the math expression. This is useful for aligning expressions or for creating
space between elements.</li>
<li class=""><strong>#2662</strong> When the command popover is displayed, pressing the <strong>Return</strong> key
will insert the command in the mathfield and close the popover.</li>
<li class=""><strong>#2658</strong> Improved localization for Italian.</li>
<li class=""><strong>#2671</strong> When inserting a command with an argument with the suggestion
popover, position the cursor inside the argument.</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01050-2025-03-27">0.105.0 <em>2025-03-27</em><a href="#01050-2025-03-27" class="hash-link" aria-label="Direct link to 01050-2025-03-27" title="Direct link to 01050-2025-03-27" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="breaking-changes">Breaking Changes<a href="#breaking-changes" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes" translate="no">​</a></h3><p>In order to support alternate CDNs, in particular <code>jsdelivr</code>, the file layout of
the <strong>npm</strong> package has changed. The files that were previously in the <code>./dist/</code>
directory are now in the root of the package. This should not affect most users,
but if you are importing the library or auxiliary files from the <code>dist</code>
directory, you will need to update your paths.</p><p>To use <code>jsdelivr</code>, use:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token keyword" style="color:var(--base-0e)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"> MathfieldElement </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;https://esm.run/mathlive&quot;</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre></div></div><p>or:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token tag punctuation" style="color:var(--base-06)">&lt;</span><span class="token tag" style="color:var(--base-0e)">script</span><span class="token tag" style="color:var(--base-0e)"> </span><span class="token tag attr-name" style="color:var(--base-0c)">defer</span><span class="token tag" style="color:var(--base-0e)"> </span><span class="token tag attr-name" style="color:var(--base-0c)">src</span><span class="token tag attr-value punctuation attr-equals" style="color:var(--base-06)">=</span><span class="token tag attr-value punctuation" style="color:var(--base-06)">&quot;</span><span class="token tag attr-value" style="color:var(--base-0b)">https://cdn.jsdelivr.net/npm/mathlive</span><span class="token tag attr-value punctuation" style="color:var(--base-06)">&quot;</span><span class="token tag punctuation" style="color:var(--base-06)">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:var(--base-06)">&lt;/</span><span class="token tag" style="color:var(--base-0e)">script</span><span class="token tag punctuation" style="color:var(--base-06)">&gt;</span><br></span></code></pre></div></div><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="issues-resolved">Issues Resolved<a href="#issues-resolved" class="hash-link" aria-label="Direct link to Issues Resolved" title="Direct link to Issues Resolved" translate="no">​</a></h3><ul>
<li class="">
<p><strong>#2647</strong>, <strong>#2634</strong>, <strong>#2562</strong> Some accents (<code>\hat{}</code>, <code>\vec{}</code>) where not
rendered correctly in some cases.</p>
</li>
<li class="">
<p><strong>#2635</strong> In Chrome (and Firefox), clicking on the padding area of the
mathfield would not result in the focus getting into a zombie state and
keyboard event no longer being dispatched.</p>
</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01042-2025-03-23">0.104.2 <em>2025-03-23</em><a href="#01042-2025-03-23" class="hash-link" aria-label="Direct link to 01042-2025-03-23" title="Direct link to 01042-2025-03-23" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="issues-resolved-1">Issues Resolved<a href="#issues-resolved-1" class="hash-link" aria-label="Direct link to Issues Resolved" title="Direct link to Issues Resolved" translate="no">​</a></h3><ul>
<li class=""><strong>#2588</strong> With Chrome 133+ input with the physical keyboard was disabled after
showing the virtual keyboard.</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01041-2025-03-18">0.104.1 <em>2025-03-18</em><a href="#01041-2025-03-18" class="hash-link" aria-label="Direct link to 01041-2025-03-18" title="Direct link to 01041-2025-03-18" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="improvements-1">Improvements<a href="#improvements-1" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements" translate="no">​</a></h3><ul>
<li class="">Improved support for the <code>jsdelivr</code> CDN. To use it, use:</li>
</ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token keyword" style="color:var(--base-0e)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"> MathfieldElement </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;https://esm.run/mathlive&quot;</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre></div></div><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="issues-resolved-2">Issues Resolved<a href="#issues-resolved-2" class="hash-link" aria-label="Direct link to Issues Resolved" title="Direct link to Issues Resolved" translate="no">​</a></h3><ul>
<li class=""><strong>#2628</strong> Attempting to delete an empty line in a multiline environment would
not delete the line.</li>
<li class=""><strong>#2585</strong> In some cases, the arguments of a macro were not serialized
correctly. This could happen when using a macro in conjunction with a inline
shortcut.</li>
<li class=""><strong>#2586</strong> The <code>\pdiff{}{}</code> command was not properly serialized to LaTeX.</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01040-2025-02-08">0.104.0 <em>2025-02-08</em><a href="#01040-2025-02-08" class="hash-link" aria-label="Direct link to 01040-2025-02-08" title="Direct link to 01040-2025-02-08" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="security-advisories">Security Advisories<a href="#security-advisories" class="hash-link" aria-label="Direct link to Security Advisories" title="Direct link to Security Advisories" translate="no">​</a></h3><p>As a reminder, if you are handling untrusted input, you should consider using
the <code>MathfieldElement.createHTML()</code> method to sanitize content. The
<code>createHTML()</code> method follows the recommendations from the
<a href="https://www.w3.org/TR/trusted-types/" target="_blank" rel="noopener noreferrer" class="">Trusted Type</a> specification.</p><p>For example, using the DOMPurify library (there are other HTML sanitizers
available):</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token tag punctuation" style="color:var(--base-06)">&lt;</span><span class="token tag" style="color:var(--base-0e)">script</span><span class="token tag" style="color:var(--base-0e)"> </span><span class="token tag attr-name" style="color:var(--base-0c)">type</span><span class="token tag attr-value punctuation attr-equals" style="color:var(--base-06)">=</span><span class="token tag attr-value punctuation" style="color:var(--base-06)">&quot;</span><span class="token tag attr-value" style="color:var(--base-0b)">text/javascript</span><span class="token tag attr-value punctuation" style="color:var(--base-06)">&quot;</span><span class="token tag" style="color:var(--base-0e)"> </span><span class="token tag attr-name" style="color:var(--base-0c)">src</span><span class="token tag attr-value punctuation attr-equals" style="color:var(--base-06)">=</span><span class="token tag attr-value punctuation" style="color:var(--base-06)">&quot;</span><span class="token tag attr-value" style="color:var(--base-0b)">https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.2.3/purify.min.js</span><span class="token tag attr-value punctuation" style="color:var(--base-06)">&quot;</span><span class="token tag punctuation" style="color:var(--base-06)">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:var(--base-06)">&lt;/</span><span class="token tag" style="color:var(--base-0e)">script</span><span class="token tag punctuation" style="color:var(--base-06)">&gt;</span><br></span></code></pre></div></div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">MathfieldElement</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function-variable function" style="color:var(--base-0a)">createHTML</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">html</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> DOMPurify</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">sanitize</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">html</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre></div></div><ul>
<li class="">
<p><a href="https://github.com/advisories/GHSA-qwj6-q94f-8425" target="_blank" rel="noopener noreferrer" class=""><strong>security advisory</strong></a>
Untrusted input could be used to inject arbitrary HTML or JavaScript code in a
page using a mathfield or math content rendered by the library, if the content
included an <code>\htmlData{}</code> command with maliciously crafted input and no DOM
sanitizer was used.</p>
<p>The content of the <code>\htmlData{}</code> command is now sanitized and the 🚫 emoji is
displayed instead in the mathfield if the content is unsafe. When using
<code>convertLatexToMarkup()</code>, an exception is thrown.</p>
</li>
<li class="">
<p>The <code>\href{}{}</code> command now only allows URLs with the <code>http</code> or <code>https</code>
protocol.</p>
</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="issues-resolved-3">Issues Resolved<a href="#issues-resolved-3" class="hash-link" aria-label="Direct link to Issues Resolved" title="Direct link to Issues Resolved" translate="no">​</a></h3><ul>
<li class="">
<p>Generate only standard trigonometric functions, i.e. those available in the
<code>amsmath</code> package. Use <code>\operatorname{}</code> for the others. The standard commands
are:</p>
<ul>
<li class=""><code>\arccos</code></li>
<li class=""><code>\arcsin</code></li>
<li class=""><code>\arctan</code></li>
<li class=""><code>\arg</code></li>
<li class=""><code>\cos</code></li>
<li class=""><code>\cosh</code></li>
<li class=""><code>\cot</code></li>
<li class=""><code>\coth</code></li>
<li class=""><code>\csc</code></li>
<li class=""><code>\sec</code></li>
<li class=""><code>\sin</code></li>
<li class=""><code>\sinh</code></li>
<li class=""><code>\tan</code></li>
<li class=""><code>\tanh</code></li>
</ul>
</li>
<li class="">
<p>Added support for <code>\dddot</code> and <code>\ddddot</code> commands.</p>
</li>
<li class="">
<p><strong>#2573</strong> The <code>\operatorname{}</code> command when round-tripped would incldue an
extraneous <code>\mathrm{}</code> command.</p>
</li>
<li class="">
<p><strong>#2132</strong>, <strong>#2548</strong> Improved handling of multi-line mathfields. To use a
multi-line mathfield, include a multi-line environment:</p>
<ul>
<li class=""><code>\displaylines{}</code>: single column of left-aligned equations</li>
<li class=""><code>gather</code>: single column of centered equations</li>
<li class=""><code>multline</code>: centered equations with the first line aligned left and the last
line aligned to the right</li>
<li class=""><code>align</code>: two columns, the first column right-aligned, the second column
left-aligned; used for one equation per line</li>
<li class=""><code>split</code>: two columns of equations, the first column right-aligned, the
second column left-aligned; used for a single equation split over multiple
lines</li>
</ul>
</li>
</ul><p>For example:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token tag punctuation" style="color:var(--base-06)">&lt;</span><span class="token tag" style="color:var(--base-0e)">math-field</span><span class="token tag punctuation" style="color:var(--base-06)">&gt;</span><span class="token plain">\displaylines{x=1 \\y = 2}</span><span class="token tag punctuation" style="color:var(--base-06)">&lt;/</span><span class="token tag" style="color:var(--base-0e)">math-field</span><span class="token tag punctuation" style="color:var(--base-06)">&gt;</span><br></span></code></pre></div></div><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token tag punctuation" style="color:var(--base-06)">&lt;</span><span class="token tag" style="color:var(--base-0e)">math-field</span><span class="token tag punctuation" style="color:var(--base-06)">&gt;</span><span class="token plain">\begin{align}</span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  f(0) &amp;= 1 \\</span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  f(x + 1) &amp;= f(x-1) + f(x)</span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">\end{align}</span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token tag punctuation" style="color:var(--base-06)">&lt;/</span><span class="token tag" style="color:var(--base-0e)">math-field</span><span class="token tag punctuation" style="color:var(--base-06)">&gt;</span><br></span></code></pre></div></div><ul>
<li class="">
<p>When in a multi-line environment, the <strong>Return</strong> key will move to the next
line. The <strong>Backspace</strong> key will delete the current line if the cursor is at
the beginning of the line. Note that no placeholder is inserted on a new line:
the line is simply blank.</p>
</li>
<li class="">
<p>The <strong>Add Row Before</strong>, <strong>Add Row After</strong>, <strong>Add Column Before</strong>, <strong>Add Column
After</strong>, <strong>Delete Row</strong> and <strong>Delete Columns</strong> commands are available in the
context menu when the cursor is inside a matrix. They are not available in
multi-line environments.</p>
</li>
<li class="">
<p><strong>#2574</strong> The commands <code>\coloneq</code>, <code>\Coloneq</code>, <code>\Coloneqq</code>, <code>\eqcolon</code> and
<code>\Eqcolon</code> were mapped to incorrect symbols (some of them used obsolete
definitions of those commands from the mathtools package that changed in the
Summer of 2022). They are now correctly mapped to the corresponding symbols.</p>
</li>
<li class="">
<p><strong>#2576</strong> The command <code>\perp</code> was mapped to the wrong symbol (U+22A5). It is
now mapped to the correct symbol (U+27C2)</p>
</li>
<li class="">
<p>Improved ASCIIMath serialization.</p>
</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01030-2024-12-10">0.103.0 <em>2024-12-10</em><a href="#01030-2024-12-10" class="hash-link" aria-label="Direct link to 01030-2024-12-10" title="Direct link to 01030-2024-12-10" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="issues-resolved-4">Issues Resolved<a href="#issues-resolved-4" class="hash-link" aria-label="Direct link to Issues Resolved" title="Direct link to Issues Resolved" translate="no">​</a></h3><ul>
<li class=""><strong>#2530</strong> The AsciiMath <code>1/2</code> is now parsed as <code>\frac{1}{2}</code></li>
<li class="">The <code>\displaylines</code> command is now correctly parsed as a command with an
argument, not as a group command.</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01020-2024-11-29">0.102.0 <em>2024-11-29</em><a href="#01020-2024-11-29" class="hash-link" aria-label="Direct link to 01020-2024-11-29" title="Direct link to 01020-2024-11-29" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="issues-resolved-5">Issues Resolved<a href="#issues-resolved-5" class="hash-link" aria-label="Direct link to Issues Resolved" title="Direct link to Issues Resolved" translate="no">​</a></h3><ul>
<li class=""><strong>#2550</strong> The subpath exports in the main package.json have been updated to
comply with Node.js&#x27;s subpath patterns, which utilize &quot;direct static matching
and replacement.</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="improvements-2">Improvements<a href="#improvements-2" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements" translate="no">​</a></h3><ul>
<li class="">
<p><strong>#2554</strong> <strong>Option for sticky virtual keyboard variant panel</strong></p>
<p>When long pressing a key on the virtual keyboard, a variant panel is displayed
that offers alternatives (variants) for that key. The panel is only displayed
while your finger is pressing the key (like a smartphone keyboard). This new
options allows the variant panel to remain displayed even if you lift your
finger from the screen.</p>
<p>Add the <code>stickyVariantPanel</code> property to a virtual keyboard keycap definition
to make the variant panel sticky.</p>
<p>See <code>./examples/sticky-variant-panel/</code> for an example.</p>
</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01012-2024-11-15">0.101.2 <em>2024-11-15</em><a href="#01012-2024-11-15" class="hash-link" aria-label="Direct link to 01012-2024-11-15" title="Direct link to 01012-2024-11-15" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="issues-resolved-6">Issues Resolved<a href="#issues-resolved-6" class="hash-link" aria-label="Direct link to Issues Resolved" title="Direct link to Issues Resolved" translate="no">​</a></h3><ul>
<li class="">Correctly display the caret following a <code>\mathop{}</code> command.</li>
<li class=""><strong>#2540</strong> When using <code>renderMathInElement()</code> some white space was occasionally
incorrectly removed.</li>
<li class=""><strong>#2545</strong> (?) Use <code>\rightarrow</code> instead of <code>\rarr</code> in the virtual keyboard.</li>
<li class=""><strong>#2543</strong> The <code>MathfieldElement.fractionNavigationOrder</code> was not respected
when navigating in a fraction with the arrow keys.</li>
<li class=""><strong>#2251</strong> Fixed the serialization of <code>\displaylines{}</code></li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01011-2024-10-15">0.101.1 <em>2024-10-15</em><a href="#01011-2024-10-15" class="hash-link" aria-label="Direct link to 01011-2024-10-15" title="Direct link to 01011-2024-10-15" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="issues-resolved-7">Issues Resolved<a href="#issues-resolved-7" class="hash-link" aria-label="Direct link to Issues Resolved" title="Direct link to Issues Resolved" translate="no">​</a></h3><ul>
<li class=""><strong>#2533</strong> When using the virtual keyboard to insert a character with a
blackboard style followed by a non-alphabetic symbol without a blackboard
style, the second symbol would incorrectly be serialized with a blackboard
style.</li>
<li class="">In some cases, the <code>placeholder</code> attribute would not be displayed when the
mathfield was empty.</li>
<li class="">When using static math, the font-familly for text content was not correctly
inherited from the parent element.</li>
<li class="">In some cases, the inherent style of a macro could get overriden. For example
typing the &quot;RR&quot; inline shortcut resulted in an unstyled R instead of the
expected blackboard R.</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01010-2024-07-17">0.101.0 <em>2024-07-17</em><a href="#01010-2024-07-17" class="hash-link" aria-label="Direct link to 01010-2024-07-17" title="Direct link to 01010-2024-07-17" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="breaking-changes-1">Breaking Changes<a href="#breaking-changes-1" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes" translate="no">​</a></h3><ul>
<li class="">The properties <code>mathVirtualKeyboard.actionKeycap</code>,
<code>mathVirtualKeyboard.shiftKeycap</code>, <code>mathVirtualKeyboard.backspaceKeycap</code>, and
<code>mathVirtualKeyboard.tabKeycap</code> have been removed. Use the more general
<code>mathVirtualKeyboard.setKeycap()</code> method to customize these keycaps, that is
<code>mathVirtualKeyboard.setKeycap(&#x27;[action]&#x27;, {...})</code> etc...</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="improvements-and-new-features">Improvements and New Features<a href="#improvements-and-new-features" class="hash-link" aria-label="Direct link to Improvements and New Features" title="Direct link to Improvements and New Features" translate="no">​</a></h3><ul>
<li class="">
<p>Macros can now be specified with <code>renderMathInElement()</code> and
<code>renderMathInDocument()</code> using the <code>macros</code> option. For example:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token function" style="color:var(--base-0a)">renderMathInElement</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">element</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token literal-property property" style="color:var(--base-0c)">macros</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token constant" style="color:var(--base-09)">RR</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;\\mathbb{R}&#x27;</span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">)</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>Performance improvements for pages with many mathfields. The initial rendering
can be up to 2x as fast.</p>
</li>
<li class="">
<p>Some keycaps in the virtual keyboard can be customized without having to
define an entire virtual keyboard layout.</p>
<p>The <code>mathVirtualKeyboard.getKeycap()</code> give access to the definition of special
keycaps and <code>mathVirtualKeyboard.setKeycap()</code> can be used to change that
definition.</p>
<p>The keycaps are one of these special shortcuts:</p>
<ul>
<li class=""><code>[left]</code>, <code>[right]</code>, <code>[up]</code>, <code>[down]</code>, <code>[return]</code>, <code>[action]</code>,</li>
<li class=""><code>[space]</code>, <code>[tab]</code>, <code>[backspace]</code>, <code>[shift]</code>,</li>
<li class=""><code>[undo]</code>, <code>[redo]</code>, <code>[foreground-color]</code>, <code>[background-color]</code>,</li>
<li class=""><code>[hide-keyboard]</code>,</li>
<li class=""><code>[.]</code>, <code>[,]</code>,</li>
<li class=""><code>[0]</code>, <code>[1]</code>, <code>[2]</code>, <code>[3]</code>, <code>[4]</code>,</li>
<li class=""><code>[5]</code>, <code>[6]</code>, <code>[7]</code>, <code>[8]</code>, <code>[9]</code>,</li>
<li class=""><code>[+]</code>, <code>[-]</code>, <code>[*]</code>, <code>[/]</code>, <code>[^]</code>, <code>[_]</code>, <code>[=]</code>, <code>[.]</code>,</li>
<li class=""><code>[(]</code>, <code>[)]</code></li>
</ul>
<p>For example, to change the LaTeX inserted when the multiplication key is
pressed use:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">mathVirtualKeyboard</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">setKeycap</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&#x27;[*]&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token literal-property property" style="color:var(--base-0c)">latex</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;\\times&#x27;</span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre></div></div>
</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="issues-resolved-8">Issues Resolved<a href="#issues-resolved-8" class="hash-link" aria-label="Direct link to Issues Resolved" title="Direct link to Issues Resolved" translate="no">​</a></h3><ul>
<li class=""><strong>#2455</strong> Serialization to ASCII Math of brackets and braces is now correct.</li>
<li class="">When using Chrome in some locale (such as <code>es-419</code>), the context menu would
not be displayed.</li>
<li class="">When the <code>MathfieldElement.isFunction</code> handler is updated, re-render all the
mathfields on the page to take it into account.</li>
<li class=""><strong>#2415</strong> A content change event is now dispatched when the value of the
mathfield is changed as a result of switch from LaTeX mode to math mode by
changing the selection.</li>
<li class="">Dispatch a <code>contextmenu</code> event any time the context menu is about to be
displayed. This allows the event to be canceled.</li>
<li class=""><strong>#2413</strong> When setting the <code>alphabeticLayout</code>, the current keyboard would not
be updated in some cases.</li>
<li class=""><strong>#2412</strong> The serialization of some expressions to LaTeX could result in some
spaces being omitted. For example, <code>\lnot p</code> would serialize as <code>\lnotp</code>.</li>
<li class=""><strong>#2403</strong> The virtual keyboard Keycap Variants panel was positioned
incorrectly when the page used a RTL layout direction.</li>
<li class="">In the virtual keyboard, the background of the variant panel was sometimes
displayed transparently.</li>
<li class=""><strong>#2402</strong> Characters inserted after a <code>\mathbb{}</code> command were not styled
correctly.</li>
<li class="">The <code>math-virtual-keyboard-command</code> event was not dispatched when a mathfield
was focused and a keycap was pressed.</li>
<li class="">There are now CSS selectors to customize the size of glyphs in the virtual
keyboard (shift, enter, etc...):<!-- -->
<ul>
<li class=""><code>--keycap-glyph-size</code></li>
<li class=""><code>--keycap-glyph-size-lg</code></li>
<li class=""><code>--keycap-glyph-size-xl</code></li>
</ul>
</li>
<li class=""><strong>#2397</strong> When a <code>beforeinput</code> event was canceled, the text would still be
inserted when using the physical keyboard.</li>
<li class=""><strong>#2398</strong> When a placeholder was the only element in a group, i.e.
<code>{\placeholder{}}</code>, the placeholder was not automatically selected.</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="01000-2024-06-12">0.100.0 <em>2024-06-12</em><a href="#01000-2024-06-12" class="hash-link" aria-label="Direct link to 01000-2024-06-12" title="Direct link to 01000-2024-06-12" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="issues-resolved-9">Issues Resolved<a href="#issues-resolved-9" class="hash-link" aria-label="Direct link to Issues Resolved" title="Direct link to Issues Resolved" translate="no">​</a></h3><ul>
<li class="">
<p><strong>#2396</strong> Pressing the arrow keys in the virtual keyboard would not move the
selection in the mathfield and display a runtime error in the console.</p>
</li>
<li class="">
<p><strong>#2392</strong> Pressing the backspace key after typing several digits would delete
all the digits.</p>
</li>
<li class="">
<p><strong>#2395</strong> Added a <code>dispatchEvent</code> command which can be attached to a custom
keycap.</p>
<p>Its first argument is the name of the dispatched event, and the second
argument is an object with the <code>detail</code> property, which is the data associated
with the event.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    label</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;✨&quot;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    command</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;dispatchEvent(&#x27;customEvent&#x27;, {detail: &#x27;some data&#x27;})&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">}</span><br></span></code></pre></div></div>
<p>To handle the event, add an event listener to the mathfield element:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">addEventListener</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&#x27;customEvent&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">ev</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  console</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">log</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">ev</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">detail</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre></div></div>
</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="0990-2024-06-10">0.99.0 <em>2024-06-10</em><a href="#0990-2024-06-10" class="hash-link" aria-label="Direct link to 0990-2024-06-10" title="Direct link to 0990-2024-06-10" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="breaking-changes-2">Breaking Changes<a href="#breaking-changes-2" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes" translate="no">​</a></h3><ul>
<li class="">
<p>The <code>mf.offsetFromPoint()</code> method has been renamed <code>mf.getOffsetFromPoint()</code></p>
</li>
<li class="">
<p>The <code>mf.setCaretPoint()</code> method has been replaced with
<code>mf.position = mf.getOffsetFromPoint()</code></p>
</li>
<li class="">
<p>The <code>mf.scriptDepth()</code> and <code>mf.hitboxFromOffset()</code> methodds have been replaced
with <code>mf.getElementInfo()</code>.</p>
<p>The <code>getElementInfo()</code> method provides more information including any id that
may have been applied with <code>\htmlId{}</code>.</p>
<p>It is useful from within a <code>click</code> handler to get more information about the
element that was clicked, e.g.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">  mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">getElementInfo</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">getOffsetFromPoint</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">ev</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">clientX</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> ev</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">clientY</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">)</span><br></span></code></pre></div></div>
<p>The info returned is an object with the following properties:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token keyword" style="color:var(--base-0e)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">type</span><span class="token plain"> </span><span class="token class-name" style="color:var(--base-0a)">ElementInfo</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--base-05)">/** The depth in the expression tree. 0 for top-level elements */</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  depth</span><span class="token operator" style="color:var(--base-06)">?</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token builtin" style="color:var(--base-09)">number</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--base-05)">/** The bounding box of the element */</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  bounds</span><span class="token operator" style="color:var(--base-06)">?</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> DOMRect</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--base-05)">/** id associated with this element or its ancestor, set with `\htmlId` or</span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token comment" style="color:var(--base-05)">     `\cssId`</span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token comment" style="color:var(--base-05)">  */</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  id</span><span class="token operator" style="color:var(--base-06)">?</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token builtin" style="color:var(--base-09)">string</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--base-05)">/** HTML attributes associated with element or its ancestores, set with</span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token comment" style="color:var(--base-05)">   * `\htmlData`</span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token comment" style="color:var(--base-05)">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  data</span><span class="token operator" style="color:var(--base-06)">?</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> Record</span><span class="token operator" style="color:var(--base-06)">&lt;</span><span class="token builtin" style="color:var(--base-09)">string</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token builtin" style="color:var(--base-09)">string</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">|</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">undefined</span><span class="token operator" style="color:var(--base-06)">&gt;</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--base-05)">/** The mode (math, text or LaTeX) */</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  mode</span><span class="token operator" style="color:var(--base-06)">?</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> ParseMode</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--base-05)">/** A LaTeX representation of the element */</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  latex</span><span class="token operator" style="color:var(--base-06)">?</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> </span><span class="token builtin" style="color:var(--base-09)">string</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--base-05)">/** The style (color, weight, variant, etc...) of this element. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  style</span><span class="token operator" style="color:var(--base-06)">?</span><span class="token operator" style="color:var(--base-06)">:</span><span class="token plain"> Style</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre></div></div>
</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="bold">Bold<a href="#bold" class="hash-link" aria-label="Direct link to Bold" title="Direct link to Bold" translate="no">​</a></h3><p>The way bold is handled in LaTeX is particularly confusing, reflecting
limitations of the text rendering technology of the time.</p><p>Various attempts have been made over the years to improve the rendering of bold,
but this has resulted in inconsistent behavior. Furthermore, various
implementations of LaTeX and LaTeX-like systems have implemented bold in
different ways.</p><p>This release introduces a more consistent and intuitive handling of bold,
although it may result in different rendering of some formulas compared to some
implementations of LaTeX.</p><p>The original bold command in LaTeX is <code>\mathbf</code>. This command renders its
argument using a bold variant of the current font. However, only letters and
numbers can be rendered by this command. It does not affect symbols, operators,
or greek characters.</p><p>For example, <code>\mathbf{a+b}</code> will render as <code>𝐚+𝐛</code>, with the <code>a</code> and <code>b</code> in bold,
but the <code>+</code> in normal weight. Characters rendered by <code>\mathbf</code> are rendered
upright, even if they would have been rendered as italic otherwise.</p><p>The <code>\boldsymbol</code> command is an alternative to <code>\mathbf</code> that affects more
characters, including Greek letters and symbols. It does not affect the style of
the characters, so they remain italic if they were italic before. However, the
inter-character spacing and italic correction may not be rendered correctly.</p><p>The <code>\bm</code> command from the <code>bm</code> package is a more modern alternative that
affects even more characters. It also preserves the style of the characters, so
they remain italic if they were italic before. The inter-character spacing and
italic correction are handled correctly.</p><p>The <code>\bm</code> command is recommended over <code>\boldsymbol</code> and <code>\mathbf</code>. However, it
is not part of the standard LaTeX distribution, so it may not always be
available.</p><p>When serializing to LaTeX, MathLive will now use <code>\mathbf</code> when possible, and
fall back to <code>\bm</code> when not. This should result in more consistent rendering of
bold text.</p><p>When parsing, MathLive will interpret both <code>\mathbf</code>, <code>\boldsymbol</code> and <code>\bm</code> as
bold.</p><p>The bold style is now consistently inherited by sub-expressions.</p><p>Similarly, when applying a bold style using <code>mf.applyStyle({weight: &quot;bold&quot;})</code>,
the bold attribute is applied to the entire selection, not just the letters and
numbers.</p><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="mode-switching">Mode Switching<a href="#mode-switching" class="hash-link" aria-label="Direct link to Mode Switching" title="Direct link to Mode Switching" translate="no">​</a></h3><ul>
<li class=""><strong>#2375</strong> The <code>switch-mode</code> command has two optionals arguments, a prefix and
suffix. The prefix is inserted before the mode switch, and the suffix after.
The command was behaving incorrectly. It now behaves as expected.</li>
<li class="">It is now possible to roundtrip between math and text mode. For example,
selecting a fraction <code>\frac{a}{b}</code> and pressing <code>alt+shift+T</code> will convert the
selection to <code>(a)/(b)</code>. Pressing <code>alt+shift+T</code> again will convert it back to
<code>\frac{a}{b}</code>.</li>
<li class="">When in LaTeX mode, changing the selection would sometimes unexpectedly exit
LaTeX mode, for example after the Select All command. This has been fixed.</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="new-features-4">New Features<a href="#new-features-4" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features" translate="no">​</a></h3><ul>
<li class="">
<p><strong><code>\href</code></strong></p>
<p>The <code>\href{url}{content}</code> command, a MathJax extension that allows a link to
be associated with some content, is now supported.</p>
<p>Clicking on the content will open the link. By default, the link is opened in
a new window, and only links with a HTTP, HTTPS or FILE protocol are allowed.
This can be controlled by the new <code>MathfieldElement.openUrl</code> property. This
property is a function with a single argument, the URL to be opened, that is
called when the content of the <code>\href</code> command is clicked on.</p>
</li>
<li class="">
<p><strong>Tooltip appearance</strong></p>
<p>Added CSS variables to control the appearance of the toolip displayed with
<code>\mathtip</code> and <code>\texttip</code>:</p>
<ul>
<li class=""><code>--tooltip-border</code></li>
<li class=""><code>--tooltip-color</code></li>
<li class=""><code>--tooltip-background-color</code></li>
<li class=""><code>--tooltip-box-shadow</code></li>
<li class=""><code>--tooltip-border-radius</code>.</li>
</ul>
</li>
<li class="">
<p>The <code>maxMatrixCols</code> property has been added that specifies the maximum number
of columns that a matrix may have. The default value is 10, which follows the
default value from the amsmath package. The property applies to all of the
matrix environments (<code>matrix</code>, <code>pmatrix</code>, <code>bmatrix</code>, etc.). This property is
also accessible via the <code>max-matrix-cols</code> attribute.</p>
</li>
<li class="">
<p>The virtual keyboard now supports variants for shifted-keys. This includes
support for Swedish specific characters such as <code>å</code>, <code>ä</code>, and <code>ö</code> and their
uppercase variants.</p>
</li>
<li class="">
<p>Accept <code>&quot;true&quot;</code> and <code>&quot;false&quot;</code> as values for on/off attributes in the
<code>&lt;math-field&gt;</code> element, for example <code>&lt;math-field smart-fence=&quot;true&quot;&gt;</code>.</p>
</li>
<li class="">
<p>Added a <code>target</code> property (a <code>MathfieldElement</code>) to the <code>onMenuSelect</code>
arguments.</p>
</li>
<li class="">
<p><strong>#2337</strong> Added an option <code>MathfieldElement.restoreFocusWhenDocumentFocused</code>
to control whether a mathfield that was previously focused regains focus when
the tab or window regains focus. This is true by default and matches the
previous behavior, and the behavior of the <code>&lt;textarea&gt;</code> element.</p>
</li>
<li class="">
<p>An alternate syntax for selectors with arguments. Selectors are used for
example to associate actions with a keycap, such as <code>switchKeyboardLayer</code>. The
previous syntax was <code>command: [&quot;switchKeyboardLayer&quot;, &quot;alt-layer&quot;]</code>, the new
syntax is <code>command: &#x27;switchKeyboardLayer(&quot;alt-layer&quot;)&#x27;</code>. This is more concise
and easier to read.</p>
</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="issues-resolved-10">Issues Resolved<a href="#issues-resolved-10" class="hash-link" aria-label="Direct link to Issues Resolved" title="Direct link to Issues Resolved" translate="no">​</a></h3><ul>
<li class=""><strong>#2387</strong> When using a macro, the spacing around the macro was incorrect in
some cases.</li>
<li class=""><strong>#2370</strong> The order of the <code>keydown</code> and <code>input</code> event is now consistent with
the <code>&lt;textarea&gt;</code> element.</li>
<li class=""><strong>#2369</strong> After typing a shortcut, using the backspace key could result in
unexpected behavior. Now, pressing the backspace key after a shortcut has been
typed will undo the conversion of the shortcut.</li>
<li class=""><strong>#2380</strong> In some cases, when using the menu, some spurious focus/blur events
would be dispatched.</li>
<li class=""><strong>#2384</strong> When using repeating decimals after a comma (i.e. <code>123{,}4(1)</code>), do
not use a <code>\left...\right</code> command in order to get the proper spacing.</li>
<li class=""><strong>#2349</strong> The positioning of subscripts for extensible symbols, such as <code>\int</code>
was incorrect.</li>
<li class=""><strong>#2326</strong> The Cut and Copy commands in the context menu are now working
correctly in Safari.</li>
<li class=""><strong>#2309</strong> When using styled text (e.g. <code>\textit{}</code>), the content could
sometimes be serialized with an unnecessary <code>\text{}</code> command, i.e.
<code>\text{\textit{...}}</code>.</li>
<li class=""><strong>#2376</strong> When <code>smart-fence</code> was off, the <code>{</code> and <code>}</code> keys would not insert
braces.</li>
<li class=""><strong>#2273</strong> Using one of the Chinese locales would result in a runtime error.</li>
<li class=""><strong>#2355</strong> When pressing the down arrow key in <code>\sqrt[#?]{1}</code> from the <code>#?</code>
position, a runtime exception would occur.</li>
<li class=""><strong>#2298</strong> When using screen readers, pressing the spacebar would not always
correctly focus the mathfield.</li>
<li class=""><strong>#2297</strong> In some cases, when using touch input, the previously selected item
in a context menu would appear to be selected.</li>
<li class=""><strong>#2289</strong> When changing the value of the mathfield, the selection is now
preserved. In addition, when using a controlled component with React an
unnecessary update is avoided.</li>
<li class=""><strong>#2282</strong> Don&#x27;t display selection when the mathfield is not focused</li>
<li class=""><strong>#2280</strong> Handle better very deeply nested expressions</li>
<li class=""><strong>#2261</strong> When a style was applied to an empty range, the style was ignored.</li>
<li class=""><strong>#2208</strong> When setting a variant style (i.e. blackboard, fraktur, etc...) the
style is no longer adopted by subsequent characters.</li>
<li class=""><strong>#2104</strong>, <strong>#2260</strong> When replacing the selection by typing, the new content
would not always be correctly styled. The content now inherits the style of
the selection, or the style of the insertion point if the selection is
collapsed.</li>
<li class="">Better handle the case where the mathlive library gets loaded before the DOM
is constructed.</li>
<li class="">On Safari, the Insert Matrix submenu was displayed incorrectly.</li>
<li class="">When the mathfield is an iframe, the <code>before-virtual-keyboard-toggle</code> and
<code>virtual-keyboard-toggle</code> events are now dispatched on the
<code>window.mathVirtualKeyboard</code> object of the iframe. This can be used to detect
a request (and prevent) for the virtual keyboard to be displayed.</li>
<li class="">If the unknown in an expression was a complex identifier, such as
<code>\mathcal{C}</code> it would not be displayed correctly in the &quot;Solve for&quot; menu.</li>
<li class="">The <code>\mathrlap</code> command was incorrectly rendering like <code>\mathllap</code>.</li>
</ul><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="0986-2024-01-27">0.98.6 <em>2024-01-27</em><a href="#0986-2024-01-27" class="hash-link" aria-label="Direct link to 0986-2024-01-27" title="Direct link to 0986-2024-01-27" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="new-features-5">New Features<a href="#new-features-5" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features" translate="no">​</a></h3><ul>
<li class="">Added <code>StaticRenderOptions.TeX.className</code> to specify that an element with the
specified class name should be rendered as a LaTeX formula.</li>
<li class=""><strong>#2273</strong> Added a <code>--keycap-width</code> CSS variable to specify the width of a
keycap in a virtual-keyboard. By default, if the CSS variable is not
specified, the width of the keycap is calculated based on the width of the
parent container. However, this requires browser that support the <code>cq</code> CSS
unit. If the browser does not support the <code>cq</code> CSS unit, this CSS variable can
be used to specify the width of the keycap. (See <strong>#2028</strong>, <strong>#2133</strong>)</li>
<li class=""><strong>#2255</strong> Support for <code>gather*</code> environment</li>
<li class=""><strong>#2242</strong> A virtual keyboard keycap can now include a tooltip for its shifted
variant.</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="issues-resolved-11">Issues Resolved<a href="#issues-resolved-11" class="hash-link" aria-label="Direct link to Issues Resolved" title="Direct link to Issues Resolved" translate="no">​</a></h3><ul>
<li class="">When using some APIs such as <code>renderToMarkup()</code> or <code>renderToMathML()</code> in a
server-side environment, a runtime error would occur.</li>
<li class="">When tabbing in a mathfield with multiple prompts, tab out of the mathfield
when the last or first prompt is reached.</li>
<li class="">**#2243##, **#2245** Unicode characters such as <code>²</code> or <code>ℂ</code> are now
interpreted as their LaTeX equivalent only when in math mode.</li>
<li class=""><strong>#2237</strong> The command <code>\iff</code> now renders correctly</li>
<li class=""><strong>#2246</strong> Changing the <code>mf.value</code> property would not always update the value
of the mathfield.</li>
<li class=""><strong>#2244</strong> Worked around an issue in Safari on iOS where doing a double-tap on
the virtual keyboard would result in the mathfield losing focus and the
virtualy keyboard closing.</li>
<li class=""><strong>#2252</strong> At some viewport sizes, the integral sign in the symbols virtual
keyboard would be clipped.</li>
<li class=""><strong>#2235</strong> Improved serialization to ASCIIMath.</li>
<li class="">Avoid conflicts with some class names when rendering static math.</li>
<li class="">When using <code>renderMathToElement()</code> or <code>renderMathInDocument()</code>, coalesce
adjacent text nodes.</li>
<li class="">Correctly parse the <code>\cfrac</code> optional alignment argument</li>
<li class="">The commands <code>\bf</code>, <code>\bfseries</code>, <code>\mdseries</code>, <code>\upshape</code>, <code>\itshape</code>,
<code>\slshape</code>, <code>\scshape</code>, <code>\rmfamily</code>, <code>\sffamily</code>, <code>\ttfamily</code> are now
interpreted correctly.</li>
<li class="">The command <code>\operatorname</code> is now spoken correctly</li>
<li class=""><strong>#2152</strong> On Safari, fill-in-the-blank prompts containing a fraction were
rendered incorrectly.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_VsjB"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/mathfield/demo/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Demo</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/mathfield/virtual-keyboard/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using the Virtual Keyboard</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#01082-2025-11-13" class="table-of-contents__link toc-highlight">0.108.2 <em>2025-11-13</em></a></li><li><a href="#01081-2025-11-11" class="table-of-contents__link toc-highlight">0.108.1 <em>2025-11-11</em></a></li><li><a href="#01080-2025-11-09" class="table-of-contents__link toc-highlight">0.108.0 <em>2025-11-09</em></a></li><li><a href="#01071-2025-09-30" class="table-of-contents__link toc-highlight">0.107.1 <em>2025-09-30</em></a></li><li><a href="#01070-2025-08-17" class="table-of-contents__link toc-highlight">0.107.0 <em>2025-08-17</em></a></li><li><a href="#01060-2025-07-11" class="table-of-contents__link toc-highlight">0.106.0 <em>2025-07-11</em></a></li><li><a href="#01053-2025-05-14" class="table-of-contents__link toc-highlight">0.105.3 <em>2025-05-14</em></a></li><li><a href="#01051-2025-04-18" class="table-of-contents__link toc-highlight">0.105.1 <em>2025-04-18</em></a></li><li><a href="#01050-2025-03-27" class="table-of-contents__link toc-highlight">0.105.0 <em>2025-03-27</em></a></li><li><a href="#01042-2025-03-23" class="table-of-contents__link toc-highlight">0.104.2 <em>2025-03-23</em></a></li><li><a href="#01041-2025-03-18" class="table-of-contents__link toc-highlight">0.104.1 <em>2025-03-18</em></a></li><li><a href="#01040-2025-02-08" class="table-of-contents__link toc-highlight">0.104.0 <em>2025-02-08</em></a></li><li><a href="#01030-2024-12-10" class="table-of-contents__link toc-highlight">0.103.0 <em>2024-12-10</em></a></li><li><a href="#01020-2024-11-29" class="table-of-contents__link toc-highlight">0.102.0 <em>2024-11-29</em></a></li><li><a href="#01012-2024-11-15" class="table-of-contents__link toc-highlight">0.101.2 <em>2024-11-15</em></a></li><li><a href="#01011-2024-10-15" class="table-of-contents__link toc-highlight">0.101.1 <em>2024-10-15</em></a></li><li><a href="#01010-2024-07-17" class="table-of-contents__link toc-highlight">0.101.0 <em>2024-07-17</em></a></li><li><a href="#01000-2024-06-12" class="table-of-contents__link toc-highlight">0.100.0 <em>2024-06-12</em></a></li><li><a href="#0990-2024-06-10" class="table-of-contents__link toc-highlight">0.99.0 <em>2024-06-10</em></a></li><li><a href="#0986-2024-01-27" class="table-of-contents__link toc-highlight">0.98.6 <em>2024-01-27</em></a></li></ul></div></div></div></div></main></div></div></div><div class="shared-footer"><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">SDKs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mathfield/">Mathfield</a></li><li class="footer__item"><a class="footer__link-item" href="/compute-engine/">Compute Engine</a></li><li class="footer__item"><a class="footer__link-item" href="/math-json/">MathJSON</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/cortex-js" target="_blank" rel="noopener noreferrer" class="footer__link-item">
            <svg class="icon-one-rem"><use role="none" xlink:href="/icons.svg#github"></use></svg>
            GitHub
            <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg>
          </a></li><li class="footer__item"><a href="https://discord.gg/yhmvVeJ4Hd" target="_blank" rel="noopener noreferrer" class="footer__link-item">
            <svg class="icon-one-rem"><use role="none" xlink:href="/icons.svg#discord"></use></svg>
            Discord
            <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg>
          </a></li><li class="footer__item"><a href="https://chatgpt.com/g/g-8YgEfR7ig-mathlive-gpt" target="_blank" rel="noopener noreferrer" class="footer__link-item">
            <svg class="icon-one-rem"><use role="none" xlink:href="/icons.svg#openai"></use></svg>
            MathLive GPT
            <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg>
          </a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/about/">About Us</a></li></ul></div></div></div></footer></div></div>
</body>
</html>