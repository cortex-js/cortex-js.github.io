<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-mathfield/interacting" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Interacting with a Mathfield · CortexJS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cortexjs.io/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cortexjs.io/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://cortexjs.io/mathfield/guides/interacting/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Interacting with a Mathfield · CortexJS"><meta data-rh="true" name="description" content="Changing the Content of a Mathfield"><meta data-rh="true" property="og:description" content="Changing the Content of a Mathfield"><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://cortexjs.io/mathfield/guides/interacting/"><link data-rh="true" rel="alternate" href="https://cortexjs.io/mathfield/guides/interacting/" hreflang="en"><link data-rh="true" rel="alternate" href="https://cortexjs.io/mathfield/guides/interacting/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Q23Y5RN3UQ-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Interact","item":"https://cortexjs.io/mathfield/guides/interacting/"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="CortexJS" href="/opensearch.xml">

<link rel="stylesheet" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.11/codemirror.min.css">
<script>!function(){var e,t;window.moduleMap||(window.moduleMap={}),window.moduleMap={...window.moduleMap,mathlive:"https://esm.run/mathlive","compute-engine":"https://esm.run/@cortex-js/compute-engine"},(e=["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js","https://unpkg.com/@cortex-js/compute-engine","https://cdn.jsdelivr.net/npm/mathlive","https://cdn.jsdelivr.net/npm/@ui-js/code-playground/dist/code-playground.min.js@module"]).forEach(((o,n)=>{const m=o.endsWith("@module"),d="script"+function(e,t=0){let o=3735928559^t,n=1103547991^t;for(let t=0;t<e.length;t++){const m=e.charCodeAt(t);o=Math.imul(o^m,2654435761),n=Math.imul(n^m,1597334677)}return o=Math.imul(o^o>>>16,2246822507),o^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(o^o>>>13,3266489909),4294967296*(2097151&n)+(o>>>0)}(o=o.replace("@module","")).toString(36);if(document.getElementById(d))return;const i=document.createElement("script");m&&(i.type="module"),i.id=d,i.src=o,i.async=!1,t&&n===e.length-1&&(i.onload=t),document.head.appendChild(i)}))}()</script>
<link rel="preconnect" href="https://rsms.me/">
<link rel="stylesheet" href="https://rsms.me/inter/inter.css" media="print" onload="this.media=&#39;all&#39;"><link rel="stylesheet" href="/assets/css/styles.20a7b4fd.css">
<script src="/assets/js/runtime~main.664743ab.js" defer="defer"></script>
<script src="/assets/js/main.575affe5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Farsight Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="42" width="42"><img src="/img/logo.svg" alt="Farsight Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="42" width="42"></div><b class="navbar__title text--truncate">CortexJS</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/mathfield/">Mathfield</a><a class="navbar__item navbar__link" href="/compute-engine/">Compute Engine</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/cortex-js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" icon="github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/mathfield/">Mathfield</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item compass-icon"><a class="menu__link" tabindex="0" href="/mathfield/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item flask-icon"><a class="menu__link" tabindex="0" href="/mathfield/demo/">Demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item changelog-icon"><a class="menu__link" tabindex="0" href="/mathfield/changelog/">Changelog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/mathfield/virtual-keyboard/">Using the Virtual Keyboard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/mathfield/matrix/">Using the Matrix Editor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/mathfield/reference/commands/">LaTeX Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item reference-icon"><a class="menu__link" tabindex="0" href="/mathfield/reference/keybindings/">Keyboard Shortcuts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item checklist-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/getting-started/">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/integration/">Add A Mathfield to Your Project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/react/">Using React</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/svelte/">Using Svelte</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mathfield/guides/interacting/">Interact</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/customizing/">Customize</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/menu/">Menu</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/virtual-keyboard/">Virtual Keyboard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/shortcuts/">Keybindings and Inline Shortcuts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/fill-in-the-blank/">Fill-in-the-Blank</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/commands/">Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/macros/">Macros</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/speech/">Speech</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/guides/static/">Static Math Formulas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/mathfield/lifecycle/">Web Component Lifecycle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item guide-icon"><a class="menu__link" tabindex="0" href="/compute-engine/guides/security/">Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item sdk-icon"><a class="menu__link" tabindex="0" href="/mathfield/api/">API Reference</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/compute-engine/">Compute Engine</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Tutorials</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item tutorial-icon"><a class="menu__link" tabindex="0" href="/tutorials/simple-quiz/">Simple Quiz</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/about/">Additional Resources</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Mathfield</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Interact</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Interacting with a Mathfield</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="changing-the-content-of-a-mathfield">Changing the Content of a Mathfield<a href="#changing-the-content-of-a-mathfield" class="hash-link" aria-label="Direct link to Changing the Content of a Mathfield" title="Direct link to Changing the Content of a Mathfield">​</a></h2>
<p><strong>To change the value of a <code>&lt;math-field&gt;</code> element programatically</strong> set its <code>value</code>
property.</p>
<p>In the playground below, the <strong>LaTeX</strong> input field is editable and is reflected
in the mathfield, and vice-versa.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>Note that we use the <code>silenceNotifications</code> option when
changing the content of the mathfield, to prevent an <code>&quot;input&quot;</code> event from being
triggered and creating an infinite loop.</p></div></div>
<code-playground><div slot="html">&lt;label&gt;Mathfield&lt;/label&gt;
<!-- -->&lt;math-field id=&quot;formula&quot;&gt;
<!-- -->    <!-- -->x=\frac{-b\pm \sqrt{b^2-4ac}}{2a}
<!-- -->&lt;/math-field&gt;
<!-- -->&lt;label&gt;Latex&lt;/label&gt;
<!-- -->&lt;textarea id=&quot;latex&quot; autocapitalize=&quot;off&quot; autocomplete=&quot;off&quot;
<!-- -->  <!-- -->autocorrect=&quot;off&quot; spellcheck=&quot;false&quot;&gt;&lt;/textarea&gt;
</div><div slot="javascript">const mf = document.getElementById(&quot;formula&quot;);
<!-- -->const latex = document.getElementById(&quot;latex&quot;);
<!-- -->//
<!-- -->mf.addEventListener(&quot;input&quot;,(ev) =&gt; latex.value = mf.value);
<!-- -->//
<!-- -->latex.value = mf.value;
<!-- -->//
<!-- -->// Listen for changes in the &quot;latex&quot; text field,
<!-- -->// and reflect its value in the mathfield.
<!-- -->//
<!-- -->latex.addEventListener(&quot;input&quot;, (ev) =&gt;
<!-- -->    <!-- -->mf.setValue(
<!-- -->      <!-- -->ev.target.value,
<!-- -->      <!-- -->{silenceNotifications: true}
<!-- -->    <!-- -->)
<!-- -->);
<!-- -->
</div></code-playground>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reading-the-content-of-a-mathfield">Reading the Content of a Mathfield<a href="#reading-the-content-of-a-mathfield" class="hash-link" aria-label="Direct link to Reading the Content of a Mathfield" title="Direct link to Reading the Content of a Mathfield">​</a></h2>
<p><strong>To read the content of a <code>&lt;math-field&gt;</code> element as a LaTeX string</strong> use its <code>value</code> property,
just like with a <code>&lt;textarea&gt;</code>.</p>
<p><strong>To be notified when the content of the mathfield is modified</strong> listen for
an <code>&quot;input&quot;</code> event.</p>
<p><strong>Try</strong>: modify the <code>&quot;input&quot;</code> event below to a <code>&quot;change&quot;</code> event. Notice how the <code>&quot;change&quot;</code> event
is only sent if you press the <kbd>RETURN</kbd> or <kbd>ENTER</kbd> key, or when the mathfield
loses focus and the content has been modified.</p>
<code-playground><div slot="html">&lt;math-field id=&quot;formula&quot;&gt;
<!-- -->  <!-- -->x=\frac{-b\pm \sqrt{b^2-4ac}}{2a}
<!-- -->&lt;/math-field&gt;
</div><div slot="javascript">document.getElementById(&#x27;formula&#x27;).addEventListener(&#x27;input&#x27;,(ev) =&gt; {
<!-- -->  <!-- -->// `ev.target` is an instance of `MathfieldElement`
<!-- -->  <!-- -->console.log(ev.target.value);
<!-- -->});
<!-- -->
</div></code-playground>
<hr>
<p>Reading the <code>value</code> property is equivalent to calling the <code>getValue()</code> method with
no argument.</p>
<p><strong>To control the format of the result</strong>, pass options to <a href="/docs/mathfield/#(%22mathfield-element%22%3Amodule).(MathfieldElement%3Aclass).(getValue%3Ainstance)"><code>getValue()</code></a>.
For example to get the content as a MathJSON expression, use <code>mf.getValue(&#x27;math-json&#x27;)</code>.</p>
<p><strong>Try:</strong> <a href="/docs/mathfield/#(%22mathfield%22%3Amodule).(OutputFormat%3Atype)">Other formats</a> are available: change <code>&quot;math-json&quot;</code> to <code>&quot;spoken-text&quot;</code>.</p>
<code-playground><div slot="html">&lt;math-field id=&quot;formula&quot;&gt;
<!-- -->  <!-- -->x=\frac{-b\pm \sqrt{b^2-4ac}}{2a}
<!-- -->&lt;/math-field&gt;
<!-- -->
</div><div slot="javascript">import &#x27;compute-engine&#x27;;
<!-- -->const mf = document.getElementById(&#x27;formula&#x27;);
<!-- -->
<!-- -->// `ev.target` is an instance of `MathfieldElement`
<!-- -->mf.addEventListener(&#x27;input&#x27;,
<!-- -->  <!-- -->(ev) =&gt; console.log(ev.target.getValue(&#x27;math-json&#x27;))
<!-- -->);
</div></code-playground>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-a-mathfield-with-the-compute-engine">Using a Mathfield with the Compute Engine<a href="#using-a-mathfield-with-the-compute-engine" class="hash-link" aria-label="Direct link to Using a Mathfield with the Compute Engine" title="Direct link to Using a Mathfield with the Compute Engine">​</a></h2>
<p>The <a href="/math-json/">MathJSON</a> format is a lightweight mathematical notation interchange format.</p>
<p>The Compute Engine is a JavaScript library that can perform
mathematical operations on MathJSON expressions.</p>
<p><strong>To use the Compute Engine</strong>, import the Compute Engine library, e.g. <code>import &quot;https://esm.run/@cortex-js/compute-engine&quot;</code></p>
<p>If the Compute Engine has been loaded in the page, mathfields will automatically
create an instance of the compute engine when needed.</p>
<p><strong>To access that shared Compute Engine instance</strong>, use <code>MathfieldElement.computeEngine</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>If the value returned is <code>undefined</code>, it means that the Compute Engine has not
been loaded in the page.</p></div></div>
<p>You can also create your own instance of the Compute Engine and pass it to the
mathfield using the <code>computeEngine</code> property.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token keyword" style="color:var(--base-0e)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"> ComputeEngine </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;compute-engine&#x27;</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">MathfieldElement</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">computeEngine </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">new</span><span class="token plain"> </span><span class="token class-name" style="color:var(--base-0a)">ComputeEngine</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>This is usually not necessary and you can rely on the default shared instance
of the Compute Engine.</p></div></div>
<p><strong>To read the content of a <code>&lt;math-field&gt;</code> element as a boxed MathJSON expression</strong> use the mathfield <code>expression</code> property.</p>
<p>Using <code>mf.expression</code> is equivalent to calling <code>MathfieldElement.computeEngine.parse(mf.value)</code> or <code>MathfieldElement.computeEngine.box(mf.getValue(&quot;math-json&quot;))</code>.</p>
<p>Once you have a boxed expression, you can perform operations on it using the
Compute Engine.</p>
<p>For example, you can:</p>
<ul>
<li><a href="/compute-engine/guides/evaluate/">evaluate it</a> using <code>mf.expression.evaluate()</code></li>
<li>simplify it using <code>mf.expression.simplify()</code></li>
<li><a href="/compute-engine/guides/symbolic-computing/#comparing-expressions">compare it to another expression</a> using <code>mf.expression.isEqual()</code> and
<code>mf.expression.isSame()</code></li>
<li><a href="/compute-engine/guides/compiling/">compile it</a> to JavaScript</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>Note that the expressions are returned by default in a canonical form, which means that
they may be different from the original input. For example, <code>x + 1</code> and <code>1 + x</code>
are considered equal, and will be returned as <code>1 + x</code>. If necessary you
can request non-canonical forms.</p></div></div>
<div class="readMore_KWn8"><a href="/compute-engine/guides/canonical-form/"><p>Learn more about <strong>canonical forms</strong>.<svg class="icon_qj0s chevronRightBold_bbMj"><use xlink:href="/icons.svg#chevron-right-bold"></use></svg></p></a></div>
<p>You can also extend the definitions of the Compute Engine <a href="/compute-engine/guides/augmenting/">by adding your own</a>.</p>
<code-playground><div slot="html">&lt;math-field id=&quot;formula&quot;&gt;
<!-- -->  <!-- -->\mathrm{Expand}((a+b)^6)
<!-- -->&lt;/math-field&gt;
<!-- -->
</div><div slot="javascript">import &#x27;compute-engine&#x27;;
<!-- -->const mf = document.getElementById(&#x27;formula&#x27;);
<!-- -->mf.addEventListener(&#x27;input&#x27;, () =&gt;
<!-- -->  <!-- -->console.log(mf.expression.evaluate())
<!-- -->);
<!-- -->console.log(mf.expression.evaluate());
</div></code-playground>
<div class="readMore_KWn8"><a href="/compute-engine/guides/symbolic-computing/"><p>Learn more about <strong>symbolic computing</strong> with the Compute Engine<svg class="icon_qj0s chevronRightBold_bbMj"><use xlink:href="/icons.svg#chevron-right-bold"></use></svg></p></a></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="listening-for-changes-to-a-mathfield">Listening for Changes to a Mathfield<a href="#listening-for-changes-to-a-mathfield" class="hash-link" aria-label="Direct link to Listening for Changes to a Mathfield" title="Direct link to Listening for Changes to a Mathfield">​</a></h2>
<p>The mathfield element dispatches the <code>beforeinput</code> and <code>input</code>
<a href="https://www.w3.org/TR/input-events-1/" target="_blank" rel="noopener noreferrer">Input Events</a>, which are also
implemented by <code>&lt;textarea&gt;</code> and similar elements.</p>
<p>The <code>beforeinput</code> and <code>input</code> events implement the <code>InputEvent</code> interface.</p>
<p>These events are sent before (<code>beforeinput</code> event) and after (<code>input</code> event) a
user attempts to edit the mathfield. This includes insertion and deletion of
content, and formatting changes.</p>
<p>The events include an <code>inputType</code> property that describe what caused the event
to be dispatched.</p>
<div class="symbols-table first-column-header" style="--first-col-width:21ch"><table><thead><tr><th style="text-align:left"><code>inputType</code></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left"><code>insertText</code></td><td style="text-align:left">Some content was added. It could be math content, plain text or raw latex. It could also be a row or column in matrix that was added.</td></tr><tr><td style="text-align:left"><code>insertLineBreak</code></td><td style="text-align:left">The <kbd>RETURN</kbd> or <kbd>ENTER</kbd> key was pressed. Note that the actual content of the mathfield may not have changed.</td></tr><tr><td style="text-align:left"><code>insertFromPaste</code></td><td style="text-align:left">The content of the mathfield was changed because of a paste operation</td></tr><tr><td style="text-align:left"><code>deleteWordBackward</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>deleteWordForward</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>deleteWordForward</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>deleteSoftLineBackward</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>deleteSoftLineForward</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>deleteHardLineBackward</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>deleteHardLineForward</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>deleteByCut</code></td><td style="text-align:left">The content was changed because of a cut operation</td></tr><tr><td style="text-align:left"><code>deleteContent</code></td><td style="text-align:left">Some content was deleted, but no particular direction applied</td></tr><tr><td style="text-align:left"><code>deleteContentBackward</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>deleteContentForward</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>historyUndo</code></td><td style="text-align:left">The content was changed because of an undo command</td></tr><tr><td style="text-align:left"><code>historyRedo</code></td><td style="text-align:left">The content was changed because of a redo command</td></tr></tbody></table></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>On iOS, the <code>inputType</code> property is removed. However, its content can also be access as <code>ev.data</code>. Until this issue is addressed in iOS, for better compatibility, use <code>ev.data</code>.</p></div></div>
<p>The <code>beforeinput</code> event is dispatched before any modifications to the mathfield
have been done. This event is cancelable. Calling <code>preventDefault()</code> on the
event will cause the modification to be prevented.</p>
<p>If the <code>beforeinput</code> event is not canceled, the mathfield content is modified
and a <code>input</code> event is dispatched. The <code>input</code> event is not cancelable.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="detecting-when-the-user-has-finished-editing-a-mathfield">Detecting When the User has Finished Editing a Mathfield<a href="#detecting-when-the-user-has-finished-editing-a-mathfield" class="hash-link" aria-label="Direct link to Detecting When the User has Finished Editing a Mathfield" title="Direct link to Detecting When the User has Finished Editing a Mathfield">​</a></h2>
<p><strong>To detect when the user presses the <kbd>RETURN</kbd> or <kbd>ENTER</kbd> key in a mathfield</strong>,
listen for the <code>change</code> event.</p>
<p>Note that this event is not fired when in LaTeX editing mode, where <strong>Return</strong>
or <strong>Enter</strong> is used to exit the mode.</p>
<p>This event is also fired if the mathfield loses focus, even if the user did not
use the keyboard. This behavior matches the <code>&lt;textarea&gt;</code> element.</p>
<p><strong>To listen specifically for a press of the <kbd>RETURN</kbd> or <kbd>ENTER</kbd> key on the
keyboard</strong> listen for an <code>input</code> event with an <code>inputType</code>
(or <code>ev.data</code> on iOS) property of <code>&quot;insertLineBreak&quot;</code>.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">addEventListener</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&#x27;beforeinput&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">ev</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--base-0e)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">ev</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">inputType </span><span class="token operator" style="color:var(--base-06)">===</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;insertLineBreak&#x27;</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">executeCommand</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&quot;moveToNextPlaceholder&quot;</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    ev</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">preventDefault</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="detecting-a-click-on-a-mathfield">Detecting a Click on a Mathfield<a href="#detecting-a-click-on-a-mathfield" class="hash-link" aria-label="Direct link to Detecting a Click on a Mathfield" title="Direct link to Detecting a Click on a Mathfield">​</a></h2>
<p>In most cases MathLive will respond to mouse and keyboard interactions with
the mathfield. However, in some cases it might be useful to detect when a
mathfield is clicked on. For example, you could display one or more read-only
mathfields in a list and prompt the user to pick one by clicking on it.</p>
<p>In general, to be notified of an event, use <code>mf.addEventListener()</code>. This
includes some generic events, as well as some that are specific to mathfields.</p>
<p>Events that target a DOM element inside the mathfield (inside the shadow DOM)
will bubble and be retargeted to appear as if they had targeted the
mathfield (that is, the <code>evt.target</code> will be the mathfield itself).</p>
<p>This include the following standard events:</p>
<ul>
<li><code>change</code>: the <kbd>RETURN</kbd> or <kbd>ENTER</kbd> key was pressed, or the field lost focus.</li>
<li><code>blur</code>, <code>focus</code>, <code>focusin</code>, <code>focusout</code></li>
<li><code>click</code></li>
<li><code>mousedown</code>, <code>mouseup</code>, <code>mousemove</code>, <code>mouseout, </code>mouseover`</li>
<li><code>beforeinput</code>, <code>input</code>. If the <code>inputType</code> property of the event is <code>&quot;insertLineBreak&quot;</code> the <kbd>RETURN</kbd> or <kbd>ENTER</kbd> key was pressed</li>
<li><code>keydown</code>, <code>keypress</code>, <code>keyup</code></li>
<li><code>wheel</code></li>
<li>all the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events" target="_blank" rel="noopener noreferrer">pointer events</a> such as <code>pointerdown</code>, <code>pointerup</code>, etc... and all the touch events</li>
</ul>
<p>As well as these mathfield specific events:</p>
<ul>
<li><code>mount</code>: the mathfield has been connected to the DOM</li>
<li><code>unmount</code>: the mathfield is no longer connected to the DOM</li>
<li><code>focus-out</code>: tab key interactions</li>
<li><code>move-out</code>: arrow key interactions</li>
<li><code>mode-change</code>: change to <code>math</code>, <code>text</code> or <code>latex</code> mode</li>
<li><code>read-aloud-status-change</code></li>
<li><code>selection-change</code></li>
<li><code>undo-state-change</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="detecting-navigation-out-of-a-mathfield">Detecting Navigation out of a Mathfield<a href="#detecting-navigation-out-of-a-mathfield" class="hash-link" aria-label="Direct link to Detecting Navigation out of a Mathfield" title="Direct link to Detecting Navigation out of a Mathfield">​</a></h2>
<p>A user may navigate outside of a mathfield by pressing the arrow keys, or the tab, home and end keys.</p>
<p>By default, the mathfield reacts as a standard textarea field: moving to the next focusable element when the <kbd>TAB</kbd> (or <kbd>SHIFT+TAB</kbd>) key is pressed, and
doing nothing when reaching the start or end of the mathfield when navigation with the arrow keys.</p>
<p>In some cases, you may want to implement a different behavior. For example if a mathfield is embedded inside an editable paragraph, you may want the arrow keys to exit the mathfield when reaching the end/start. Or you may want the <kbd>TAB</kbd> key to simply move the caret to the end/start of the mathfield.</p>
<p><strong>To change the behavior of a mathfield when navigation out of a mathfield</strong> listen
for the <code>focus-out</code> and <code>move-out</code> events.</p>
<p>The <code>detail</code> property of those events indicate the direction of navigation.
To cancel the default behavior, use <code>ev.preventDefault()</code>.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">addEventListener</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&#x27;move-out&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">ev</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">ev</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">preventDefault</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--base-05)">// Remove focus from mathfield</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">blur</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--base-05)">// Focus some other element, use ev.detail.direction to detect if </span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--base-05)">// navigating backward, forward, upward or downward</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--base-05)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">addEventListener</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&#x27;focus-out&#x27;</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">ev</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  ev</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">preventDefault</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--base-05)">// Move the cursor to the start/end of the mathfield on tab</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--base-0e)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">ev</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">detail</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">direction </span><span class="token operator" style="color:var(--base-06)">===</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;forward&#x27;</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">executeCommand</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&#x27;moveToMathfieldEnd&#x27;</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--base-0e)">else</span><span class="token plain"> </span><span class="token keyword" style="color:var(--base-0e)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">ev</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">detail</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token plain">direction </span><span class="token operator" style="color:var(--base-06)">===</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;backward&#x27;</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">executeCommand</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token string" style="color:var(--base-0b)">&#x27;moveToMathfieldStart&#x27;</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--base-06)">}</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token punctuation" style="color:var(--base-06)">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="interacting-with-the-clipboard">Interacting with the Clipboard<a href="#interacting-with-the-clipboard" class="hash-link" aria-label="Direct link to Interacting with the Clipboard" title="Direct link to Interacting with the Clipboard">​</a></h2>
<p>Users can export the content of the mathfield by using standard <strong>Copy</strong>/<strong>Cut</strong>
commands (<kbd>Control/⌘</kbd> <kbd>X</kbd> and <kbd>Control/⌘</kbd> <kbd>C</kbd>).</p>
<p>Multiple flavors are put on the clipboard:</p>
<div class="symbols-table first-column-header"><table><thead><tr><th style="text-align:left"></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left"><code>text/plain</code></td><td style="text-align:left">LaTeX wrapped with a <code>$$</code>.</td></tr><tr><td style="text-align:left"><code>application/x-latex</code></td><td style="text-align:left">Raw LaTeX</td></tr><tr><td style="text-align:left"><code>application/json</code></td><td style="text-align:left">A MathJSON representation of the formula.</td></tr></tbody></table></div>
<p>The recipient of the <strong>Paste</strong> operation can pick whichever is most appropriate.
If the recipient is a web app, the specific flavor can be accessed using
the <code>event.clipboardData.getData()</code> API. If the recipient is a native app,
the most popular browsers currently only make accessible the text flavor,
with a LaTeX representation of the formula.</p>
<p>The LaTeX in the <code>text/plain</code> flavor is &quot;wrapped&quot; to make it easier for the
recipient of the paste to recognize that this content is in LaTeX format.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>For improved interoperability, the exported LaTeX uses the <code>latex-expanded</code>
format. In this format, any macros in the formula are expanded to their
definition. For example, the <code>\differentialD</code> command is exported as its
corresponding definition, <code>\mathrm{d}</code>.</p></div></div>
<p><strong>To customize the content of the <code>text/plain</code> flavor</strong>, use the <code>onExport()</code> hook.</p>
<p>For example, to wrap the exported latex with <code>&lt;math&gt;...&lt;/math&gt;</code> instead:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function-variable function" style="color:var(--base-0a)">onExport</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">mf</span><span class="token parameter punctuation" style="color:var(--base-06)">,</span><span class="token parameter"> latex</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:var(--base-0b)">`</span><span class="token template-string string" style="color:var(--base-0b)">&lt;math&gt;</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--base-06)">${</span><span class="token template-string interpolation">latex</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--base-06)">}</span><span class="token template-string string" style="color:var(--base-0b)">&lt;/math&gt;</span><span class="token template-string template-punctuation string" style="color:var(--base-0b)">`</span><br></span></code></pre></div></div>
<p><strong>To export the &quot;raw&quot; (not expanded) LaTeX)</strong>, use:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function-variable function" style="color:var(--base-0a)">onExport</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">mf</span><span class="token parameter punctuation" style="color:var(--base-06)">,</span><span class="token parameter"> latex</span><span class="token parameter punctuation" style="color:var(--base-06)">,</span><span class="token parameter"> range</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:var(--base-0b)">`</span><span class="token template-string string" style="color:var(--base-0b)">$$</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--base-06)">${</span><span class="token template-string interpolation">mf</span><span class="token template-string interpolation punctuation" style="color:var(--base-06)">.</span><span class="token template-string interpolation function" style="color:var(--base-0a)">getValue</span><span class="token template-string interpolation punctuation" style="color:var(--base-06)">(</span><span class="token template-string interpolation">range</span><span class="token template-string interpolation punctuation" style="color:var(--base-06)">,</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:var(--base-0b)">&#x27;latex&#x27;</span><span class="token template-string interpolation punctuation" style="color:var(--base-06)">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--base-06)">}</span><span class="token template-string string" style="color:var(--base-0b)">$$</span><span class="token template-string template-punctuation string" style="color:var(--base-0b)">`</span><br></span></code></pre></div></div>
<p>The exported format doesn&#x27;t have to be LaTeX. To export ASCIIMath instead:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:var(--console-color);--prism-background-color:var(--console-background)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:var(--console-color);background-color:var(--console-background)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:var(--console-color)"><span class="token plain">mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function-variable function" style="color:var(--base-0a)">onExport</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token parameter">mf</span><span class="token parameter punctuation" style="color:var(--base-06)">,</span><span class="token parameter"> latex</span><span class="token parameter punctuation" style="color:var(--base-06)">,</span><span class="token parameter"> range</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">=&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:var(--console-color)"><span class="token plain">    </span><span class="token string" style="color:var(--base-0b)">&quot;`&quot;</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">+</span><span class="token plain"> mf</span><span class="token punctuation" style="color:var(--base-06)">.</span><span class="token function" style="color:var(--base-0a)">getValue</span><span class="token punctuation" style="color:var(--base-06)">(</span><span class="token plain">range</span><span class="token punctuation" style="color:var(--base-06)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&#x27;ascii-math&#x27;</span><span class="token punctuation" style="color:var(--base-06)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--base-06)">+</span><span class="token plain"> </span><span class="token string" style="color:var(--base-0b)">&quot;`&quot;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>The standard delimiter for ASCIIMath is the <kbd>`</kbd> (backtick) character</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="applying-style-to-a-mathfield">Applying Style to a Mathfield<a href="#applying-style-to-a-mathfield" class="hash-link" aria-label="Direct link to Applying Style to a Mathfield" title="Direct link to Applying Style to a Mathfield">​</a></h2>
<p>The text color (&quot;ink&quot;) and background color (&quot;paper&quot;), as well as other
stylistic attributes, can be changed on a mathfield, or a portion of a mathfield
using <code>applyStyle()</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>This style applies to the content of the formula and will be reflected in the
LaTeX output. To change the appearance of the mathfield but not
the content of the formula, see <a href="/mathfield/guides/customizing/">Customizing</a>.</p></div></div>
<code-playground><div slot="html">&lt;math-field id=&quot;formula&quot;&gt;
<!-- -->  <!-- -->x=\frac{-b\pm \sqrt{b^2-4ac}}{2a}
<!-- -->&lt;/math-field&gt;
</div><div slot="javascript">const mf = document.getElementById(&#x27;formula&#x27;);
<!-- -->
<!-- -->// Change the background color of the entire mathfield
<!-- -->mf.applyStyle(
<!-- -->  <!-- -->{ backgroundColor: &#x27;yellow&#x27; },
<!-- -->  <!-- -->{ range: [0, -1] }
<!-- -->);
<!-- -->
</div></code-playground>
<p><strong>To change the style of a portion of the mathfield</strong>, specify a selection range
to <code>applyStyle()</code>.</p>
<code-playground><div slot="html">&lt;math-field id=&quot;formula&quot;&gt;
<!-- -->  <!-- -->x=\frac{-b\pm \sqrt{b^2-4ac}}{2a}
<!-- -->&lt;/math-field&gt;
</div><div slot="javascript">const mf = document.getElementById(&#x27;formula&#x27;);
<!-- -->
<!-- -->// Change the color and size of the first two characters of the mathfield
<!-- -->mf.applyStyle({color: &quot;red&quot;, fontSize: 7 }, { range: [0, 2] });
<!-- -->
</div></code-playground>
<p><strong>To remove a style</strong>, set the value of the <code>fontFamily</code>, <code>color</code> or <code>backgroundColor</code>
property to <code>&quot;none&quot;</code>, or the value of the <code>fontShape</code>, <code>fontSeries</code> or <code>fontSize</code>
property to <code>&quot;auto&quot;</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>You can ignore styles applied to a formula by using <code>mf.getValue(&#x27;latex-unstyled&#x27;)</code></p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_VsjB"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/mathfield/guides/svelte/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using Svelte</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/mathfield/guides/customizing/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Customize</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#changing-the-content-of-a-mathfield" class="table-of-contents__link toc-highlight">Changing the Content of a Mathfield</a></li><li><a href="#reading-the-content-of-a-mathfield" class="table-of-contents__link toc-highlight">Reading the Content of a Mathfield</a></li><li><a href="#using-a-mathfield-with-the-compute-engine" class="table-of-contents__link toc-highlight">Using a Mathfield with the Compute Engine</a></li><li><a href="#listening-for-changes-to-a-mathfield" class="table-of-contents__link toc-highlight">Listening for Changes to a Mathfield</a></li><li><a href="#detecting-when-the-user-has-finished-editing-a-mathfield" class="table-of-contents__link toc-highlight">Detecting When the User has Finished Editing a Mathfield</a></li><li><a href="#detecting-a-click-on-a-mathfield" class="table-of-contents__link toc-highlight">Detecting a Click on a Mathfield</a></li><li><a href="#detecting-navigation-out-of-a-mathfield" class="table-of-contents__link toc-highlight">Detecting Navigation out of a Mathfield</a></li><li><a href="#interacting-with-the-clipboard" class="table-of-contents__link toc-highlight">Interacting with the Clipboard</a></li><li><a href="#applying-style-to-a-mathfield" class="table-of-contents__link toc-highlight">Applying Style to a Mathfield</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mathfield/">Mathfield</a></li><li class="footer__item"><a class="footer__link-item" href="/compute-engine/">Compute Engine</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/cortex-js" target="_blank" rel="noopener noreferrer" class="footer__link-item"><svg class="icon-one-rem"><use role="none" xlink:href="/icons.svg#github"></use></svg>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/yhmvVeJ4Hd" target="_blank" rel="noopener noreferrer" class="footer__link-item"><svg class="icon-one-rem"><use role="none" xlink:href="/icons.svg#discord"></use></svg>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://chat.openai.com/g/g-8YgEfR7ig-cortexjs-assistant" target="_blank" rel="noopener noreferrer" class="footer__link-item"><svg class="icon-one-rem"><use role="none" xlink:href="/icons.svg#openai"></use></svg>CortexJS Chatbot<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/about/">About Us</a></li></ul></div></div></div></footer></div>
</body>
</html>